/*! For license information please see index.js.LICENSE.txt */
var t={8097:(t,e,i)=>{i.d(e,{LT:()=>g});var n=i(4113),s=i(173),r=i(1433),a=i(7518),o=i(77),l=i(3963),c=i(7028);function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function h(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function u(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?h(Object(i),!0).forEach((function(e){p(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function p(t,e,i){return(e=function(t){var e=function(t){if("object"!=d(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,"string");if("object"!=d(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==d(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var f={utils:{logger:i(5059).A}},g=u(u(u(u(u(u(u(u({},n),a),s),o),l),c),r),f)},173:(t,e,i)=>{i.r(e),i.d(e,{activity:()=>a,activityId:()=>o,activitySubTitle:()=>d,activityTags:()=>h,activityTemplateId:()=>l,activityTitle:()=>c,adaptiveType:()=>u,annotationsConfig:()=>p,autoSaveConfig:()=>f,elapsedTime:()=>g,hasActivityTemplate:()=>m,hasAnnotations:()=>v,hasAnswerMasking:()=>b,hasAutoSave:()=>y,hasEvents:()=>w,hasItemPool:()=>A,hasLineReader:()=>x,hasResourceItems:()=>E,hasSections:()=>S,hasShuffledItems:()=>_,hasTryAgain:()=>T,isAdaptive:()=>C,isResuming:()=>k,itemBank:()=>M,itemPool:()=>I,maxTime:()=>L,region:()=>P,resourceItems:()=>R,sessionId:()=>D,state:()=>F,timeRemaining:()=>O,totalItems:()=>N,userId:()=>B});var n=i(4113),s=i(7028),r=i(5059);function a(){return n.appInstance().getActivity()}function o(){return a().activity_id}function l(){return a().activity_template_id}function c(){return a().config.title}function d(){return a().config.subtitle}function h(){return n.appInstance().getTags()}function u(){return C()&&a().adaptive.hasOwnProperty("type")?a().adaptive.type:""}function p(){var t;return v()&&null!==(t=a())&&void 0!==t&&null!==(t=t.config)&&void 0!==t&&t.annotations_api_init_options?a().config.annotations_api_init_options:{}}function f(){var t,e=a();return null!=e&&null!==(t=e.config)&&void 0!==t&&null!==(t=t.navigation)&&void 0!==t&&t.auto_save?e.config.navigation.auto_save:{}}function g(){return n.appInstance().getTime()}function m(){return a().hasOwnProperty("activity_template_id")}function v(){var t,e,i=a();return Boolean(!0===(null==i||null===(t=i.config)||void 0===t?void 0:t.annotations)||(null==i||null===(e=i.config)||void 0===e?void 0:e.annotations_api_init_options))}function b(){return!!document.querySelector(".test-answer-masking")}function y(){var t=a();return t.hasOwnProperty("config")&&t.config.hasOwnProperty("navigation")&&t.config.navigation.hasOwnProperty("auto_save")&&!1!==t.config.navigation.auto_save}function _(){var t;return Boolean(null===(t=a())||void 0===t||null===(t=t.config)||void 0===t||null===(t=t.configuration)||void 0===t?void 0:t.shuffle_items)}function w(){var t=a();return t.hasOwnProperty("events")&&!1!==t.events}function A(){return a().hasOwnProperty("item_pool_id")}function x(){return!!document.querySelector(".lrn_linereader-toggle")}function E(){var t;return Boolean(null===(t=a())||void 0===t||null===(t=t.config)||void 0===t||null===(t=t.navigation)||void 0===t?void 0:t.resource_items)}function S(){return a().hasOwnProperty("sections")}function T(){var t;return null===(t=a())||void 0===t?void 0:t.dynamic_items.hasOwnProperty("try_again")}function C(){return a().hasOwnProperty("adaptive")}function k(){return a().existing_session}function M(){var t;return null===(t=a())||void 0===t?void 0:t.organisation_id}function I(){var t;return null===(t=a())||void 0===t?void 0:t.item_pool_id}function L(){var t;return null!==(t=a())&&void 0!==t&&null!==(t=t.config)&&void 0!==t&&null!==(t=t.time)&&void 0!==t&&t.max_time?a().config.time.max_time:0}function P(){var t;return null===(t=a())||void 0===t||null===(t=t.config)||void 0===t?void 0:t.regions}function R(){var t;return null===(t=a())||void 0===t||null===(t=t.config)||void 0===t||null===(t=t.navigation)||void 0===t?void 0:t.resource_items}function D(){var t;return null===(t=a())||void 0===t?void 0:t.session_id}function F(){var t;return void 0===(null===(t=a())||void 0===t?void 0:t.state)?"initial":a().state}function O(){return 0===L()?null:L()-g()}function N(){if(S()){for(var t=0,e=s.sections(),i=0;i<e.length;i++)t+=e[i].items.length;return t}return C()?a().hasOwnProperty("items")?a().items.length:(r.A.info("This is an adaptive session, no items array found"),0):a().items.length}function B(){var t;return null===(t=a())||void 0===t?void 0:t.user_id}},4113:(t,e,i)=>{i.r(e),i.d(e,{annotationsApp:()=>l,appInstance:()=>o,assessApp:()=>c,eventsApp:()=>d,init:()=>a,questionsApp:()=>h});var n=i(1433),s=i(3963),r={};function a(t){r.app=t,r.app.on("all",(function(t){(0,n.handleEvent)(t)})),r.app.on("item:load",(function(t){(0,s.questionResponseIds)().forEach((function(t){r.app.question(t).on("changed",(function(t){(0,n.handleEvent)("changed")}))}))}))}function o(){return r.app}function l(){return void 0!==o().annotationsApp()?o().annotationsApp():null}function c(){return o().assessApp()}function d(){return o().eventsApp()}function h(){return o().questionsApp()}},1433:(t,e,i)=>{i.r(e),i.d(e,{diagnostics:()=>l,filterEvent:()=>c,handleEvent:()=>d,listen:()=>h});var n=i(4113),s=i(173),r=i(5059),a="2.16.0",o={events:{broadcast:!1,listenFor:"item"}};function l(){var t=window.LearnosityApp?LearnosityApp.versions:{};return{apps:{annotations:{app:n.annotationsApp(),config:s.annotationsConfig(),enabled:s.hasAnnotations()},assess:{app:n.assessApp()},events:{app:n.eventsApp(),enabled:s.hasEvents()},items:{app:n.appInstance(),metadata:s.activity().config.metadata},questions:{app:n.questionsApp()}},activity:{activity:s.activityId(),activityTemplate:s.activityTemplateId(),autoSave:{config:s.autoSaveConfig(),enabled:s.hasAutoSave()},itemBank:s.itemBank(),itemPool:s.itemPool(),session:s.sessionId(),state:s.state(),type:s.activity().type,user:s.userId()},LT:{version:a},versions:t}}function c(t){/^[a-zA-Z:*]*$/.test(t)?o.events.listenFor=t:r.A.warn("Invalid event type")}function d(t){if(o.events.broadcast){var e=o.events.listenFor,i=e.replaceAll("*","");1===e.length&&"*"===e||"all"===e?r.A.info(t):e.startsWith("*")&&!e.endsWith("*")?t.endsWith(i)&&r.A.info(t):e.endsWith("*")&&!e.startsWith("*")?t.startsWith(i)&&r.A.info(t):e.startsWith("*")&&e.endsWith("*")?t.includes(i)&&r.A.info(t):t.startsWith(i)&&r.A.info(t)}}function h(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];o.events.broadcast=Boolean(t),Boolean(t)?r.A.info("👂 listening for '".concat(o.events.listenFor,"'")):r.A.info("🚫👂 not listening")}},7518:(t,e,i)=>{i.r(e),i.d(e,{dynamic:()=>l,flag:()=>c,isDynamicItem:()=>d,isFirstItem:()=>h,isFlagged:()=>p,isItemFullyAttempted:()=>f,isLastItem:()=>u,isMaskingEnabled:()=>g,item:()=>m,itemAttemptStatus:()=>v,itemByResponseId:()=>b,itemElement:()=>y,itemPosition:()=>_,itemReference:()=>w,itemTags:()=>A});var n=i(4113),s=i(173),r=i(3963),a=i(7028);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function l(){var t=w();return n.assessApp().item(t).dynamic||{}}function c(){var t=w();n.assessApp().item(t).flag()}function d(){var t;return null===(t=m())||void 0===t?void 0:t.source.hasOwnProperty("data_table_seed")}function h(){return s.hasSections()?("object"===o(a.sections()[0].items[0])?a.sections()[0].items[0].reference:a.sections()[0].items[0])===m().reference:("object"===o(s.activity().items[0])?s.activity().items[0].reference:s.activity().items[0])===m().reference}function u(){return m().is_last_item}function p(){return m().user_flagged}function f(t){var e,i,s;if(e=t?n.appInstance().getItems()[t].questions:r.questions(),Array.isArray(e)&&e.length)for(var a=0;a<e.length;a++){var o=e[a];if(!(s=r.questionResponse(o.response_id)))return!1;if(o.hasOwnProperty("metadata")&&o.metadata.hasOwnProperty("valid_response_count")&&Array.isArray(s.value)){if(s.value.filter((function(t){return void 0===t})).length)return!1;if(s.value.filter((function(t){return null===t})).length)return!1}i=!0}else i=!0;return i}function g(){return Boolean(document.querySelector(".lrn-masking"))}function m(t){return t?n.appInstance().getItems()[t]:n.appInstance().getCurrentItem()}function v(){return n.appInstance().getCurrentItem().attempt_status}function b(t){var e,i=n.appInstance().getItems();for(var s in i)if(i[s].response_ids.includes(t)){e=i[s];break}return e}function y(){return document.querySelector("div[data-reference='".concat(w(),"']"))}function _(){return n.appInstance().assessApp().getItemPosition(w())+1}function w(){return n.appInstance().getCurrentItem().reference}function A(t){return n.appInstance().getTags()[t||w()]||[]}},77:(t,e,i)=>{i.r(e),i.d(e,{answerMasking:()=>o,dialog:()=>l,hideDialog:()=>c,isResponsiveMode:()=>d,isReviewScreen:()=>h,lineReader:()=>u,navigate:()=>p,next:()=>f,previous:()=>g,review:()=>m,submit:()=>v}),i(173);var n=i(4113),s=i(7518),r=i(5059),a={answerMasking:{enabled:null},lineReader:{enabled:null,id:null}};function o(t){if(null===a.answerMasking.enabled){var e=document.querySelector(".test-answer-masking");a.answerMasking.enabled=!!e}a.answerMasking.enabled?void 0!==t&&n.appInstance().questionsApp().masking(t):r.A.warn("Answer masking is not enabled in the Items API configuration.")}function l(t){n.assessApp().dialogs().custom.show(t)}function c(){n.assessApp().dialogs().custom.hide()}function d(){return Boolean(document.querySelector(".has-menu-region"))}function h(){var t=!1;setTimeout((function(){return null===document.getElementsByClassName("review-screen")[0].getAttribute("aria-hidden")&&(t=!0),t}),500)}function u(t){if(null===a.lineReader.enabled){var e=document.querySelector(".lrn_linereader-toggle");if(e){a.lineReader.enabled=!0;var i=e.querySelector("[data-lrn-widget-container]").getAttribute("data-lrn-widget-container").match(/\d+$/);i?a.lineReader.id=i[0]:r.A.warn("Could not find the line reader unique id.")}else a.lineReader.enabled=!1}if(a.lineReader.enabled&&null!==a.lineReader.id){var s=n.appInstance().features()["lrn-assessapp-feature_".concat(a.lineReader.id)];switch(t){case"show":s.show();break;case"hide":s.hide();break;default:s.toggle()}}else r.A.warn("Line reader is not enabled in the Items API configuration.")}function p(t){switch(t){case"previous":n.appInstance().items().previous();break;case"next":s.isLastItem()||n.appInstance().items().next();break;case"review":null===document.getElementsByClassName("review-screen")[0].getAttribute("aria-hidden")?n.appInstance().dialogs().reviewScreen.hide():n.appInstance().dialogs().reviewScreen.show();break;case"submit":var e={show_submit_confirmation:!0,show_submit_ui:!0,success:function(t){alert("Test saved!")},error:function(t){alert("Test submit failed...check browser log"),console.log("Submission failed: ",t)}};n.appInstance().submit(e);break;default:"number"==typeof Number(t)&&Number(t)>=0?n.appInstance().items().goto(Number(t)):r.A.warn("Invalid target (".concat(t,")"))}}function f(){p("next")}function g(){p("previous")}function m(){p("review")}function v(){p("submit")}},3963:(t,e,i)=>{i.r(e),i.d(e,{hasCheckAnswer:()=>o,isAutoScorable:()=>l,question:()=>c,questionInstance:()=>d,questionResponse:()=>u,questionResponseIds:()=>p,questionScore:()=>f,questions:()=>h});var n=i(4113),s=i(7518),r=i(173),a=i(5059);function o(t){var e;if(!l(t))return!1;var i=(null===(e=(0,r.activity)())||void 0===e||null===(e=e.config)||void 0===e||null===(e=e.questions_api_init_options)||void 0===e?void 0:e.attribute_overrides)&&(0,r.activity)().config.questions_api_init_options.attribute_overrides.hasOwnProperty("instant_feedback")&&"boolean"==typeof(0,r.activity)().config.questions_api_init_options.attribute_overrides.instant_feedback,n=c(t);return i?(0,r.activity)().config.questions_api_init_options.attribute_overrides.instant_feedback:!(!n.hasOwnProperty("instant_feedback")||"boolean"!=typeof n.instant_feedback)&&n.instant_feedback}function l(t){return c(t),d(t).checkValidation().has_validation}function c(t){var e=t||p()[0];return e?n.appInstance().question(e).getQuestion():(a.A.error("Question not found (index ".concat(e,")")),{})}function d(t){var e=t||p()[0];return e?n.appInstance().question(e):{}}function h(){return s.item().questions}function u(t){var e=t||p()[0];return e?function(t){return n.appInstance().question(t)?n.appInstance().question(t).getResponse():void a.A.error("Response not found ".concat(t))}(e):{}}function p(){return h().map((function(t){return t.response_id}))}function f(t){var e=t||p()[0];return e&&n.appInstance().getScores()[e]||{}}},7028:(t,e,i)=>{i.r(e),i.d(e,{isFirstItemInSection:()=>r,isLastItemInSection:()=>a,section:()=>o,sectionHasShuffledItems:()=>l,sectionIndex:()=>c,sectionItemPosition:()=>d,sections:()=>h,totalItemsInSection:()=>u});var n=i(173),s=i(7518);function r(){return 1===d()}function a(){return d()===u()}function o(){if(n.hasSections()){for(var t=s.itemReference(),e=h(),i=-1,r=!1,a=0;a<e.length&&!r;a++){++i;for(var o=0;o<e[a].items.length;o++)if(t===e[a].items[o].reference){r=!0;break}}return h()[i]}return{}}function l(){var t;return Boolean(null===(t=o())||void 0===t||null===(t=t.config)||void 0===t||null===(t=t.configuration)||void 0===t?void 0:t.shuffle_items)}function c(){if(n.hasSections()){for(var t=s.itemReference(),e=e(),i=0,r=!1,a=0;a<e.length&&!r;a++){++i;for(var o=0;o<e[a].items.length;o++)if(t===e[a].items[o].reference){r=!0;break}}return i}return 0}function d(){var t=s.itemReference(),e=o(),i=0;if(!Object.keys(e).length)return null;for(var n=0;n<e.items.length&&(++i,t!==e.items[n].reference);n++);return i}function h(){return n.hasSections()?n.activity().sections:[]}function u(){var t;return(null===(t=o())||void 0===t||null===(t=t.items)||void 0===t?void 0:t.length)||null}},5059:(t,e,i)=>{i.d(e,{A:()=>n});const n={debug:function(t,e){"DEBUG"===e&&console.log(t)},error:function(t){console.error("%cError:%c "+t,"display:inline-block;background-color:#e0005a;color:#fff;font-weight:bold;padding:3px 7px;border-radius:3px","")},info:function(t){console.info("%cInfo:%c "+t,"display:inline-block;background-color:#46C0FF;color:#000;font-weight:bold;padding:3px 7px;border-radius:3px","")},log:function(t){console.log(t)},warn:function(t){console.warn("%cWarning:%c "+t,"display:inline-block;background-color:gold;color:#000;font-weight:bold;padding:3px 7px;border-radius:3px","")}}},4196:(t,e,i)=>{var n;!function(){var s=function(){this.init()};s.prototype={init:function(){var t=this||r;return t._counter=1e3,t._html5AudioPool=[],t.html5PoolSize=10,t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.autoUnlock=!0,t._setup(),t},volume:function(t){var e=this||r;if(t=parseFloat(t),e.ctx||p(),void 0!==t&&t>=0&&t<=1){if(e._volume=t,e._muted)return e;e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t,r.ctx.currentTime);for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var n=e._howls[i]._getSoundIds(),s=0;s<n.length;s++){var a=e._howls[i]._soundById(n[s]);a&&a._node&&(a._node.volume=a._volume*t)}return e}return e._volume},mute:function(t){var e=this||r;e.ctx||p(),e._muted=t,e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t?0:e._volume,r.ctx.currentTime);for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var n=e._howls[i]._getSoundIds(),s=0;s<n.length;s++){var a=e._howls[i]._soundById(n[s]);a&&a._node&&(a._node.muted=!!t||a._muted)}return e},stop:function(){for(var t=this||r,e=0;e<t._howls.length;e++)t._howls[e].stop();return t},unload:function(){for(var t=this||r,e=t._howls.length-1;e>=0;e--)t._howls[e].unload();return t.usingWebAudio&&t.ctx&&void 0!==t.ctx.close&&(t.ctx.close(),t.ctx=null,p()),t},codecs:function(t){return(this||r)._codecs[t.replace(/^x-/,"")]},_setup:function(){var t=this||r;if(t.state=t.ctx&&t.ctx.state||"suspended",t._autoSuspend(),!t.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(t._canPlayEvent="canplay")}catch(e){t.noAudio=!0}else t.noAudio=!0;try{(new Audio).muted&&(t.noAudio=!0)}catch(t){}return t.noAudio||t._setupCodecs(),t},_setupCodecs:function(){var t=this||r,e=null;try{e="undefined"!=typeof Audio?new Audio:null}catch(e){return t}if(!e||"function"!=typeof e.canPlayType)return t;var i=e.canPlayType("audio/mpeg;").replace(/^no$/,""),n=t._navigator?t._navigator.userAgent:"",s=n.match(/OPR\/(\d+)/g),a=s&&parseInt(s[0].split("/")[1],10)<33,o=-1!==n.indexOf("Safari")&&-1===n.indexOf("Chrome"),l=n.match(/Version\/(.*?) /),c=o&&l&&parseInt(l[1],10)<15;return t._codecs={mp3:!(a||!i&&!e.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!i,opus:!!e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(e.canPlayType('audio/wav; codecs="1"')||e.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!e.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!e.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(e.canPlayType("audio/x-m4b;")||e.canPlayType("audio/m4b;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(e.canPlayType("audio/x-mp4;")||e.canPlayType("audio/mp4;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(c||!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(c||!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!e.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(e.canPlayType("audio/x-flac;")||e.canPlayType("audio/flac;")).replace(/^no$/,"")},t},_unlockAudio:function(){var t=this||r;if(!t._audioUnlocked&&t.ctx){t._audioUnlocked=!1,t.autoUnlock=!1,t._mobileUnloaded||44100===t.ctx.sampleRate||(t._mobileUnloaded=!0,t.unload()),t._scratchBuffer=t.ctx.createBuffer(1,1,22050);var e=function(i){for(;t._html5AudioPool.length<t.html5PoolSize;)try{var n=new Audio;n._unlocked=!0,t._releaseHtml5Audio(n)}catch(i){t.noAudio=!0;break}for(var s=0;s<t._howls.length;s++)if(!t._howls[s]._webAudio)for(var r=t._howls[s]._getSoundIds(),a=0;a<r.length;a++){var o=t._howls[s]._soundById(r[a]);o&&o._node&&!o._node._unlocked&&(o._node._unlocked=!0,o._node.load())}t._autoResume();var l=t.ctx.createBufferSource();l.buffer=t._scratchBuffer,l.connect(t.ctx.destination),void 0===l.start?l.noteOn(0):l.start(0),"function"==typeof t.ctx.resume&&t.ctx.resume(),l.onended=function(){l.disconnect(0),t._audioUnlocked=!0,document.removeEventListener("touchstart",e,!0),document.removeEventListener("touchend",e,!0),document.removeEventListener("click",e,!0),document.removeEventListener("keydown",e,!0);for(var i=0;i<t._howls.length;i++)t._howls[i]._emit("unlock")}};return document.addEventListener("touchstart",e,!0),document.addEventListener("touchend",e,!0),document.addEventListener("click",e,!0),document.addEventListener("keydown",e,!0),t}},_obtainHtml5Audio:function(){var t=this||r;if(t._html5AudioPool.length)return t._html5AudioPool.pop();var e=(new Audio).play();return e&&"undefined"!=typeof Promise&&(e instanceof Promise||"function"==typeof e.then)&&e.catch((function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")})),new Audio},_releaseHtml5Audio:function(t){var e=this||r;return t._unlocked&&e._html5AudioPool.push(t),e},_autoSuspend:function(){var t=this;if(t.autoSuspend&&t.ctx&&void 0!==t.ctx.suspend&&r.usingWebAudio){for(var e=0;e<t._howls.length;e++)if(t._howls[e]._webAudio)for(var i=0;i<t._howls[e]._sounds.length;i++)if(!t._howls[e]._sounds[i]._paused)return t;return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout((function(){if(t.autoSuspend){t._suspendTimer=null,t.state="suspending";var e=function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())};t.ctx.suspend().then(e,e)}}),3e4),t}},_autoResume:function(){var t=this;if(t.ctx&&void 0!==t.ctx.resume&&r.usingWebAudio)return"running"===t.state&&"interrupted"!==t.ctx.state&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):"suspended"===t.state||"running"===t.state&&"interrupted"===t.ctx.state?(t.ctx.resume().then((function(){t.state="running";for(var e=0;e<t._howls.length;e++)t._howls[e]._emit("resume")})),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):"suspending"===t.state&&(t._resumeAfterSuspend=!0),t}};var r=new s,a=function(t){t.src&&0!==t.src.length?this.init(t):console.error("An array of source files must be passed with any new Howl.")};a.prototype={init:function(t){var e=this;return r.ctx||p(),e._autoplay=t.autoplay||!1,e._format="string"!=typeof t.format?t.format:[t.format],e._html5=t.html5||!1,e._muted=t.mute||!1,e._loop=t.loop||!1,e._pool=t.pool||5,e._preload="boolean"!=typeof t.preload&&"metadata"!==t.preload||t.preload,e._rate=t.rate||1,e._sprite=t.sprite||{},e._src="string"!=typeof t.src?t.src:[t.src],e._volume=void 0!==t.volume?t.volume:1,e._xhr={method:t.xhr&&t.xhr.method?t.xhr.method:"GET",headers:t.xhr&&t.xhr.headers?t.xhr.headers:null,withCredentials:!(!t.xhr||!t.xhr.withCredentials)&&t.xhr.withCredentials},e._duration=0,e._state="unloaded",e._sounds=[],e._endTimers={},e._queue=[],e._playLock=!1,e._onend=t.onend?[{fn:t.onend}]:[],e._onfade=t.onfade?[{fn:t.onfade}]:[],e._onload=t.onload?[{fn:t.onload}]:[],e._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],e._onplayerror=t.onplayerror?[{fn:t.onplayerror}]:[],e._onpause=t.onpause?[{fn:t.onpause}]:[],e._onplay=t.onplay?[{fn:t.onplay}]:[],e._onstop=t.onstop?[{fn:t.onstop}]:[],e._onmute=t.onmute?[{fn:t.onmute}]:[],e._onvolume=t.onvolume?[{fn:t.onvolume}]:[],e._onrate=t.onrate?[{fn:t.onrate}]:[],e._onseek=t.onseek?[{fn:t.onseek}]:[],e._onunlock=t.onunlock?[{fn:t.onunlock}]:[],e._onresume=[],e._webAudio=r.usingWebAudio&&!e._html5,void 0!==r.ctx&&r.ctx&&r.autoUnlock&&r._unlockAudio(),r._howls.push(e),e._autoplay&&e._queue.push({event:"play",action:function(){e.play()}}),e._preload&&"none"!==e._preload&&e.load(),e},load:function(){var t=this,e=null;if(r.noAudio)t._emit("loaderror",null,"No audio support.");else{"string"==typeof t._src&&(t._src=[t._src]);for(var i=0;i<t._src.length;i++){var n,s;if(t._format&&t._format[i])n=t._format[i];else{if("string"!=typeof(s=t._src[i])){t._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(n=/^data:audio\/([^;,]+);/i.exec(s))||(n=/\.([^.]+)$/.exec(s.split("?",1)[0])),n&&(n=n[1].toLowerCase())}if(n||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),n&&r.codecs(n)){e=t._src[i];break}}if(e)return t._src=e,t._state="loading","https:"===window.location.protocol&&"http:"===e.slice(0,5)&&(t._html5=!0,t._webAudio=!1),new o(t),t._webAudio&&c(t),t;t._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(t,e){var i=this,n=null;if("number"==typeof t)n=t,t=null;else{if("string"==typeof t&&"loaded"===i._state&&!i._sprite[t])return null;if(void 0===t&&(t="__default",!i._playLock)){for(var s=0,a=0;a<i._sounds.length;a++)i._sounds[a]._paused&&!i._sounds[a]._ended&&(s++,n=i._sounds[a]._id);1===s?t=null:n=null}}var o=n?i._soundById(n):i._inactiveSound();if(!o)return null;if(n&&!t&&(t=o._sprite||"__default"),"loaded"!==i._state){o._sprite=t,o._ended=!1;var l=o._id;return i._queue.push({event:"play",action:function(){i.play(l)}}),l}if(n&&!o._paused)return e||i._loadQueue("play"),o._id;i._webAudio&&r._autoResume();var c=Math.max(0,o._seek>0?o._seek:i._sprite[t][0]/1e3),d=Math.max(0,(i._sprite[t][0]+i._sprite[t][1])/1e3-c),h=1e3*d/Math.abs(o._rate),u=i._sprite[t][0]/1e3,p=(i._sprite[t][0]+i._sprite[t][1])/1e3;o._sprite=t,o._ended=!1;var f=function(){o._paused=!1,o._seek=c,o._start=u,o._stop=p,o._loop=!(!o._loop&&!i._sprite[t][2])};if(!(c>=p)){var g=o._node;if(i._webAudio){var m=function(){i._playLock=!1,f(),i._refreshBuffer(o);var t=o._muted||i._muted?0:o._volume;g.gain.setValueAtTime(t,r.ctx.currentTime),o._playStart=r.ctx.currentTime,void 0===g.bufferSource.start?o._loop?g.bufferSource.noteGrainOn(0,c,86400):g.bufferSource.noteGrainOn(0,c,d):o._loop?g.bufferSource.start(0,c,86400):g.bufferSource.start(0,c,d),h!==1/0&&(i._endTimers[o._id]=setTimeout(i._ended.bind(i,o),h)),e||setTimeout((function(){i._emit("play",o._id),i._loadQueue()}),0)};"running"===r.state&&"interrupted"!==r.ctx.state?m():(i._playLock=!0,i.once("resume",m),i._clearTimer(o._id))}else{var v=function(){g.currentTime=c,g.muted=o._muted||i._muted||r._muted||g.muted,g.volume=o._volume*r.volume(),g.playbackRate=o._rate;try{var n=g.play();if(n&&"undefined"!=typeof Promise&&(n instanceof Promise||"function"==typeof n.then)?(i._playLock=!0,f(),n.then((function(){i._playLock=!1,g._unlocked=!0,e?i._loadQueue():i._emit("play",o._id)})).catch((function(){i._playLock=!1,i._emit("playerror",o._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),o._ended=!0,o._paused=!0}))):e||(i._playLock=!1,f(),i._emit("play",o._id)),g.playbackRate=o._rate,g.paused)return void i._emit("playerror",o._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==t||o._loop?i._endTimers[o._id]=setTimeout(i._ended.bind(i,o),h):(i._endTimers[o._id]=function(){i._ended(o),g.removeEventListener("ended",i._endTimers[o._id],!1)},g.addEventListener("ended",i._endTimers[o._id],!1))}catch(t){i._emit("playerror",o._id,t)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===g.src&&(g.src=i._src,g.load());var b=window&&window.ejecta||!g.readyState&&r._navigator.isCocoonJS;if(g.readyState>=3||b)v();else{i._playLock=!0,i._state="loading";var y=function(){i._state="loaded",v(),g.removeEventListener(r._canPlayEvent,y,!1)};g.addEventListener(r._canPlayEvent,y,!1),i._clearTimer(o._id)}}return o._id}i._ended(o)},pause:function(t){var e=this;if("loaded"!==e._state||e._playLock)return e._queue.push({event:"pause",action:function(){e.pause(t)}}),e;for(var i=e._getSoundIds(t),n=0;n<i.length;n++){e._clearTimer(i[n]);var s=e._soundById(i[n]);if(s&&!s._paused&&(s._seek=e.seek(i[n]),s._rateSeek=0,s._paused=!0,e._stopFade(i[n]),s._node))if(e._webAudio){if(!s._node.bufferSource)continue;void 0===s._node.bufferSource.stop?s._node.bufferSource.noteOff(0):s._node.bufferSource.stop(0),e._cleanBuffer(s._node)}else isNaN(s._node.duration)&&s._node.duration!==1/0||s._node.pause();arguments[1]||e._emit("pause",s?s._id:null)}return e},stop:function(t,e){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"stop",action:function(){i.stop(t)}}),i;for(var n=i._getSoundIds(t),s=0;s<n.length;s++){i._clearTimer(n[s]);var r=i._soundById(n[s]);r&&(r._seek=r._start||0,r._rateSeek=0,r._paused=!0,r._ended=!0,i._stopFade(n[s]),r._node&&(i._webAudio?r._node.bufferSource&&(void 0===r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),i._cleanBuffer(r._node)):isNaN(r._node.duration)&&r._node.duration!==1/0||(r._node.currentTime=r._start||0,r._node.pause(),r._node.duration===1/0&&i._clearSound(r._node))),e||i._emit("stop",r._id))}return i},mute:function(t,e){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"mute",action:function(){i.mute(t,e)}}),i;if(void 0===e){if("boolean"!=typeof t)return i._muted;i._muted=t}for(var n=i._getSoundIds(e),s=0;s<n.length;s++){var a=i._soundById(n[s]);a&&(a._muted=t,a._interval&&i._stopFade(a._id),i._webAudio&&a._node?a._node.gain.setValueAtTime(t?0:a._volume,r.ctx.currentTime):a._node&&(a._node.muted=!!r._muted||t),i._emit("mute",a._id))}return i},volume:function(){var t,e,i,n=this,s=arguments;if(0===s.length)return n._volume;if(1===s.length||2===s.length&&void 0===s[1]?n._getSoundIds().indexOf(s[0])>=0?e=parseInt(s[0],10):t=parseFloat(s[0]):s.length>=2&&(t=parseFloat(s[0]),e=parseInt(s[1],10)),!(void 0!==t&&t>=0&&t<=1))return(i=e?n._soundById(e):n._sounds[0])?i._volume:0;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"volume",action:function(){n.volume.apply(n,s)}}),n;void 0===e&&(n._volume=t),e=n._getSoundIds(e);for(var a=0;a<e.length;a++)(i=n._soundById(e[a]))&&(i._volume=t,s[2]||n._stopFade(e[a]),n._webAudio&&i._node&&!i._muted?i._node.gain.setValueAtTime(t,r.ctx.currentTime):i._node&&!i._muted&&(i._node.volume=t*r.volume()),n._emit("volume",i._id));return n},fade:function(t,e,i,n){var s=this;if("loaded"!==s._state||s._playLock)return s._queue.push({event:"fade",action:function(){s.fade(t,e,i,n)}}),s;t=Math.min(Math.max(0,parseFloat(t)),1),e=Math.min(Math.max(0,parseFloat(e)),1),i=parseFloat(i),s.volume(t,n);for(var a=s._getSoundIds(n),o=0;o<a.length;o++){var l=s._soundById(a[o]);if(l){if(n||s._stopFade(a[o]),s._webAudio&&!l._muted){var c=r.ctx.currentTime,d=c+i/1e3;l._volume=t,l._node.gain.setValueAtTime(t,c),l._node.gain.linearRampToValueAtTime(e,d)}s._startFadeInterval(l,t,e,i,a[o],void 0===n)}}return s},_startFadeInterval:function(t,e,i,n,s,r){var a=this,o=e,l=i-e,c=Math.abs(l/.01),d=Math.max(4,c>0?n/c:n),h=Date.now();t._fadeTo=i,t._interval=setInterval((function(){var s=(Date.now()-h)/n;h=Date.now(),o+=l*s,o=Math.round(100*o)/100,o=l<0?Math.max(i,o):Math.min(i,o),a._webAudio?t._volume=o:a.volume(o,t._id,!0),r&&(a._volume=o),(i<e&&o<=i||i>e&&o>=i)&&(clearInterval(t._interval),t._interval=null,t._fadeTo=null,a.volume(i,t._id),a._emit("fade",t._id))}),d)},_stopFade:function(t){var e=this,i=e._soundById(t);return i&&i._interval&&(e._webAudio&&i._node.gain.cancelScheduledValues(r.ctx.currentTime),clearInterval(i._interval),i._interval=null,e.volume(i._fadeTo,t),i._fadeTo=null,e._emit("fade",t)),e},loop:function(){var t,e,i,n=this,s=arguments;if(0===s.length)return n._loop;if(1===s.length){if("boolean"!=typeof s[0])return!!(i=n._soundById(parseInt(s[0],10)))&&i._loop;t=s[0],n._loop=t}else 2===s.length&&(t=s[0],e=parseInt(s[1],10));for(var r=n._getSoundIds(e),a=0;a<r.length;a++)(i=n._soundById(r[a]))&&(i._loop=t,n._webAudio&&i._node&&i._node.bufferSource&&(i._node.bufferSource.loop=t,t&&(i._node.bufferSource.loopStart=i._start||0,i._node.bufferSource.loopEnd=i._stop,n.playing(r[a])&&(n.pause(r[a],!0),n.play(r[a],!0)))));return n},rate:function(){var t,e,i,n=this,s=arguments;if(0===s.length?e=n._sounds[0]._id:1===s.length?n._getSoundIds().indexOf(s[0])>=0?e=parseInt(s[0],10):t=parseFloat(s[0]):2===s.length&&(t=parseFloat(s[0]),e=parseInt(s[1],10)),"number"!=typeof t)return(i=n._soundById(e))?i._rate:n._rate;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"rate",action:function(){n.rate.apply(n,s)}}),n;void 0===e&&(n._rate=t),e=n._getSoundIds(e);for(var a=0;a<e.length;a++)if(i=n._soundById(e[a])){n.playing(e[a])&&(i._rateSeek=n.seek(e[a]),i._playStart=n._webAudio?r.ctx.currentTime:i._playStart),i._rate=t,n._webAudio&&i._node&&i._node.bufferSource?i._node.bufferSource.playbackRate.setValueAtTime(t,r.ctx.currentTime):i._node&&(i._node.playbackRate=t);var o=n.seek(e[a]),l=1e3*((n._sprite[i._sprite][0]+n._sprite[i._sprite][1])/1e3-o)/Math.abs(i._rate);!n._endTimers[e[a]]&&i._paused||(n._clearTimer(e[a]),n._endTimers[e[a]]=setTimeout(n._ended.bind(n,i),l)),n._emit("rate",i._id)}return n},seek:function(){var t,e,i=this,n=arguments;if(0===n.length?i._sounds.length&&(e=i._sounds[0]._id):1===n.length?i._getSoundIds().indexOf(n[0])>=0?e=parseInt(n[0],10):i._sounds.length&&(e=i._sounds[0]._id,t=parseFloat(n[0])):2===n.length&&(t=parseFloat(n[0]),e=parseInt(n[1],10)),void 0===e)return 0;if("number"==typeof t&&("loaded"!==i._state||i._playLock))return i._queue.push({event:"seek",action:function(){i.seek.apply(i,n)}}),i;var s=i._soundById(e);if(s){if(!("number"==typeof t&&t>=0)){if(i._webAudio){var a=i.playing(e)?r.ctx.currentTime-s._playStart:0,o=s._rateSeek?s._rateSeek-s._seek:0;return s._seek+(o+a*Math.abs(s._rate))}return s._node.currentTime}var l=i.playing(e);l&&i.pause(e,!0),s._seek=t,s._ended=!1,i._clearTimer(e),i._webAudio||!s._node||isNaN(s._node.duration)||(s._node.currentTime=t);var c=function(){l&&i.play(e,!0),i._emit("seek",e)};if(l&&!i._webAudio){var d=function(){i._playLock?setTimeout(d,0):c()};setTimeout(d,0)}else c()}return i},playing:function(t){var e=this;if("number"==typeof t){var i=e._soundById(t);return!!i&&!i._paused}for(var n=0;n<e._sounds.length;n++)if(!e._sounds[n]._paused)return!0;return!1},duration:function(t){var e=this,i=e._duration,n=e._soundById(t);return n&&(i=e._sprite[n._sprite][1]/1e3),i},state:function(){return this._state},unload:function(){for(var t=this,e=t._sounds,i=0;i<e.length;i++)e[i]._paused||t.stop(e[i]._id),t._webAudio||(t._clearSound(e[i]._node),e[i]._node.removeEventListener("error",e[i]._errorFn,!1),e[i]._node.removeEventListener(r._canPlayEvent,e[i]._loadFn,!1),e[i]._node.removeEventListener("ended",e[i]._endFn,!1),r._releaseHtml5Audio(e[i]._node)),delete e[i]._node,t._clearTimer(e[i]._id);var n=r._howls.indexOf(t);n>=0&&r._howls.splice(n,1);var s=!0;for(i=0;i<r._howls.length;i++)if(r._howls[i]._src===t._src||t._src.indexOf(r._howls[i]._src)>=0){s=!1;break}return l&&s&&delete l[t._src],r.noAudio=!1,t._state="unloaded",t._sounds=[],t=null,null},on:function(t,e,i,n){var s=this["_on"+t];return"function"==typeof e&&s.push(n?{id:i,fn:e,once:n}:{id:i,fn:e}),this},off:function(t,e,i){var n=this,s=n["_on"+t],r=0;if("number"==typeof e&&(i=e,e=null),e||i)for(r=0;r<s.length;r++){var a=i===s[r].id;if(e===s[r].fn&&a||!e&&a){s.splice(r,1);break}}else if(t)n["_on"+t]=[];else{var o=Object.keys(n);for(r=0;r<o.length;r++)0===o[r].indexOf("_on")&&Array.isArray(n[o[r]])&&(n[o[r]]=[])}return n},once:function(t,e,i){return this.on(t,e,i,1),this},_emit:function(t,e,i){for(var n=this,s=n["_on"+t],r=s.length-1;r>=0;r--)s[r].id&&s[r].id!==e&&"load"!==t||(setTimeout(function(t){t.call(this,e,i)}.bind(n,s[r].fn),0),s[r].once&&n.off(t,s[r].fn,s[r].id));return n._loadQueue(t),n},_loadQueue:function(t){var e=this;if(e._queue.length>0){var i=e._queue[0];i.event===t&&(e._queue.shift(),e._loadQueue()),t||i.action()}return e},_ended:function(t){var e=this,i=t._sprite;if(!e._webAudio&&t._node&&!t._node.paused&&!t._node.ended&&t._node.currentTime<t._stop)return setTimeout(e._ended.bind(e,t),100),e;var n=!(!t._loop&&!e._sprite[i][2]);if(e._emit("end",t._id),!e._webAudio&&n&&e.stop(t._id,!0).play(t._id),e._webAudio&&n){e._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=r.ctx.currentTime;var s=1e3*(t._stop-t._start)/Math.abs(t._rate);e._endTimers[t._id]=setTimeout(e._ended.bind(e,t),s)}return e._webAudio&&!n&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,e._clearTimer(t._id),e._cleanBuffer(t._node),r._autoSuspend()),e._webAudio||n||e.stop(t._id,!0),e},_clearTimer:function(t){var e=this;if(e._endTimers[t]){if("function"!=typeof e._endTimers[t])clearTimeout(e._endTimers[t]);else{var i=e._soundById(t);i&&i._node&&i._node.removeEventListener("ended",e._endTimers[t],!1)}delete e._endTimers[t]}return e},_soundById:function(t){for(var e=this,i=0;i<e._sounds.length;i++)if(t===e._sounds[i]._id)return e._sounds[i];return null},_inactiveSound:function(){var t=this;t._drain();for(var e=0;e<t._sounds.length;e++)if(t._sounds[e]._ended)return t._sounds[e].reset();return new o(t)},_drain:function(){var t=this,e=t._pool,i=0,n=0;if(!(t._sounds.length<e)){for(n=0;n<t._sounds.length;n++)t._sounds[n]._ended&&i++;for(n=t._sounds.length-1;n>=0;n--){if(i<=e)return;t._sounds[n]._ended&&(t._webAudio&&t._sounds[n]._node&&t._sounds[n]._node.disconnect(0),t._sounds.splice(n,1),i--)}}},_getSoundIds:function(t){if(void 0===t){for(var e=[],i=0;i<this._sounds.length;i++)e.push(this._sounds[i]._id);return e}return[t]},_refreshBuffer:function(t){return t._node.bufferSource=r.ctx.createBufferSource(),t._node.bufferSource.buffer=l[this._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop||0),t._node.bufferSource.playbackRate.setValueAtTime(t._rate,r.ctx.currentTime),this},_cleanBuffer:function(t){var e=r._navigator&&r._navigator.vendor.indexOf("Apple")>=0;if(!t.bufferSource)return this;if(r._scratchBuffer&&t.bufferSource&&(t.bufferSource.onended=null,t.bufferSource.disconnect(0),e))try{t.bufferSource.buffer=r._scratchBuffer}catch(t){}return t.bufferSource=null,this},_clearSound:function(t){/MSIE |Trident\//.test(r._navigator&&r._navigator.userAgent)||(t.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var o=function(t){this._parent=t,this.init()};o.prototype={init:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._rate=e._rate,t._seek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++r._counter,e._sounds.push(t),t.create(),t},create:function(){var t=this,e=t._parent,i=r._muted||t._muted||t._parent._muted?0:t._volume;return e._webAudio?(t._node=void 0===r.ctx.createGain?r.ctx.createGainNode():r.ctx.createGain(),t._node.gain.setValueAtTime(i,r.ctx.currentTime),t._node.paused=!0,t._node.connect(r.masterGain)):r.noAudio||(t._node=r._obtainHtml5Audio(),t._errorFn=t._errorListener.bind(t),t._node.addEventListener("error",t._errorFn,!1),t._loadFn=t._loadListener.bind(t),t._node.addEventListener(r._canPlayEvent,t._loadFn,!1),t._endFn=t._endListener.bind(t),t._node.addEventListener("ended",t._endFn,!1),t._node.src=e._src,t._node.preload=!0===e._preload?"auto":e._preload,t._node.volume=i*r.volume(),t._node.load()),t},reset:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._rate=e._rate,t._seek=0,t._rateSeek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++r._counter,t},_errorListener:function(){var t=this;t._parent._emit("loaderror",t._id,t._node.error?t._node.error.code:0),t._node.removeEventListener("error",t._errorFn,!1)},_loadListener:function(){var t=this,e=t._parent;e._duration=Math.ceil(10*t._node.duration)/10,0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue()),t._node.removeEventListener(r._canPlayEvent,t._loadFn,!1)},_endListener:function(){var t=this,e=t._parent;e._duration===1/0&&(e._duration=Math.ceil(10*t._node.duration)/10,e._sprite.__default[1]===1/0&&(e._sprite.__default[1]=1e3*e._duration),e._ended(t)),t._node.removeEventListener("ended",t._endFn,!1)}};var l={},c=function(t){var e=t._src;if(l[e])return t._duration=l[e].duration,void u(t);if(/^data:[^;]+;base64,/.test(e)){for(var i=atob(e.split(",")[1]),n=new Uint8Array(i.length),s=0;s<i.length;++s)n[s]=i.charCodeAt(s);h(n.buffer,t)}else{var r=new XMLHttpRequest;r.open(t._xhr.method,e,!0),r.withCredentials=t._xhr.withCredentials,r.responseType="arraybuffer",t._xhr.headers&&Object.keys(t._xhr.headers).forEach((function(e){r.setRequestHeader(e,t._xhr.headers[e])})),r.onload=function(){var e=(r.status+"")[0];"0"===e||"2"===e||"3"===e?h(r.response,t):t._emit("loaderror",null,"Failed loading audio file with status: "+r.status+".")},r.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete l[e],t.load())},d(r)}},d=function(t){try{t.send()}catch(e){t.onerror()}},h=function(t,e){var i=function(){e._emit("loaderror",null,"Decoding audio data failed.")},n=function(t){t&&e._sounds.length>0?(l[e._src]=t,u(e,t)):i()};"undefined"!=typeof Promise&&1===r.ctx.decodeAudioData.length?r.ctx.decodeAudioData(t).then(n).catch(i):r.ctx.decodeAudioData(t,n,i)},u=function(t,e){e&&!t._duration&&(t._duration=e.duration),0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue())},p=function(){if(r.usingWebAudio){try{"undefined"!=typeof AudioContext?r.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?r.ctx=new webkitAudioContext:r.usingWebAudio=!1}catch(t){r.usingWebAudio=!1}r.ctx||(r.usingWebAudio=!1);var t=/iP(hone|od|ad)/.test(r._navigator&&r._navigator.platform),e=r._navigator&&r._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),i=e?parseInt(e[1],10):null;if(t&&i&&i<9){var n=/safari/.test(r._navigator&&r._navigator.userAgent.toLowerCase());r._navigator&&!n&&(r.usingWebAudio=!1)}r.usingWebAudio&&(r.masterGain=void 0===r.ctx.createGain?r.ctx.createGainNode():r.ctx.createGain(),r.masterGain.gain.setValueAtTime(r._muted?0:r._volume,r.ctx.currentTime),r.masterGain.connect(r.ctx.destination)),r._setup()}};void 0===(n=function(){return{Howler:r,Howl:a}}.apply(e,[]))||(t.exports=n),e.Howler=r,e.Howl=a,void 0!==i.g?(i.g.HowlerGlobal=s,i.g.Howler=r,i.g.Howl=a,i.g.Sound=o):"undefined"!=typeof window&&(window.HowlerGlobal=s,window.Howler=r,window.Howl=a,window.Sound=o)}(),function(){var t;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var e=this;if(!e.ctx||!e.ctx.listener)return e;for(var i=e._howls.length-1;i>=0;i--)e._howls[i].stereo(t);return e},HowlerGlobal.prototype.pos=function(t,e,i){var n=this;return n.ctx&&n.ctx.listener?(e="number"!=typeof e?n._pos[1]:e,i="number"!=typeof i?n._pos[2]:i,"number"!=typeof t?n._pos:(n._pos=[t,e,i],void 0!==n.ctx.listener.positionX?(n.ctx.listener.positionX.setTargetAtTime(n._pos[0],Howler.ctx.currentTime,.1),n.ctx.listener.positionY.setTargetAtTime(n._pos[1],Howler.ctx.currentTime,.1),n.ctx.listener.positionZ.setTargetAtTime(n._pos[2],Howler.ctx.currentTime,.1)):n.ctx.listener.setPosition(n._pos[0],n._pos[1],n._pos[2]),n)):n},HowlerGlobal.prototype.orientation=function(t,e,i,n,s,r){var a=this;if(!a.ctx||!a.ctx.listener)return a;var o=a._orientation;return e="number"!=typeof e?o[1]:e,i="number"!=typeof i?o[2]:i,n="number"!=typeof n?o[3]:n,s="number"!=typeof s?o[4]:s,r="number"!=typeof r?o[5]:r,"number"!=typeof t?o:(a._orientation=[t,e,i,n,s,r],void 0!==a.ctx.listener.forwardX?(a.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),a.ctx.listener.forwardY.setTargetAtTime(e,Howler.ctx.currentTime,.1),a.ctx.listener.forwardZ.setTargetAtTime(i,Howler.ctx.currentTime,.1),a.ctx.listener.upX.setTargetAtTime(n,Howler.ctx.currentTime,.1),a.ctx.listener.upY.setTargetAtTime(s,Howler.ctx.currentTime,.1),a.ctx.listener.upZ.setTargetAtTime(r,Howler.ctx.currentTime,.1)):a.ctx.listener.setOrientation(t,e,i,n,s,r),a)},Howl.prototype.init=(t=Howl.prototype.init,function(e){var i=this;return i._orientation=e.orientation||[1,0,0],i._stereo=e.stereo||null,i._pos=e.pos||null,i._pannerAttr={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:360,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:360,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:0,distanceModel:void 0!==e.distanceModel?e.distanceModel:"inverse",maxDistance:void 0!==e.maxDistance?e.maxDistance:1e4,panningModel:void 0!==e.panningModel?e.panningModel:"HRTF",refDistance:void 0!==e.refDistance?e.refDistance:1,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:1},i._onstereo=e.onstereo?[{fn:e.onstereo}]:[],i._onpos=e.onpos?[{fn:e.onpos}]:[],i._onorientation=e.onorientation?[{fn:e.onorientation}]:[],t.call(this,e)}),Howl.prototype.stereo=function(t,i){var n=this;if(!n._webAudio)return n;if("loaded"!==n._state)return n._queue.push({event:"stereo",action:function(){n.stereo(t,i)}}),n;var s=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===i){if("number"!=typeof t)return n._stereo;n._stereo=t,n._pos=[t,0,0]}for(var r=n._getSoundIds(i),a=0;a<r.length;a++){var o=n._soundById(r[a]);if(o){if("number"!=typeof t)return o._stereo;o._stereo=t,o._pos=[t,0,0],o._node&&(o._pannerAttr.panningModel="equalpower",o._panner&&o._panner.pan||e(o,s),"spatial"===s?void 0!==o._panner.positionX?(o._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),o._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),o._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):o._panner.setPosition(t,0,0):o._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),n._emit("stereo",o._id)}}return n},Howl.prototype.pos=function(t,i,n,s){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"pos",action:function(){r.pos(t,i,n,s)}}),r;if(i="number"!=typeof i?0:i,n="number"!=typeof n?-.5:n,void 0===s){if("number"!=typeof t)return r._pos;r._pos=[t,i,n]}for(var a=r._getSoundIds(s),o=0;o<a.length;o++){var l=r._soundById(a[o]);if(l){if("number"!=typeof t)return l._pos;l._pos=[t,i,n],l._node&&(l._panner&&!l._panner.pan||e(l,"spatial"),void 0!==l._panner.positionX?(l._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(i,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(n,Howler.ctx.currentTime)):l._panner.setPosition(t,i,n)),r._emit("pos",l._id)}}return r},Howl.prototype.orientation=function(t,i,n,s){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"orientation",action:function(){r.orientation(t,i,n,s)}}),r;if(i="number"!=typeof i?r._orientation[1]:i,n="number"!=typeof n?r._orientation[2]:n,void 0===s){if("number"!=typeof t)return r._orientation;r._orientation=[t,i,n]}for(var a=r._getSoundIds(s),o=0;o<a.length;o++){var l=r._soundById(a[o]);if(l){if("number"!=typeof t)return l._orientation;l._orientation=[t,i,n],l._node&&(l._panner||(l._pos||(l._pos=r._pos||[0,0,-.5]),e(l,"spatial")),void 0!==l._panner.orientationX?(l._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),l._panner.orientationY.setValueAtTime(i,Howler.ctx.currentTime),l._panner.orientationZ.setValueAtTime(n,Howler.ctx.currentTime)):l._panner.setOrientation(t,i,n)),r._emit("orientation",l._id)}}return r},Howl.prototype.pannerAttr=function(){var t,i,n,s=this,r=arguments;if(!s._webAudio)return s;if(0===r.length)return s._pannerAttr;if(1===r.length){if("object"!=typeof r[0])return(n=s._soundById(parseInt(r[0],10)))?n._pannerAttr:s._pannerAttr;t=r[0],void 0===i&&(t.pannerAttr||(t.pannerAttr={coneInnerAngle:t.coneInnerAngle,coneOuterAngle:t.coneOuterAngle,coneOuterGain:t.coneOuterGain,distanceModel:t.distanceModel,maxDistance:t.maxDistance,refDistance:t.refDistance,rolloffFactor:t.rolloffFactor,panningModel:t.panningModel}),s._pannerAttr={coneInnerAngle:void 0!==t.pannerAttr.coneInnerAngle?t.pannerAttr.coneInnerAngle:s._coneInnerAngle,coneOuterAngle:void 0!==t.pannerAttr.coneOuterAngle?t.pannerAttr.coneOuterAngle:s._coneOuterAngle,coneOuterGain:void 0!==t.pannerAttr.coneOuterGain?t.pannerAttr.coneOuterGain:s._coneOuterGain,distanceModel:void 0!==t.pannerAttr.distanceModel?t.pannerAttr.distanceModel:s._distanceModel,maxDistance:void 0!==t.pannerAttr.maxDistance?t.pannerAttr.maxDistance:s._maxDistance,refDistance:void 0!==t.pannerAttr.refDistance?t.pannerAttr.refDistance:s._refDistance,rolloffFactor:void 0!==t.pannerAttr.rolloffFactor?t.pannerAttr.rolloffFactor:s._rolloffFactor,panningModel:void 0!==t.pannerAttr.panningModel?t.pannerAttr.panningModel:s._panningModel})}else 2===r.length&&(t=r[0],i=parseInt(r[1],10));for(var a=s._getSoundIds(i),o=0;o<a.length;o++)if(n=s._soundById(a[o])){var l=n._pannerAttr;l={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:l.coneInnerAngle,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:l.coneOuterAngle,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:l.coneOuterGain,distanceModel:void 0!==t.distanceModel?t.distanceModel:l.distanceModel,maxDistance:void 0!==t.maxDistance?t.maxDistance:l.maxDistance,refDistance:void 0!==t.refDistance?t.refDistance:l.refDistance,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:l.rolloffFactor,panningModel:void 0!==t.panningModel?t.panningModel:l.panningModel};var c=n._panner;c||(n._pos||(n._pos=s._pos||[0,0,-.5]),e(n,"spatial"),c=n._panner),c.coneInnerAngle=l.coneInnerAngle,c.coneOuterAngle=l.coneOuterAngle,c.coneOuterGain=l.coneOuterGain,c.distanceModel=l.distanceModel,c.maxDistance=l.maxDistance,c.refDistance=l.refDistance,c.rolloffFactor=l.rolloffFactor,c.panningModel=l.panningModel}return s},Sound.prototype.init=function(t){return function(){var e=this,i=e._parent;e._orientation=i._orientation,e._stereo=i._stereo,e._pos=i._pos,e._pannerAttr=i._pannerAttr,t.call(this),e._stereo?i.stereo(e._stereo):e._pos&&i.pos(e._pos[0],e._pos[1],e._pos[2],e._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var e=this,i=e._parent;return e._orientation=i._orientation,e._stereo=i._stereo,e._pos=i._pos,e._pannerAttr=i._pannerAttr,e._stereo?i.stereo(e._stereo):e._pos?i.pos(e._pos[0],e._pos[1],e._pos[2],e._id):e._panner&&(e._panner.disconnect(0),e._panner=void 0,i._refreshBuffer(e)),t.call(this)}}(Sound.prototype.reset);var e=function(t,e){"spatial"===(e=e||"spatial")?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,void 0!==t._panner.positionX?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),void 0!==t._panner.orientationX?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}}()},6411:(t,e,i)=>{var n;!function(s,r){if(s){for(var a,o={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},l={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},c={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},d={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},h=1;h<20;++h)o[111+h]="f"+h;for(h=0;h<=9;++h)o[h+96]=h.toString();b.prototype.bind=function(t,e,i){var n=this;return t=t instanceof Array?t:[t],n._bindMultiple.call(n,t,e,i),n},b.prototype.unbind=function(t,e){return this.bind.call(this,t,(function(){}),e)},b.prototype.trigger=function(t,e){var i=this;return i._directMap[t+":"+e]&&i._directMap[t+":"+e]({},t),i},b.prototype.reset=function(){var t=this;return t._callbacks={},t._directMap={},t},b.prototype.stopCallback=function(t,e){if((" "+e.className+" ").indexOf(" mousetrap ")>-1)return!1;if(v(e,this.target))return!1;if("composedPath"in t&&"function"==typeof t.composedPath){var i=t.composedPath()[0];i!==t.target&&(e=i)}return"INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||e.isContentEditable},b.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},b.addKeycodes=function(t){for(var e in t)t.hasOwnProperty(e)&&(o[e]=t[e]);a=null},b.init=function(){var t=b(r);for(var e in t)"_"!==e.charAt(0)&&(b[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e))},b.init(),s.Mousetrap=b,t.exports&&(t.exports=b),void 0===(n=function(){return b}.call(e,i,e,t))||(t.exports=n)}function u(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent("on"+e,i)}function p(t){if("keypress"==t.type){var e=String.fromCharCode(t.which);return t.shiftKey||(e=e.toLowerCase()),e}return o[t.which]?o[t.which]:l[t.which]?l[t.which]:String.fromCharCode(t.which).toLowerCase()}function f(t){return"shift"==t||"ctrl"==t||"alt"==t||"meta"==t}function g(t,e,i){return i||(i=function(){if(!a)for(var t in a={},o)t>95&&t<112||o.hasOwnProperty(t)&&(a[o[t]]=t);return a}()[t]?"keydown":"keypress"),"keypress"==i&&e.length&&(i="keydown"),i}function m(t,e){var i,n,s,r=[];for(i=function(t){return"+"===t?["+"]:(t=t.replace(/\+{2}/g,"+plus")).split("+")}(t),s=0;s<i.length;++s)n=i[s],d[n]&&(n=d[n]),e&&"keypress"!=e&&c[n]&&(n=c[n],r.push("shift")),f(n)&&r.push(n);return{key:n,modifiers:r,action:e=g(n,r,e)}}function v(t,e){return null!==t&&t!==r&&(t===e||v(t.parentNode,e))}function b(t){var e=this;if(t=t||r,!(e instanceof b))return new b(t);e.target=t,e._callbacks={},e._directMap={};var i,n={},s=!1,a=!1,o=!1;function l(t){t=t||{};var e,i=!1;for(e in n)t[e]?i=!0:n[e]=0;i||(o=!1)}function c(t,i,s,r,a,o){var l,c,d,h,u=[],p=s.type;if(!e._callbacks[t])return[];for("keyup"==p&&f(t)&&(i=[t]),l=0;l<e._callbacks[t].length;++l)if(c=e._callbacks[t][l],(r||!c.seq||n[c.seq]==c.level)&&p==c.action&&("keypress"==p&&!s.metaKey&&!s.ctrlKey||(d=i,h=c.modifiers,d.sort().join(",")===h.sort().join(",")))){var g=!r&&c.combo==a,m=r&&c.seq==r&&c.level==o;(g||m)&&e._callbacks[t].splice(l,1),u.push(c)}return u}function d(t,i,n,s){e.stopCallback(i,i.target||i.srcElement,n,s)||!1===t(i,n)&&(function(t){t.preventDefault?t.preventDefault():t.returnValue=!1}(i),function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}(i))}function h(t){"number"!=typeof t.which&&(t.which=t.keyCode);var i=p(t);i&&("keyup"!=t.type||s!==i?e.handleKey(i,function(t){var e=[];return t.shiftKey&&e.push("shift"),t.altKey&&e.push("alt"),t.ctrlKey&&e.push("ctrl"),t.metaKey&&e.push("meta"),e}(t),t):s=!1)}function g(t,r,a,h,u){e._directMap[t+":"+a]=r;var f,v=(t=t.replace(/\s+/g," ")).split(" ");v.length>1?function(t,e,r,a){function c(e){return function(){o=e,++n[t],clearTimeout(i),i=setTimeout(l,1e3)}}function h(e){d(r,e,t),"keyup"!==a&&(s=p(e)),setTimeout(l,10)}n[t]=0;for(var u=0;u<e.length;++u){var f=u+1===e.length?h:c(a||m(e[u+1]).action);g(e[u],f,a,t,u)}}(t,v,r,a):(f=m(t,a),e._callbacks[f.key]=e._callbacks[f.key]||[],c(f.key,f.modifiers,{type:f.action},h,t,u),e._callbacks[f.key][h?"unshift":"push"]({callback:r,modifiers:f.modifiers,action:f.action,seq:h,level:u,combo:t}))}e._handleKey=function(t,e,i){var n,s=c(t,e,i),r={},h=0,u=!1;for(n=0;n<s.length;++n)s[n].seq&&(h=Math.max(h,s[n].level));for(n=0;n<s.length;++n)if(s[n].seq){if(s[n].level!=h)continue;u=!0,r[s[n].seq]=1,d(s[n].callback,i,s[n].combo,s[n].seq)}else u||d(s[n].callback,i,s[n].combo);var p="keypress"==i.type&&a;i.type!=o||f(t)||p||l(r),a=u&&"keydown"==i.type},e._bindMultiple=function(t,e,i){for(var n=0;n<t.length;++n)g(t[n],e,i)},u(t,"keypress",h),u(t,"keydown",h),u(t,"keyup",h)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},6254:function(t){t.exports=function(){function t(t,e){var i=window.matchMedia(t);e(i.matches);var n=function(){return e(i.matches)};return i.addListener(n),function(){return i.removeListener(n)}}function e(t,e){return r[t]!==e&&(r[t]=e,o(t,e),!0)}var i="undefined"!=typeof navigator&&"undefined"!=typeof window;if(i&&"undefined"!=typeof nw)try{nw.Window.get()}catch(t){i=!1}var n=!i,s=i?navigator.userAgent:void 0,r={gui:i,terminal:n,registerQuery:t};r.node="undefined"!=typeof process&&!!process.versions&&!!process.versions.node,r.pwa=r.gui&&window.matchMedia("(display-mode: standalone)").matches&&null!==document.head.querySelector('[rel="manifest"]'),r.uwp="undefined"!=typeof Windows&&"undefined"!=typeof MSApp,r.nwjs=!(!r.node||!process.versions.nw),r.electron=!(!r.node||!process.versions.electron),r.cordova=!(!r.gui||!window.cordova),r.packaged=r.uwp||r.nwjs||r.electron||r.cordova,r.web=!r.node&&!r.packaged,r.browser=r.web,r.website=r.web&&!r.pwa,r.worker=!r.gui&&"undefined"!=typeof self&&void 0!==self.importScripts,r.serviceWorker=r.worker&&!!navigator.serviceWorker.controller||!1,r.android=!!r.gui&&s.includes("Android"),r.chromeos=!!r.gui&&s.includes("CrOS"),r.tizen=!!r.gui&&s.includes("Tizen"),r.ios=r.gui&&/iPad|iPhone|iPod/.test(s)&&!window.MSStream||!1,r.linuxBased=r.android||r.tizen,r.windows=r.node?"win32"===process.platform:s.includes("Windows"),r.macos=r.node?"darwin"===process.platform:s.includes("Macintosh"),r.linux=r.node?"linux"===process.platform:s.includes("Linux")&&!r.linuxBased&&!r.macos,r.edgeHtml=r.gui&&s.includes("Edge/"),r.edgeChromium=r.gui&&s.includes("Edg/"),r.edgeAndroid=r.gui&&s.includes("EdgA/"),r.edgeIos=r.gui&&s.includes("EdgiOS/"),r.chromeIos=r.gui&&s.includes("CriOS/"),r.firefoxIos=r.gui&&s.includes("FxiOS/"),r.edge=r.edgeHtml||r.edgeChromium||r.edgeAndroid||r.edgeIos,r.samsungBrowser=r.gui&&s.includes("SamsungBrowser/"),r.opera=r.gui&&(s.includes("Opera")||s.includes("OPR/")),r.firefox=r.gui&&(s.includes("Firefox")||r.firefoxIos),r.chrome=r.gui&&(s.includes("Chrome")||r.chromeIos)&&!r.edge&&!r.opera&&!r.samsungBrowser,r.safari=r.gui&&s.includes("Safari")&&!r.chrome&&!r.edge&&!r.firefox&&!r.opera&&!r.samsungBrowser||r.edgeIos||r.chromeIos||r.firefoxIos,r.ie=r.trident=r.gui&&s.includes("Trident"),r.blink=r.chrome&&!r.chromeIos||r.edgeChromium||r.edgeAndroid||r.samsungBrowser,r.webkit=r.blink||r.safari,r.gecko=r.firefox&&!r.firefoxIos&&!r.webkit&&!r.safari;var a={};r.on=function(t,e){a[t]=a[t]||new Set,a[t].add(e)},r.off=r.removeListener=function(t,e){a[t]&&a[t].delete(e)};var o=r.emit=function(t,e){a[t]&&a[t].forEach((function(t){return t(e)}))};if(r.gui){r.pixelRatio=parseFloat(window.devicePixelRatio.toFixed(2)),r.gameconsole=s.includes("Xbox")||s.includes("PlayStation");var l=0;if(window.addEventListener("gamepadconnected",(function(t){return l++})),window.addEventListener("gamepaddisconnected",(function(t){return l--})),r.gameconsole)r.gamepad=!0,r.mouse=!0,r.touch=!1,r.tv=!0,r.battery=!1,r.phone=r.tablet=r.hybrid=r.laptop=r.desktop=!1,r.formfactor="gameconsole";else{var c=function(){e("tv","tv"===r.formfactor),e("phone","phone"===r.formfactor),e("tablet","tablet"===r.formfactor),e("hybrid","hybrid"===r.formfactor),e("laptop","laptop"===r.formfactor),e("desktop","desktop"===r.formfactor)},d=function(){var t=Math.min(window.screen.width,window.screen.height);return r.tv?"tv":r.touch&&t<600?"phone":r.touch&&!r.mouse?"tablet":r.touch&&r.mouse?"hybrid":r.battery?"laptop":"desktop"};r.touch=navigator.maxTouchPoints>0,r.tv=s.includes("TV"),l=navigator.getGamepads?Array.from(navigator.getGamepads()).filter((function(t){return null!=t})).length:0,r.gamepad=l>0,t("(orientation: portrait)",(function(t){r.portrait=t,r.landscape=!t,r.orientation=t?"portrait":"landscape",o("portrait",r.portrait),o("landscape",r.landscape),o("orientation",r.orientation)})),t("(any-pointer: coarse)",(function(t){e("touch",t),e("formfactor",d())&&c()})),t("(hover: hover)",(function(t){e("mouse",t),e("input",t?"mouse":"touch"),e("formfactor",d())&&c()}))}}return r.csp=r.uwp||!1,r.nwjs?r.dev="sdk"===process.versions["nw-flavor"]:r.electron?r.dev=process.execPath.replace(/\\/g,"/").includes("node_modules/electron/"):r.uwp?r.dev=Windows.ApplicationModel.Package.current.isDevelopmentMode:r.node?r.dev=!1:r.dev=void 0,r}()},7391:(t,e,i)=>{var n=i(7180),s=i(3181),r=i(3031),a=i(9067),o=i(6833),l=i(3717),c=i(4801);c.alea=n,c.xor128=s,c.xorwow=r,c.xorshift7=a,c.xor4096=o,c.tychei=l,t.exports=c},7180:function(t,e,i){var n;!function(t,s){function r(t){var e,i=this,n=(e=4022871197,function(t){t=String(t);for(var i=0;i<t.length;i++){var n=.02519603282416938*(e+=t.charCodeAt(i));n-=e=n>>>0,e=(n*=e)>>>0,e+=4294967296*(n-=e)}return 2.3283064365386963e-10*(e>>>0)});i.next=function(){var t=2091639*i.s0+2.3283064365386963e-10*i.c;return i.s0=i.s1,i.s1=i.s2,i.s2=t-(i.c=0|t)},i.c=1,i.s0=n(" "),i.s1=n(" "),i.s2=n(" "),i.s0-=n(t),i.s0<0&&(i.s0+=1),i.s1-=n(t),i.s1<0&&(i.s1+=1),i.s2-=n(t),i.s2<0&&(i.s2+=1),n=null}function a(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function o(t,e){var i=new r(t),n=e&&e.state,s=i.next;return s.int32=function(){return 4294967296*i.next()|0},s.double=function(){return s()+11102230246251565e-32*(2097152*s()|0)},s.quick=s,n&&("object"==typeof n&&a(n,i),s.state=function(){return a(i,{})}),s}s&&s.exports?s.exports=o:i.amdD&&i.amdO?void 0===(n=function(){return o}.call(e,i,e,s))||(s.exports=n):this.alea=o}(0,t=i.nmd(t),i.amdD)},3717:function(t,e,i){var n;!function(t,s){function r(t){var e=this,i="";e.next=function(){var t=e.b,i=e.c,n=e.d,s=e.a;return t=t<<25^t>>>7^i,i=i-n|0,n=n<<24^n>>>8^s,s=s-t|0,e.b=t=t<<20^t>>>12^i,e.c=i=i-n|0,e.d=n<<16^i>>>16^s,e.a=s-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):i+=t;for(var n=0;n<i.length+20;n++)e.b^=0|i.charCodeAt(n),e.next()}function a(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function o(t,e){var i=new r(t),n=e&&e.state,s=function(){return(i.next()>>>0)/4294967296};return s.double=function(){do{var t=((i.next()>>>11)+(i.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},s.int32=i.next,s.quick=s,n&&("object"==typeof n&&a(n,i),s.state=function(){return a(i,{})}),s}s&&s.exports?s.exports=o:i.amdD&&i.amdO?void 0===(n=function(){return o}.call(e,i,e,s))||(s.exports=n):this.tychei=o}(0,t=i.nmd(t),i.amdD)},3181:function(t,e,i){var n;!function(t,s){function r(t){var e=this,i="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:i+=t;for(var n=0;n<i.length+64;n++)e.x^=0|i.charCodeAt(n),e.next()}function a(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function o(t,e){var i=new r(t),n=e&&e.state,s=function(){return(i.next()>>>0)/4294967296};return s.double=function(){do{var t=((i.next()>>>11)+(i.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},s.int32=i.next,s.quick=s,n&&("object"==typeof n&&a(n,i),s.state=function(){return a(i,{})}),s}s&&s.exports?s.exports=o:i.amdD&&i.amdO?void 0===(n=function(){return o}.call(e,i,e,s))||(s.exports=n):this.xor128=o}(0,t=i.nmd(t),i.amdD)},6833:function(t,e,i){var n;!function(t,s){function r(t){var e=this;e.next=function(){var t,i,n=e.w,s=e.X,r=e.i;return e.w=n=n+1640531527|0,i=s[r+34&127],t=s[r=r+1&127],i^=i<<13,t^=t<<17,i^=i>>>15,t^=t>>>12,i=s[r]=i^t,e.i=r,i+(n^n>>>16)|0},function(t,e){var i,n,s,r,a,o=[],l=128;for(e===(0|e)?(n=e,e=null):(e+="\0",n=0,l=Math.max(l,e.length)),s=0,r=-32;r<l;++r)e&&(n^=e.charCodeAt((r+32)%e.length)),0===r&&(a=n),n^=n<<10,n^=n>>>15,n^=n<<4,n^=n>>>13,r>=0&&(a=a+1640531527|0,s=0==(i=o[127&r]^=n+a)?s+1:0);for(s>=128&&(o[127&(e&&e.length||0)]=-1),s=127,r=512;r>0;--r)n=o[s+34&127],i=o[s=s+1&127],n^=n<<13,i^=i<<17,n^=n>>>15,i^=i>>>12,o[s]=n^i;t.w=a,t.X=o,t.i=s}(e,t)}function a(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function o(t,e){null==t&&(t=+new Date);var i=new r(t),n=e&&e.state,s=function(){return(i.next()>>>0)/4294967296};return s.double=function(){do{var t=((i.next()>>>11)+(i.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},s.int32=i.next,s.quick=s,n&&(n.X&&a(n,i),s.state=function(){return a(i,{})}),s}s&&s.exports?s.exports=o:i.amdD&&i.amdO?void 0===(n=function(){return o}.call(e,i,e,s))||(s.exports=n):this.xor4096=o}(0,t=i.nmd(t),i.amdD)},9067:function(t,e,i){var n;!function(t,s){function r(t){var e=this;e.next=function(){var t,i,n=e.x,s=e.i;return t=n[s],i=(t^=t>>>7)^t<<24,i^=(t=n[s+1&7])^t>>>10,i^=(t=n[s+3&7])^t>>>3,i^=(t=n[s+4&7])^t<<7,t=n[s+7&7],i^=(t^=t<<13)^t<<9,n[s]=i,e.i=s+1&7,i},function(t,e){var i,n=[];if(e===(0|e))n[0]=e;else for(e=""+e,i=0;i<e.length;++i)n[7&i]=n[7&i]<<15^e.charCodeAt(i)+n[i+1&7]<<13;for(;n.length<8;)n.push(0);for(i=0;i<8&&0===n[i];++i);for(8==i?n[7]=-1:n[i],t.x=n,t.i=0,i=256;i>0;--i)t.next()}(e,t)}function a(t,e){return e.x=t.x.slice(),e.i=t.i,e}function o(t,e){null==t&&(t=+new Date);var i=new r(t),n=e&&e.state,s=function(){return(i.next()>>>0)/4294967296};return s.double=function(){do{var t=((i.next()>>>11)+(i.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},s.int32=i.next,s.quick=s,n&&(n.x&&a(n,i),s.state=function(){return a(i,{})}),s}s&&s.exports?s.exports=o:i.amdD&&i.amdO?void 0===(n=function(){return o}.call(e,i,e,s))||(s.exports=n):this.xorshift7=o}(0,t=i.nmd(t),i.amdD)},3031:function(t,e,i){var n;!function(t,s){function r(t){var e=this,i="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:i+=t;for(var n=0;n<i.length+64;n++)e.x^=0|i.charCodeAt(n),n==i.length&&(e.d=e.x<<10^e.x>>>4),e.next()}function a(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function o(t,e){var i=new r(t),n=e&&e.state,s=function(){return(i.next()>>>0)/4294967296};return s.double=function(){do{var t=((i.next()>>>11)+(i.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},s.int32=i.next,s.quick=s,n&&("object"==typeof n&&a(n,i),s.state=function(){return a(i,{})}),s}s&&s.exports?s.exports=o:i.amdD&&i.amdO?void 0===(n=function(){return o}.call(e,i,e,s))||(s.exports=n):this.xorwow=o}(0,t=i.nmd(t),i.amdD)},4801:function(t,e,i){var n;!function(s,r,a){var o,l=256,c=a.pow(l,6),d=a.pow(2,52),h=2*d,u=255;function p(t,e,i){var n=[],u=v(m((e=1==e?{entropy:!0}:e||{}).entropy?[t,b(r)]:null==t?function(){try{var t;return o&&(t=o.randomBytes)?t=t(l):(t=new Uint8Array(l),(s.crypto||s.msCrypto).getRandomValues(t)),b(t)}catch(t){var e=s.navigator,i=e&&e.plugins;return[+new Date,s,i,s.screen,b(r)]}}():t,3),n),p=new f(n),y=function(){for(var t=p.g(6),e=c,i=0;t<d;)t=(t+i)*l,e*=l,i=p.g(1);for(;t>=h;)t/=2,e/=2,i>>>=1;return(t+i)/e};return y.int32=function(){return 0|p.g(4)},y.quick=function(){return p.g(4)/4294967296},y.double=y,v(b(p.S),r),(e.pass||i||function(t,e,i,n){return n&&(n.S&&g(n,p),t.state=function(){return g(p,{})}),i?(a.random=t,e):t})(y,u,"global"in e?e.global:this==a,e.state)}function f(t){var e,i=t.length,n=this,s=0,r=n.i=n.j=0,a=n.S=[];for(i||(t=[i++]);s<l;)a[s]=s++;for(s=0;s<l;s++)a[s]=a[r=u&r+t[s%i]+(e=a[s])],a[r]=e;(n.g=function(t){for(var e,i=0,s=n.i,r=n.j,a=n.S;t--;)e=a[s=u&s+1],i=i*l+a[u&(a[s]=a[r=u&r+e])+(a[r]=e)];return n.i=s,n.j=r,i})(l)}function g(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function m(t,e){var i,n=[],s=typeof t;if(e&&"object"==s)for(i in t)try{n.push(m(t[i],e-1))}catch(t){}return n.length?n:"string"==s?t:t+"\0"}function v(t,e){for(var i,n=t+"",s=0;s<n.length;)e[u&s]=u&(i^=19*e[u&s])+n.charCodeAt(s++);return b(e)}function b(t){return String.fromCharCode.apply(0,t)}if(v(a.random(),r),t.exports){t.exports=p;try{o=i(1234)}catch(t){}}else void 0===(n=function(){return p}.call(e,i,e,t))||(t.exports=n)}("undefined"!=typeof self?self:this,[],Math)},1234:()=>{}},e={};function i(n){var s=e[n];if(void 0!==s)return s.exports;var r=e[n]={id:n,loaded:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.loaded=!0,r.exports}i.m=t,i.amdD=function(){throw new Error("define cannot be used indirect")},i.amdO={},i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.u=t=>t+".js",i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t;if("string"==typeof import.meta.url&&(t=import.meta.url),!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=t+"../"})(),i.b=document.baseURI||self.location.href;var n={};i.d(n,{LT:()=>xa});var s={};i.r(s),i.d(s,{run:()=>A});var r={};i.r(r),i.d(r,{run:()=>x});var a={};i.r(a),i.d(a,{run:()=>R});var o={};i.r(o),i.d(o,{run:()=>O});var l={};i.r(l),i.d(l,{run:()=>at});var c={};i.r(c),i.d(c,{run:()=>ce});var d={};i.r(d),i.d(d,{run:()=>fe});var h={};i.r(h),i.d(h,{run:()=>ve,setupButtons:()=>be,toggle:()=>ye});var u={};i.r(u),i.d(u,{run:()=>Ee});var p={};i.r(p),i.d(p,{run:()=>Re});var f={};i.r(f),i.d(f,{halt:()=>ze,run:()=>He});var g={};i.r(g),i.d(g,{run:()=>ea});var m={};i.r(m),i.d(m,{run:()=>ra});var v={};i.r(v),i.d(v,{run:()=>ca,toggle:()=>da});var b={};i.r(b),i.d(b,{launchPlayer:()=>fa,run:()=>pa});var y=i(8097),_=i(4113),w=i(173);function A(){_.appInstance().on("item:load",(function(){for(var t=w.totalItems(),e=Array.from(document.getElementsByClassName("item-prev")),i=Array.from(document.getElementsByClassName("item-next")),n=e.concat(i),s=0;s<n.length;s++){var r=n[s].getAttribute("aria-label");n[s].setAttribute("aria-live",r+" of "+t)}}))}function x(){_.appInstance().on("item:load",(function(t){E()})),_.annotationsApp().on("notepad:toggleVisibility",(function(t){E()})),_.annotationsApp().on("stickynote:add",(function(t){E()}))}function E(){for(var t,e=[],i=["lrn_texteditor_editable"],n=document.getElementById("learnosity_assess"),s=0;s<i.length;s++)if((e=n.getElementsByClassName(i[s])).length)for(var r=0;r<e.length;r++)S(e[r]);t=n.getElementsByTagName("textarea");for(var a=0;a<t.length;a++)S(t[a])}function S(t){t.setAttribute("data-gramm","false"),t.setAttribute("data-gramm_editor","false"),t.setAttribute("data-enable-grammarly","false"),t.setAttribute("spellcheck","false"),t.setAttribute("autocorrect","false"),t.setAttribute("autocomplete","false"),t.setAttribute("autocapitalize","false")}var T=i(3963),C=i(5059),k=i(77);function M(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(t){if("string"==typeof t)return I(t,e);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?I(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,s=function(){};return{s,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,o=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return a=t.done,t},e:function(t){o=!0,r=t},f:function(){try{a||null==i.return||i.return()}finally{if(o)throw r}}}}function I(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=Array(e);i<e;i++)n[i]=t[i];return n}var L="ERROR",P={message:{header:"Please check your answers",body:'<p>Before moving on, attempt all questions and click the "Check Answer" button.</p>\n            <p>Note: the "Check Answer" button may not appear on every question.</p>'}};function R(t){var e,i;t&&null!=t&&t.message&&(null!==(e=P.message)&&void 0!==e&&e.header.length&&(P.message.header=t.message.header),null!==(i=P.message)&&void 0!==i&&i.body.length&&(P.message.body=t.message.body)),_.appInstance().on("item:beforeunload",(function(t){!function(t){(function(){var t,e=!1,i=M(T.questions());try{for(i.s();!(t=i.n()).done;){var n=t.value.response_id;if(T.hasCheckAnswer(n)){e=!0;break}}}catch(t){i.e(t)}finally{i.f()}return e})()&&(function(){var t,e=M(T.questions());try{for(e.s();!(t=e.n()).done;){var i=t.value.response_id;if(T.hasCheckAnswer(i)&&(!T.questionResponse(i)||!T.questionResponse(i).hasOwnProperty("feedbackAttemptsCount")))return!1}}catch(t){e.e(t)}finally{e.f()}return!0}()||(C.A.debug("Disabling navigation.",L),t.preventDefault(),(0,k.dialog)({header:P.message.header,body:P.message.body,buttons:[{button_id:"lt__check_answer_validation",label:"Close",is_primary:!1}]}),_.assessApp().on("button:lt__check_answer_validation:clicked",(function(){(0,k.hideDialog)()}))))}(t)}))}var D=i(7518),F={renderedCss:!1,resize:{triggered:!1}};function O(){var t;F.renderedCss||((t=document.createElement("style")).textContent="\n/* Learnosity column resizer styles */\n.lrn-resizer {\n    background-color: #e8e8e8;\n    cursor: grab;\n    width: 3px;\n    padding: 0;\n    position: relative;\n}\n.lrn-resizer span {\n    position: relative;\n    width: 45px;\n    height: 30px;\n    border: 1px solid #e4e4e4;\n    left: -22px;\n    border-radius: 3px;\n    cursor: grab;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 1.5em;\n    z-index: 2;\n    padding-bottom: 3px;\n    color: #444;\n\n    -webkit-user-select: none;\n    user-select: none;\n\n    background: rgb(233,233,233);\n    background: linear-gradient(0deg, rgba(233,233,233,1) 0%, rgba(250,250,250,1) 51%, rgba(238,238,238,1) 100%);\n}\n.row {\n    display: flex;\n}\n.col-xs-6.lrn-column-left {\n    display: flex;\n    min-width: 5em;\n    overflow: hidden;\n}\n.col-xs-6.lrn-column-right {\n    display: flex;\n\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    min-width: 5em;\n    overflow: hidden;\n}\n.lrn-column-left .lrn_widget,\n.lrn-column-right .lrn_widget {\n    padding: 1.5em;\n}\n@media (max-width: 650px) {\n    .lrn-resizer {\n        display: none;\n    }\n}\n",document.head.append(t),F.renderedCss=!0),_.appInstance().on("item:load",(function(){N()})),window.addEventListener("resize",function(t){var e,i=this;return F.resize.triggered||(F.resize.triggered=!0,t.apply(this)),function(){for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];clearTimeout(e),e=setTimeout((function(){F.resize.triggered=!1,t.apply(i,s)}),250)}}(N))}function N(){var t=D.itemElement(),e=t.querySelectorAll('[class^="col-"]'),i=Boolean(t.querySelector(".lrn-resizer")),n=Boolean(document.querySelector(".lrn-layout-single-column"));if(2===e.length){if(n||i)n&&i&&function(t,e){var i=t.querySelector(".lrn-resizer");i&&i.remove(),e[0].removeAttribute("style"),window.dispatchEvent(new Event("resize"))}(t,e);else{var s=document.createElement("div");s.setAttribute("tooltip","Click and hold to drag column width");var r=document.createElement("span");r.innerHTML="↤ ↦",s.classList.add("lrn-resizer"),e[0].classList.add("lrn-column-left"),e[1].classList.add("lrn-column-right"),s.append(r),e[0].after(s)}!function(t){var e=t.querySelector(".lrn-resizer");e&&function(t){var e=t.previousElementSibling,i=0,n=0,s=function(t){i=t instanceof MouseEvent?t.clientX:t.targetTouches[0].clientX;var s=e.getBoundingClientRect();n=s.width,document.addEventListener("mousemove",r),document.addEventListener("mouseup",a),document.addEventListener("touchmove",r),document.addEventListener("touchend",a)},r=function(s){var r;r=s instanceof MouseEvent?s.clientX-i:s.targetTouches[0].clientX-i;var a=100*(n+r)/t.parentNode.getBoundingClientRect().width;a>=10&&a<=90&&(e.style.width=a+"%")},a=function(){document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",a),document.removeEventListener("touchmove",r),document.removeEventListener("touchend",a)};t.addEventListener("mousedown",s),t.addEventListener("touchstart",s)}(e)}(t)}}const B=new Uint16Array('ᵁ<Õıʊҝջאٵ۞ޢߖࠏ੊ઑඡ๭༉༦჊ረዡᐕᒝᓃᓟᔥ\0\0\0\0\0\0ᕫᛍᦍᰒᷝ὾⁠↰⊍⏀⏻⑂⠤⤒ⴈ⹈⿎〖㊺㘹㞬㣾㨨㩱㫠㬮ࠀEMabcfglmnoprstu\\bfms¦³¹ÈÏlig耻Æ䃆P耻&䀦cute耻Á䃁reve;䄂Āiyx}rc耻Â䃂;䐐r;쀀𝔄rave耻À䃀pha;䎑acr;䄀d;橓Āgp¡on;䄄f;쀀𝔸plyFunction;恡ing耻Å䃅Ācs¾Ãr;쀀𝒜ign;扔ilde耻Ã䃃ml耻Ä䃄ЀaceforsuåûþėĜĢħĪĀcrêòkslash;或Ŷöø;櫧ed;挆y;䐑ƀcrtąċĔause;戵noullis;愬a;䎒r;쀀𝔅pf;쀀𝔹eve;䋘còēmpeq;扎܀HOacdefhilorsuōőŖƀƞƢƵƷƺǜȕɳɸɾcy;䐧PY耻©䂩ƀcpyŝŢźute;䄆Ā;iŧŨ拒talDifferentialD;慅leys;愭ȀaeioƉƎƔƘron;䄌dil耻Ç䃇rc;䄈nint;戰ot;䄊ĀdnƧƭilla;䂸terDot;䂷òſi;䎧rcleȀDMPTǇǋǑǖot;抙inus;抖lus;投imes;抗oĀcsǢǸkwiseContourIntegral;戲eCurlyĀDQȃȏoubleQuote;思uote;怙ȀlnpuȞȨɇɕonĀ;eȥȦ户;橴ƀgitȯȶȺruent;扡nt;戯ourIntegral;戮ĀfrɌɎ;愂oduct;成nterClockwiseContourIntegral;戳oss;樯cr;쀀𝒞pĀ;Cʄʅ拓ap;才րDJSZacefiosʠʬʰʴʸˋ˗ˡ˦̳ҍĀ;oŹʥtrahd;椑cy;䐂cy;䐅cy;䐏ƀgrsʿ˄ˇger;怡r;憡hv;櫤Āayː˕ron;䄎;䐔lĀ;t˝˞戇a;䎔r;쀀𝔇Āaf˫̧Ācm˰̢riticalȀADGT̖̜̀̆cute;䂴oŴ̋̍;䋙bleAcute;䋝rave;䁠ilde;䋜ond;拄ferentialD;慆Ѱ̽\0\0\0͔͂\0Ѕf;쀀𝔻ƀ;DE͈͉͍䂨ot;惜qual;扐blèCDLRUVͣͲ΂ϏϢϸontourIntegraìȹoɴ͹\0\0ͻ»͉nArrow;懓Āeo·ΤftƀARTΐΖΡrrow;懐ightArrow;懔eåˊngĀLRΫτeftĀARγιrrow;柸ightArrow;柺ightArrow;柹ightĀATϘϞrrow;懒ee;抨pɁϩ\0\0ϯrrow;懑ownArrow;懕erticalBar;戥ǹABLRTaВЪаўѿͼrrowƀ;BUНОТ憓ar;椓pArrow;懵reve;䌑eft˒к\0ц\0ѐightVector;楐eeVector;楞ectorĀ;Bљњ憽ar;楖ightǔѧ\0ѱeeVector;楟ectorĀ;BѺѻ懁ar;楗eeĀ;A҆҇护rrow;憧ĀctҒҗr;쀀𝒟rok;䄐ࠀNTacdfglmopqstuxҽӀӄӋӞӢӧӮӵԡԯԶՒ՝ՠեG;䅊H耻Ð䃐cute耻É䃉ƀaiyӒӗӜron;䄚rc耻Ê䃊;䐭ot;䄖r;쀀𝔈rave耻È䃈ement;戈ĀapӺӾcr;䄒tyɓԆ\0\0ԒmallSquare;旻erySmallSquare;斫ĀgpԦԪon;䄘f;쀀𝔼silon;䎕uĀaiԼՉlĀ;TՂՃ橵ilde;扂librium;懌Āci՗՚r;愰m;橳a;䎗ml耻Ë䃋Āipժկsts;戃onentialE;慇ʀcfiosօֈ֍ֲ׌y;䐤r;쀀𝔉lledɓ֗\0\0֣mallSquare;旼erySmallSquare;斪Ͱֺ\0ֿ\0\0ׄf;쀀𝔽All;戀riertrf;愱cò׋؀JTabcdfgorstר׬ׯ׺؀ؒؖ؛؝أ٬ٲcy;䐃耻>䀾mmaĀ;d׷׸䎓;䏜reve;䄞ƀeiy؇،ؐdil;䄢rc;䄜;䐓ot;䄠r;쀀𝔊;拙pf;쀀𝔾eater̀EFGLSTصلَٖٛ٦qualĀ;Lؾؿ扥ess;招ullEqual;执reater;檢ess;扷lantEqual;橾ilde;扳cr;쀀𝒢;扫ЀAacfiosuڅڋږڛڞڪھۊRDcy;䐪Āctڐڔek;䋇;䁞irc;䄤r;愌lbertSpace;愋ǰگ\0ڲf;愍izontalLine;攀Āctۃۅòکrok;䄦mpńېۘownHumðįqual;扏܀EJOacdfgmnostuۺ۾܃܇܎ܚܞܡܨ݄ݸދޏޕcy;䐕lig;䄲cy;䐁cute耻Í䃍Āiyܓܘrc耻Î䃎;䐘ot;䄰r;愑rave耻Ì䃌ƀ;apܠܯܿĀcgܴܷr;䄪inaryI;慈lieóϝǴ݉\0ݢĀ;eݍݎ戬Āgrݓݘral;戫section;拂isibleĀCTݬݲomma;恣imes;恢ƀgptݿރވon;䄮f;쀀𝕀a;䎙cr;愐ilde;䄨ǫޚ\0ޞcy;䐆l耻Ï䃏ʀcfosuެ޷޼߂ߐĀiyޱ޵rc;䄴;䐙r;쀀𝔍pf;쀀𝕁ǣ߇\0ߌr;쀀𝒥rcy;䐈kcy;䐄΀HJacfosߤߨ߽߬߱ࠂࠈcy;䐥cy;䐌ppa;䎚Āey߶߻dil;䄶;䐚r;쀀𝔎pf;쀀𝕂cr;쀀𝒦րJTaceflmostࠥࠩࠬࡐࡣ঳সে্਷ੇcy;䐉耻<䀼ʀcmnpr࠷࠼ࡁࡄࡍute;䄹bda;䎛g;柪lacetrf;愒r;憞ƀaeyࡗ࡜ࡡron;䄽dil;䄻;䐛Āfsࡨ॰tԀACDFRTUVarࡾࢩࢱࣦ࣠ࣼयज़ΐ४Ānrࢃ࢏gleBracket;柨rowƀ;BR࢙࢚࢞憐ar;懤ightArrow;懆eiling;挈oǵࢷ\0ࣃbleBracket;柦nǔࣈ\0࣒eeVector;楡ectorĀ;Bࣛࣜ懃ar;楙loor;挊ightĀAV࣯ࣵrrow;憔ector;楎Āerँगeƀ;AVउऊऐ抣rrow;憤ector;楚iangleƀ;BEतथऩ抲ar;槏qual;抴pƀDTVषूौownVector;楑eeVector;楠ectorĀ;Bॖॗ憿ar;楘ectorĀ;B॥०憼ar;楒ightáΜs̀EFGLSTॾঋকঝঢভqualGreater;拚ullEqual;扦reater;扶ess;檡lantEqual;橽ilde;扲r;쀀𝔏Ā;eঽা拘ftarrow;懚idot;䄿ƀnpw৔ਖਛgȀLRlr৞৷ਂਐeftĀAR০৬rrow;柵ightArrow;柷ightArrow;柶eftĀarγਊightáοightáϊf;쀀𝕃erĀLRਢਬeftArrow;憙ightArrow;憘ƀchtਾੀੂòࡌ;憰rok;䅁;扪Ѐacefiosuਗ਼੝੠੷੼અઋ઎p;椅y;䐜Ādl੥੯iumSpace;恟lintrf;愳r;쀀𝔐nusPlus;戓pf;쀀𝕄cò੶;䎜ҀJacefostuણધભીଔଙඑ඗ඞcy;䐊cute;䅃ƀaey઴હાron;䅇dil;䅅;䐝ƀgswે૰଎ativeƀMTV૓૟૨ediumSpace;怋hiĀcn૦૘ë૙eryThiî૙tedĀGL૸ଆreaterGreateòٳessLesóੈLine;䀊r;쀀𝔑ȀBnptଢନଷ଺reak;恠BreakingSpace;䂠f;愕ڀ;CDEGHLNPRSTV୕ୖ୪୼஡௫ఄ౞಄ದ೘ൡඅ櫬Āou୛୤ngruent;扢pCap;扭oubleVerticalBar;戦ƀlqxஃஊ஛ement;戉ualĀ;Tஒஓ扠ilde;쀀≂̸ists;戄reater΀;EFGLSTஶஷ஽௉௓௘௥扯qual;扱ullEqual;쀀≧̸reater;쀀≫̸ess;批lantEqual;쀀⩾̸ilde;扵umpń௲௽ownHump;쀀≎̸qual;쀀≏̸eĀfsఊధtTriangleƀ;BEచఛడ拪ar;쀀⧏̸qual;括s̀;EGLSTవశ఼ౄోౘ扮qual;扰reater;扸ess;쀀≪̸lantEqual;쀀⩽̸ilde;扴estedĀGL౨౹reaterGreater;쀀⪢̸essLess;쀀⪡̸recedesƀ;ESಒಓಛ技qual;쀀⪯̸lantEqual;拠ĀeiಫಹverseElement;戌ghtTriangleƀ;BEೋೌ೒拫ar;쀀⧐̸qual;拭ĀquೝഌuareSuĀbp೨೹setĀ;E೰ೳ쀀⊏̸qual;拢ersetĀ;Eഃആ쀀⊐̸qual;拣ƀbcpഓതൎsetĀ;Eഛഞ쀀⊂⃒qual;抈ceedsȀ;ESTലള഻െ抁qual;쀀⪰̸lantEqual;拡ilde;쀀≿̸ersetĀ;E൘൛쀀⊃⃒qual;抉ildeȀ;EFT൮൯൵ൿ扁qual;扄ullEqual;扇ilde;扉erticalBar;戤cr;쀀𝒩ilde耻Ñ䃑;䎝܀Eacdfgmoprstuvලෂ෉෕ෛ෠෧෼ขภยา฿ไlig;䅒cute耻Ó䃓Āiy෎ීrc耻Ô䃔;䐞blac;䅐r;쀀𝔒rave耻Ò䃒ƀaei෮ෲ෶cr;䅌ga;䎩cron;䎟pf;쀀𝕆enCurlyĀDQฎบoubleQuote;怜uote;怘;橔Āclวฬr;쀀𝒪ash耻Ø䃘iŬื฼de耻Õ䃕es;樷ml耻Ö䃖erĀBP๋๠Āar๐๓r;怾acĀek๚๜;揞et;掴arenthesis;揜Ҁacfhilors๿ງຊຏຒດຝະ໼rtialD;戂y;䐟r;쀀𝔓i;䎦;䎠usMinus;䂱Āipຢອncareplanåڝf;愙Ȁ;eio຺ູ໠໤檻cedesȀ;EST່້໏໚扺qual;檯lantEqual;扼ilde;找me;怳Ādp໩໮uct;戏ortionĀ;aȥ໹l;戝Āci༁༆r;쀀𝒫;䎨ȀUfos༑༖༛༟OT耻"䀢r;쀀𝔔pf;愚cr;쀀𝒬؀BEacefhiorsu༾གྷཇའཱིྦྷྪྭ႖ႩႴႾarr;椐G耻®䂮ƀcnrཎནབute;䅔g;柫rĀ;tཛྷཝ憠l;椖ƀaeyཧཬཱron;䅘dil;䅖;䐠Ā;vླྀཹ愜erseĀEUྂྙĀlq྇ྎement;戋uilibrium;懋pEquilibrium;楯r»ཹo;䎡ghtЀACDFTUVa࿁࿫࿳ဢဨၛႇϘĀnr࿆࿒gleBracket;柩rowƀ;BL࿜࿝࿡憒ar;懥eftArrow;懄eiling;按oǵ࿹\0စbleBracket;柧nǔည\0နeeVector;楝ectorĀ;Bဝသ懂ar;楕loor;挋Āerိ၃eƀ;AVဵံြ抢rrow;憦ector;楛iangleƀ;BEၐၑၕ抳ar;槐qual;抵pƀDTVၣၮၸownVector;楏eeVector;楜ectorĀ;Bႂႃ憾ar;楔ectorĀ;B႑႒懀ar;楓Āpuႛ႞f;愝ndImplies;楰ightarrow;懛ĀchႹႼr;愛;憱leDelayed;槴ڀHOacfhimoqstuფჱჷჽᄙᄞᅑᅖᅡᅧᆵᆻᆿĀCcჩხHcy;䐩y;䐨FTcy;䐬cute;䅚ʀ;aeiyᄈᄉᄎᄓᄗ檼ron;䅠dil;䅞rc;䅜;䐡r;쀀𝔖ortȀDLRUᄪᄴᄾᅉownArrow»ОeftArrow»࢚ightArrow»࿝pArrow;憑gma;䎣allCircle;战pf;쀀𝕊ɲᅭ\0\0ᅰt;戚areȀ;ISUᅻᅼᆉᆯ斡ntersection;抓uĀbpᆏᆞsetĀ;Eᆗᆘ抏qual;抑ersetĀ;Eᆨᆩ抐qual;抒nion;抔cr;쀀𝒮ar;拆ȀbcmpᇈᇛሉላĀ;sᇍᇎ拐etĀ;Eᇍᇕqual;抆ĀchᇠህeedsȀ;ESTᇭᇮᇴᇿ扻qual;檰lantEqual;扽ilde;承Tháྌ;我ƀ;esሒሓሣ拑rsetĀ;Eሜም抃qual;抇et»ሓրHRSacfhiorsሾቄ቉ቕ቞ቱቶኟዂወዑORN耻Þ䃞ADE;愢ĀHc቎ቒcy;䐋y;䐦Ābuቚቜ;䀉;䎤ƀaeyብቪቯron;䅤dil;䅢;䐢r;쀀𝔗Āeiቻ኉ǲኀ\0ኇefore;戴a;䎘Ācn኎ኘkSpace;쀀  Space;怉ldeȀ;EFTካኬኲኼ戼qual;扃ullEqual;扅ilde;扈pf;쀀𝕋ipleDot;惛Āctዖዛr;쀀𝒯rok;䅦ૡዷጎጚጦ\0ጬጱ\0\0\0\0\0ጸጽ፷ᎅ\0᏿ᐄᐊᐐĀcrዻጁute耻Ú䃚rĀ;oጇገ憟cir;楉rǣጓ\0጖y;䐎ve;䅬Āiyጞጣrc耻Û䃛;䐣blac;䅰r;쀀𝔘rave耻Ù䃙acr;䅪Ādiፁ፩erĀBPፈ፝Āarፍፐr;䁟acĀekፗፙ;揟et;掵arenthesis;揝onĀ;P፰፱拃lus;抎Āgp፻፿on;䅲f;쀀𝕌ЀADETadps᎕ᎮᎸᏄϨᏒᏗᏳrrowƀ;BDᅐᎠᎤar;椒ownArrow;懅ownArrow;憕quilibrium;楮eeĀ;AᏋᏌ报rrow;憥ownáϳerĀLRᏞᏨeftArrow;憖ightArrow;憗iĀ;lᏹᏺ䏒on;䎥ing;䅮cr;쀀𝒰ilde;䅨ml耻Ü䃜ҀDbcdefosvᐧᐬᐰᐳᐾᒅᒊᒐᒖash;披ar;櫫y;䐒ashĀ;lᐻᐼ抩;櫦Āerᑃᑅ;拁ƀbtyᑌᑐᑺar;怖Ā;iᑏᑕcalȀBLSTᑡᑥᑪᑴar;戣ine;䁼eparator;杘ilde;所ThinSpace;怊r;쀀𝔙pf;쀀𝕍cr;쀀𝒱dash;抪ʀcefosᒧᒬᒱᒶᒼirc;䅴dge;拀r;쀀𝔚pf;쀀𝕎cr;쀀𝒲Ȁfiosᓋᓐᓒᓘr;쀀𝔛;䎞pf;쀀𝕏cr;쀀𝒳ҀAIUacfosuᓱᓵᓹᓽᔄᔏᔔᔚᔠcy;䐯cy;䐇cy;䐮cute耻Ý䃝Āiyᔉᔍrc;䅶;䐫r;쀀𝔜pf;쀀𝕐cr;쀀𝒴ml;䅸ЀHacdefosᔵᔹᔿᕋᕏᕝᕠᕤcy;䐖cute;䅹Āayᕄᕉron;䅽;䐗ot;䅻ǲᕔ\0ᕛoWidtè૙a;䎖r;愨pf;愤cr;쀀𝒵௡ᖃᖊᖐ\0ᖰᖶᖿ\0\0\0\0ᗆᗛᗫᙟ᙭\0ᚕ᚛ᚲᚹ\0ᚾcute耻á䃡reve;䄃̀;Ediuyᖜᖝᖡᖣᖨᖭ戾;쀀∾̳;房rc耻â䃢te肻´̆;䐰lig耻æ䃦Ā;r²ᖺ;쀀𝔞rave耻à䃠ĀepᗊᗖĀfpᗏᗔsym;愵èᗓha;䎱ĀapᗟcĀclᗤᗧr;䄁g;樿ɤᗰ\0\0ᘊʀ;adsvᗺᗻᗿᘁᘇ戧nd;橕;橜lope;橘;橚΀;elmrszᘘᘙᘛᘞᘿᙏᙙ戠;榤e»ᘙsdĀ;aᘥᘦ戡ѡᘰᘲᘴᘶᘸᘺᘼᘾ;榨;榩;榪;榫;榬;榭;榮;榯tĀ;vᙅᙆ戟bĀ;dᙌᙍ抾;榝Āptᙔᙗh;戢»¹arr;捼Āgpᙣᙧon;䄅f;쀀𝕒΀;Eaeiop዁ᙻᙽᚂᚄᚇᚊ;橰cir;橯;扊d;手s;䀧roxĀ;e዁ᚒñᚃing耻å䃥ƀctyᚡᚦᚨr;쀀𝒶;䀪mpĀ;e዁ᚯñʈilde耻ã䃣ml耻ä䃤Āciᛂᛈoninôɲnt;樑ࠀNabcdefiklnoprsu᛭ᛱᜰ᜼ᝃᝈ᝸᝽០៦ᠹᡐᜍ᤽᥈ᥰot;櫭Ācrᛶ᜞kȀcepsᜀᜅᜍᜓong;扌psilon;䏶rime;怵imĀ;e᜚᜛戽q;拍Ŷᜢᜦee;抽edĀ;gᜬᜭ挅e»ᜭrkĀ;t፜᜷brk;掶Āoyᜁᝁ;䐱quo;怞ʀcmprtᝓ᝛ᝡᝤᝨausĀ;eĊĉptyv;榰séᜌnoõēƀahwᝯ᝱ᝳ;䎲;愶een;扬r;쀀𝔟g΀costuvwឍឝឳេ៕៛៞ƀaiuបពរðݠrc;旯p»፱ƀdptឤឨឭot;樀lus;樁imes;樂ɱឹ\0\0ើcup;樆ar;昅riangleĀdu៍្own;施p;斳plus;樄eåᑄåᒭarow;植ƀako៭ᠦᠵĀcn៲ᠣkƀlst៺֫᠂ozenge;槫riangleȀ;dlr᠒᠓᠘᠝斴own;斾eft;旂ight;斸k;搣Ʊᠫ\0ᠳƲᠯ\0ᠱ;斒;斑4;斓ck;斈ĀeoᠾᡍĀ;qᡃᡆ쀀=⃥uiv;쀀≡⃥t;挐Ȁptwxᡙᡞᡧᡬf;쀀𝕓Ā;tᏋᡣom»Ꮜtie;拈؀DHUVbdhmptuvᢅᢖᢪᢻᣗᣛᣬ᣿ᤅᤊᤐᤡȀLRlrᢎᢐᢒᢔ;敗;敔;敖;敓ʀ;DUduᢡᢢᢤᢦᢨ敐;敦;敩;敤;敧ȀLRlrᢳᢵᢷᢹ;敝;敚;敜;教΀;HLRhlrᣊᣋᣍᣏᣑᣓᣕ救;敬;散;敠;敫;敢;敟ox;槉ȀLRlrᣤᣦᣨᣪ;敕;敒;攐;攌ʀ;DUduڽ᣷᣹᣻᣽;敥;敨;攬;攴inus;抟lus;択imes;抠ȀLRlrᤙᤛᤝ᤟;敛;敘;攘;攔΀;HLRhlrᤰᤱᤳᤵᤷ᤻᤹攂;敪;敡;敞;攼;攤;攜Āevģ᥂bar耻¦䂦Ȁceioᥑᥖᥚᥠr;쀀𝒷mi;恏mĀ;e᜚᜜lƀ;bhᥨᥩᥫ䁜;槅sub;柈Ŭᥴ᥾lĀ;e᥹᥺怢t»᥺pƀ;Eeįᦅᦇ;檮Ā;qۜۛೡᦧ\0᧨ᨑᨕᨲ\0ᨷᩐ\0\0᪴\0\0᫁\0\0ᬡᬮ᭍᭒\0᯽\0ᰌƀcpr᦭ᦲ᧝ute;䄇̀;abcdsᦿᧀᧄ᧊᧕᧙戩nd;橄rcup;橉Āau᧏᧒p;橋p;橇ot;橀;쀀∩︀Āeo᧢᧥t;恁îړȀaeiu᧰᧻ᨁᨅǰ᧵\0᧸s;橍on;䄍dil耻ç䃧rc;䄉psĀ;sᨌᨍ橌m;橐ot;䄋ƀdmnᨛᨠᨦil肻¸ƭptyv;榲t脀¢;eᨭᨮ䂢räƲr;쀀𝔠ƀceiᨽᩀᩍy;䑇ckĀ;mᩇᩈ朓ark»ᩈ;䏇r΀;Ecefms᩟᩠ᩢᩫ᪤᪪᪮旋;槃ƀ;elᩩᩪᩭ䋆q;扗eɡᩴ\0\0᪈rrowĀlr᩼᪁eft;憺ight;憻ʀRSacd᪒᪔᪖᪚᪟»ཇ;擈st;抛irc;抚ash;抝nint;樐id;櫯cir;槂ubsĀ;u᪻᪼晣it»᪼ˬ᫇᫔᫺\0ᬊonĀ;eᫍᫎ䀺Ā;qÇÆɭ᫙\0\0᫢aĀ;t᫞᫟䀬;䁀ƀ;fl᫨᫩᫫戁îᅠeĀmx᫱᫶ent»᫩eóɍǧ᫾\0ᬇĀ;dኻᬂot;橭nôɆƀfryᬐᬔᬗ;쀀𝕔oäɔ脀©;sŕᬝr;愗Āaoᬥᬩrr;憵ss;朗Ācuᬲᬷr;쀀𝒸Ābpᬼ᭄Ā;eᭁᭂ櫏;櫑Ā;eᭉᭊ櫐;櫒dot;拯΀delprvw᭠᭬᭷ᮂᮬᯔ᯹arrĀlr᭨᭪;椸;椵ɰ᭲\0\0᭵r;拞c;拟arrĀ;p᭿ᮀ憶;椽̀;bcdosᮏᮐᮖᮡᮥᮨ截rcap;橈Āauᮛᮞp;橆p;橊ot;抍r;橅;쀀∪︀Ȁalrv᮵ᮿᯞᯣrrĀ;mᮼᮽ憷;椼yƀevwᯇᯔᯘqɰᯎ\0\0ᯒreã᭳uã᭵ee;拎edge;拏en耻¤䂤earrowĀlrᯮ᯳eft»ᮀight»ᮽeäᯝĀciᰁᰇoninôǷnt;戱lcty;挭ঀAHabcdefhijlorstuwz᰸᰻᰿ᱝᱩᱵᲊᲞᲬᲷ᳻᳿ᴍᵻᶑᶫᶻ᷆᷍rò΁ar;楥Ȁglrs᱈ᱍ᱒᱔ger;怠eth;愸òᄳhĀ;vᱚᱛ怐»ऊūᱡᱧarow;椏aã̕Āayᱮᱳron;䄏;䐴ƀ;ao̲ᱼᲄĀgrʿᲁr;懊tseq;橷ƀglmᲑᲔᲘ耻°䂰ta;䎴ptyv;榱ĀirᲣᲨsht;楿;쀀𝔡arĀlrᲳᲵ»ࣜ»သʀaegsv᳂͸᳖᳜᳠mƀ;oș᳊᳔ndĀ;ș᳑uit;晦amma;䏝in;拲ƀ;io᳧᳨᳸䃷de脀÷;o᳧ᳰntimes;拇nø᳷cy;䑒cɯᴆ\0\0ᴊrn;挞op;挍ʀlptuwᴘᴝᴢᵉᵕlar;䀤f;쀀𝕕ʀ;emps̋ᴭᴷᴽᵂqĀ;d͒ᴳot;扑inus;戸lus;戔quare;抡blebarwedgåúnƀadhᄮᵝᵧownarrowóᲃarpoonĀlrᵲᵶefôᲴighôᲶŢᵿᶅkaro÷གɯᶊ\0\0ᶎrn;挟op;挌ƀcotᶘᶣᶦĀryᶝᶡ;쀀𝒹;䑕l;槶rok;䄑Ādrᶰᶴot;拱iĀ;fᶺ᠖斿Āah᷀᷃ròЩaòྦangle;榦Āci᷒ᷕy;䑟grarr;柿ऀDacdefglmnopqrstuxḁḉḙḸոḼṉṡṾấắẽỡἪἷὄ὎὚ĀDoḆᴴoôᲉĀcsḎḔute耻é䃩ter;橮ȀaioyḢḧḱḶron;䄛rĀ;cḭḮ扖耻ê䃪lon;払;䑍ot;䄗ĀDrṁṅot;扒;쀀𝔢ƀ;rsṐṑṗ檚ave耻è䃨Ā;dṜṝ檖ot;檘Ȁ;ilsṪṫṲṴ檙nters;揧;愓Ā;dṹṺ檕ot;檗ƀapsẅẉẗcr;䄓tyƀ;svẒẓẕ戅et»ẓpĀ1;ẝẤĳạả;怄;怅怃ĀgsẪẬ;䅋p;怂ĀgpẴẸon;䄙f;쀀𝕖ƀalsỄỎỒrĀ;sỊị拕l;槣us;橱iƀ;lvỚớở䎵on»ớ;䏵ȀcsuvỪỳἋἣĀioữḱrc»Ḯɩỹ\0\0ỻíՈantĀglἂἆtr»ṝess»Ṻƀaeiἒ἖Ἒls;䀽st;扟vĀ;DȵἠD;橸parsl;槥ĀDaἯἳot;打rr;楱ƀcdiἾὁỸr;愯oô͒ĀahὉὋ;䎷耻ð䃰Āmrὓὗl耻ë䃫o;悬ƀcipὡὤὧl;䀡sôծĀeoὬὴctatioîՙnentialåչৡᾒ\0ᾞ\0ᾡᾧ\0\0ῆῌ\0ΐ\0ῦῪ \0 ⁚llingdotseñṄy;䑄male;晀ƀilrᾭᾳ῁lig;耀ﬃɩᾹ\0\0᾽g;耀ﬀig;耀ﬄ;쀀𝔣lig;耀ﬁlig;쀀fjƀaltῙ῜ῡt;晭ig;耀ﬂns;斱of;䆒ǰ΅\0ῳf;쀀𝕗ĀakֿῷĀ;vῼ´拔;櫙artint;樍Āao‌⁕Ācs‑⁒α‚‰‸⁅⁈\0⁐β•‥‧‪‬\0‮耻½䂽;慓耻¼䂼;慕;慙;慛Ƴ‴\0‶;慔;慖ʴ‾⁁\0\0⁃耻¾䂾;慗;慜5;慘ƶ⁌\0⁎;慚;慝8;慞l;恄wn;挢cr;쀀𝒻ࢀEabcdefgijlnorstv₂₉₟₥₰₴⃰⃵⃺⃿℃ℒℸ̗ℾ⅒↞Ā;lٍ₇;檌ƀcmpₐₕ₝ute;䇵maĀ;dₜ᳚䎳;檆reve;䄟Āiy₪₮rc;䄝;䐳ot;䄡Ȁ;lqsؾق₽⃉ƀ;qsؾٌ⃄lanô٥Ȁ;cdl٥⃒⃥⃕c;檩otĀ;o⃜⃝檀Ā;l⃢⃣檂;檄Ā;e⃪⃭쀀⋛︀s;檔r;쀀𝔤Ā;gٳ؛mel;愷cy;䑓Ȁ;Eajٚℌℎℐ;檒;檥;檤ȀEaesℛℝ℩ℴ;扩pĀ;p℣ℤ檊rox»ℤĀ;q℮ℯ檈Ā;q℮ℛim;拧pf;쀀𝕘Āci⅃ⅆr;愊mƀ;el٫ⅎ⅐;檎;檐茀>;cdlqr׮ⅠⅪⅮⅳⅹĀciⅥⅧ;檧r;橺ot;拗Par;榕uest;橼ʀadelsↄⅪ←ٖ↛ǰ↉\0↎proø₞r;楸qĀlqؿ↖lesó₈ií٫Āen↣↭rtneqq;쀀≩︀Å↪ԀAabcefkosy⇄⇇⇱⇵⇺∘∝∯≨≽ròΠȀilmr⇐⇔⇗⇛rsðᒄf»․ilôکĀdr⇠⇤cy;䑊ƀ;cwࣴ⇫⇯ir;楈;憭ar;意irc;䄥ƀalr∁∎∓rtsĀ;u∉∊晥it»∊lip;怦con;抹r;쀀𝔥sĀew∣∩arow;椥arow;椦ʀamopr∺∾≃≞≣rr;懿tht;戻kĀlr≉≓eftarrow;憩ightarrow;憪f;쀀𝕙bar;怕ƀclt≯≴≸r;쀀𝒽asè⇴rok;䄧Ābp⊂⊇ull;恃hen»ᱛૡ⊣\0⊪\0⊸⋅⋎\0⋕⋳\0\0⋸⌢⍧⍢⍿\0⎆⎪⎴cute耻í䃭ƀ;iyݱ⊰⊵rc耻î䃮;䐸Ācx⊼⊿y;䐵cl耻¡䂡ĀfrΟ⋉;쀀𝔦rave耻ì䃬Ȁ;inoܾ⋝⋩⋮Āin⋢⋦nt;樌t;戭fin;槜ta;愩lig;䄳ƀaop⋾⌚⌝ƀcgt⌅⌈⌗r;䄫ƀelpܟ⌏⌓inåގarôܠh;䄱f;抷ed;䆵ʀ;cfotӴ⌬⌱⌽⍁are;愅inĀ;t⌸⌹戞ie;槝doô⌙ʀ;celpݗ⍌⍐⍛⍡al;抺Āgr⍕⍙eróᕣã⍍arhk;樗rod;樼Ȁcgpt⍯⍲⍶⍻y;䑑on;䄯f;쀀𝕚a;䎹uest耻¿䂿Āci⎊⎏r;쀀𝒾nʀ;EdsvӴ⎛⎝⎡ӳ;拹ot;拵Ā;v⎦⎧拴;拳Ā;iݷ⎮lde;䄩ǫ⎸\0⎼cy;䑖l耻ï䃯̀cfmosu⏌⏗⏜⏡⏧⏵Āiy⏑⏕rc;䄵;䐹r;쀀𝔧ath;䈷pf;쀀𝕛ǣ⏬\0⏱r;쀀𝒿rcy;䑘kcy;䑔Ѐacfghjos␋␖␢␧␭␱␵␻ppaĀ;v␓␔䎺;䏰Āey␛␠dil;䄷;䐺r;쀀𝔨reen;䄸cy;䑅cy;䑜pf;쀀𝕜cr;쀀𝓀஀ABEHabcdefghjlmnoprstuv⑰⒁⒆⒍⒑┎┽╚▀♎♞♥♹♽⚚⚲⛘❝❨➋⟀⠁⠒ƀart⑷⑺⑼rò৆òΕail;椛arr;椎Ā;gঔ⒋;檋ar;楢ॣ⒥\0⒪\0⒱\0\0\0\0\0⒵Ⓔ\0ⓆⓈⓍ\0⓹ute;䄺mptyv;榴raîࡌbda;䎻gƀ;dlࢎⓁⓃ;榑åࢎ;檅uo耻«䂫rЀ;bfhlpst࢙ⓞⓦⓩ⓫⓮⓱⓵Ā;f࢝ⓣs;椟s;椝ë≒p;憫l;椹im;楳l;憢ƀ;ae⓿─┄檫il;椙Ā;s┉┊檭;쀀⪭︀ƀabr┕┙┝rr;椌rk;杲Āak┢┬cĀek┨┪;䁻;䁛Āes┱┳;榋lĀdu┹┻;榏;榍Ȁaeuy╆╋╖╘ron;䄾Ādi═╔il;䄼ìࢰâ┩;䐻Ȁcqrs╣╦╭╽a;椶uoĀ;rนᝆĀdu╲╷har;楧shar;楋h;憲ʀ;fgqs▋▌উ◳◿扤tʀahlrt▘▤▷◂◨rrowĀ;t࢙□aé⓶arpoonĀdu▯▴own»њp»०eftarrows;懇ightƀahs◍◖◞rrowĀ;sࣴࢧarpoonó྘quigarro÷⇰hreetimes;拋ƀ;qs▋ও◺lanôবʀ;cdgsব☊☍☝☨c;檨otĀ;o☔☕橿Ā;r☚☛檁;檃Ā;e☢☥쀀⋚︀s;檓ʀadegs☳☹☽♉♋pproøⓆot;拖qĀgq♃♅ôউgtò⒌ôছiíলƀilr♕࣡♚sht;楼;쀀𝔩Ā;Eজ♣;檑š♩♶rĀdu▲♮Ā;l॥♳;楪lk;斄cy;䑙ʀ;achtੈ⚈⚋⚑⚖rò◁orneòᴈard;楫ri;旺Āio⚟⚤dot;䅀ustĀ;a⚬⚭掰che»⚭ȀEaes⚻⚽⛉⛔;扨pĀ;p⛃⛄檉rox»⛄Ā;q⛎⛏檇Ā;q⛎⚻im;拦Ѐabnoptwz⛩⛴⛷✚✯❁❇❐Ānr⛮⛱g;柬r;懽rëࣁgƀlmr⛿✍✔eftĀar০✇ightá৲apsto;柼ightá৽parrowĀlr✥✩efô⓭ight;憬ƀafl✶✹✽r;榅;쀀𝕝us;樭imes;樴š❋❏st;戗áፎƀ;ef❗❘᠀旊nge»❘arĀ;l❤❥䀨t;榓ʀachmt❳❶❼➅➇ròࢨorneòᶌarĀ;d྘➃;業;怎ri;抿̀achiqt➘➝ੀ➢➮➻quo;怹r;쀀𝓁mƀ;egল➪➬;檍;檏Ābu┪➳oĀ;rฟ➹;怚rok;䅂萀<;cdhilqrࠫ⟒☹⟜⟠⟥⟪⟰Āci⟗⟙;檦r;橹reå◲mes;拉arr;楶uest;橻ĀPi⟵⟹ar;榖ƀ;ef⠀भ᠛旃rĀdu⠇⠍shar;楊har;楦Āen⠗⠡rtneqq;쀀≨︀Å⠞܀Dacdefhilnopsu⡀⡅⢂⢎⢓⢠⢥⢨⣚⣢⣤ઃ⣳⤂Dot;戺Ȁclpr⡎⡒⡣⡽r耻¯䂯Āet⡗⡙;時Ā;e⡞⡟朠se»⡟Ā;sျ⡨toȀ;dluျ⡳⡷⡻owîҌefôएðᏑker;斮Āoy⢇⢌mma;権;䐼ash;怔asuredangle»ᘦr;쀀𝔪o;愧ƀcdn⢯⢴⣉ro耻µ䂵Ȁ;acdᑤ⢽⣀⣄sôᚧir;櫰ot肻·Ƶusƀ;bd⣒ᤃ⣓戒Ā;uᴼ⣘;横ţ⣞⣡p;櫛ò−ðઁĀdp⣩⣮els;抧f;쀀𝕞Āct⣸⣽r;쀀𝓂pos»ᖝƀ;lm⤉⤊⤍䎼timap;抸ఀGLRVabcdefghijlmoprstuvw⥂⥓⥾⦉⦘⧚⧩⨕⨚⩘⩝⪃⪕⪤⪨⬄⬇⭄⭿⮮ⰴⱧⱼ⳩Āgt⥇⥋;쀀⋙̸Ā;v⥐௏쀀≫⃒ƀelt⥚⥲⥶ftĀar⥡⥧rrow;懍ightarrow;懎;쀀⋘̸Ā;v⥻ే쀀≪⃒ightarrow;懏ĀDd⦎⦓ash;抯ash;抮ʀbcnpt⦣⦧⦬⦱⧌la»˞ute;䅄g;쀀∠⃒ʀ;Eiop඄⦼⧀⧅⧈;쀀⩰̸d;쀀≋̸s;䅉roø඄urĀ;a⧓⧔普lĀ;s⧓ସǳ⧟\0⧣p肻 ଷmpĀ;e௹ఀʀaeouy⧴⧾⨃⨐⨓ǰ⧹\0⧻;橃on;䅈dil;䅆ngĀ;dൾ⨊ot;쀀⩭̸p;橂;䐽ash;怓΀;Aadqsxஒ⨩⨭⨻⩁⩅⩐rr;懗rĀhr⨳⨶k;椤Ā;oᏲᏰot;쀀≐̸uiöୣĀei⩊⩎ar;椨í஘istĀ;s஠டr;쀀𝔫ȀEest௅⩦⩹⩼ƀ;qs஼⩭௡ƀ;qs஼௅⩴lanô௢ií௪Ā;rஶ⪁»ஷƀAap⪊⪍⪑rò⥱rr;憮ar;櫲ƀ;svྍ⪜ྌĀ;d⪡⪢拼;拺cy;䑚΀AEadest⪷⪺⪾⫂⫅⫶⫹rò⥦;쀀≦̸rr;憚r;急Ȁ;fqs఻⫎⫣⫯tĀar⫔⫙rro÷⫁ightarro÷⪐ƀ;qs఻⪺⫪lanôౕĀ;sౕ⫴»శiíౝĀ;rవ⫾iĀ;eచథiäඐĀpt⬌⬑f;쀀𝕟膀¬;in⬙⬚⬶䂬nȀ;Edvஉ⬤⬨⬮;쀀⋹̸ot;쀀⋵̸ǡஉ⬳⬵;拷;拶iĀ;vಸ⬼ǡಸ⭁⭃;拾;拽ƀaor⭋⭣⭩rȀ;ast୻⭕⭚⭟lleì୻l;쀀⫽⃥;쀀∂̸lint;樔ƀ;ceಒ⭰⭳uåಥĀ;cಘ⭸Ā;eಒ⭽ñಘȀAait⮈⮋⮝⮧rò⦈rrƀ;cw⮔⮕⮙憛;쀀⤳̸;쀀↝̸ghtarrow»⮕riĀ;eೋೖ΀chimpqu⮽⯍⯙⬄୸⯤⯯Ȁ;cerല⯆ഷ⯉uå൅;쀀𝓃ortɭ⬅\0\0⯖ará⭖mĀ;e൮⯟Ā;q൴൳suĀbp⯫⯭å೸åഋƀbcp⯶ⰑⰙȀ;Ees⯿ⰀഢⰄ抄;쀀⫅̸etĀ;eഛⰋqĀ;qണⰀcĀ;eലⰗñസȀ;EesⰢⰣൟⰧ抅;쀀⫆̸etĀ;e൘ⰮqĀ;qൠⰣȀgilrⰽⰿⱅⱇìௗlde耻ñ䃱çృiangleĀlrⱒⱜeftĀ;eచⱚñదightĀ;eೋⱥñ೗Ā;mⱬⱭ䎽ƀ;esⱴⱵⱹ䀣ro;愖p;怇ҀDHadgilrsⲏⲔⲙⲞⲣⲰⲶⳓⳣash;抭arr;椄p;쀀≍⃒ash;抬ĀetⲨⲬ;쀀≥⃒;쀀>⃒nfin;槞ƀAetⲽⳁⳅrr;椂;쀀≤⃒Ā;rⳊⳍ쀀<⃒ie;쀀⊴⃒ĀAtⳘⳜrr;椃rie;쀀⊵⃒im;쀀∼⃒ƀAan⳰⳴ⴂrr;懖rĀhr⳺⳽k;椣Ā;oᏧᏥear;椧ቓ᪕\0\0\0\0\0\0\0\0\0\0\0\0\0ⴭ\0ⴸⵈⵠⵥ⵲ⶄᬇ\0\0ⶍⶫ\0ⷈⷎ\0ⷜ⸙⸫⸾⹃Ācsⴱ᪗ute耻ó䃳ĀiyⴼⵅrĀ;c᪞ⵂ耻ô䃴;䐾ʀabios᪠ⵒⵗǈⵚlac;䅑v;樸old;榼lig;䅓Ācr⵩⵭ir;榿;쀀𝔬ͯ⵹\0\0⵼\0ⶂn;䋛ave耻ò䃲;槁Ābmⶈ෴ar;榵Ȁacitⶕ⶘ⶥⶨrò᪀Āir⶝ⶠr;榾oss;榻nå๒;槀ƀaeiⶱⶵⶹcr;䅍ga;䏉ƀcdnⷀⷅǍron;䎿;榶pf;쀀𝕠ƀaelⷔ⷗ǒr;榷rp;榹΀;adiosvⷪⷫⷮ⸈⸍⸐⸖戨rò᪆Ȁ;efmⷷⷸ⸂⸅橝rĀ;oⷾⷿ愴f»ⷿ耻ª䂪耻º䂺gof;抶r;橖lope;橗;橛ƀclo⸟⸡⸧ò⸁ash耻ø䃸l;折iŬⸯ⸴de耻õ䃵esĀ;aǛ⸺s;樶ml耻ö䃶bar;挽ૡ⹞\0⹽\0⺀⺝\0⺢⺹\0\0⻋ຜ\0⼓\0\0⼫⾼\0⿈rȀ;astЃ⹧⹲຅脀¶;l⹭⹮䂶leìЃɩ⹸\0\0⹻m;櫳;櫽y;䐿rʀcimpt⺋⺏⺓ᡥ⺗nt;䀥od;䀮il;怰enk;怱r;쀀𝔭ƀimo⺨⺰⺴Ā;v⺭⺮䏆;䏕maô੶ne;明ƀ;tv⺿⻀⻈䏀chfork»´;䏖Āau⻏⻟nĀck⻕⻝kĀ;h⇴⻛;愎ö⇴sҀ;abcdemst⻳⻴ᤈ⻹⻽⼄⼆⼊⼎䀫cir;樣ir;樢Āouᵀ⼂;樥;橲n肻±ຝim;樦wo;樧ƀipu⼙⼠⼥ntint;樕f;쀀𝕡nd耻£䂣Ԁ;Eaceinosu່⼿⽁⽄⽇⾁⾉⾒⽾⾶;檳p;檷uå໙Ā;c໎⽌̀;acens່⽙⽟⽦⽨⽾pproø⽃urlyeñ໙ñ໎ƀaes⽯⽶⽺pprox;檹qq;檵im;拨iíໟmeĀ;s⾈ຮ怲ƀEas⽸⾐⽺ð⽵ƀdfp໬⾙⾯ƀals⾠⾥⾪lar;挮ine;挒urf;挓Ā;t໻⾴ï໻rel;抰Āci⿀⿅r;쀀𝓅;䏈ncsp;怈̀fiopsu⿚⋢⿟⿥⿫⿱r;쀀𝔮pf;쀀𝕢rime;恗cr;쀀𝓆ƀaeo⿸〉〓tĀei⿾々rnionóڰnt;樖stĀ;e【】䀿ñἙô༔઀ABHabcdefhilmnoprstux぀けさすムㄎㄫㅇㅢㅲㆎ㈆㈕㈤㈩㉘㉮㉲㊐㊰㊷ƀartぇおがròႳòϝail;検aròᱥar;楤΀cdenqrtとふへみわゔヌĀeuねぱ;쀀∽̱te;䅕iãᅮmptyv;榳gȀ;del࿑らるろ;榒;榥å࿑uo耻»䂻rր;abcfhlpstw࿜ガクシスゼゾダッデナp;極Ā;f࿠ゴs;椠;椳s;椞ë≝ð✮l;楅im;楴l;憣;憝Āaiパフil;椚oĀ;nホボ戶aló༞ƀabrョリヮrò៥rk;杳ĀakンヽcĀekヹ・;䁽;䁝Āes㄂㄄;榌lĀduㄊㄌ;榎;榐Ȁaeuyㄗㄜㄧㄩron;䅙Ādiㄡㄥil;䅗ì࿲âヺ;䑀Ȁclqsㄴㄷㄽㅄa;椷dhar;楩uoĀ;rȎȍh;憳ƀacgㅎㅟངlȀ;ipsླྀㅘㅛႜnåႻarôྩt;断ƀilrㅩဣㅮsht;楽;쀀𝔯ĀaoㅷㆆrĀduㅽㅿ»ѻĀ;l႑ㆄ;楬Ā;vㆋㆌ䏁;䏱ƀgns㆕ㇹㇼht̀ahlrstㆤㆰ㇂㇘㇤㇮rrowĀ;t࿜ㆭaéトarpoonĀduㆻㆿowîㅾp»႒eftĀah㇊㇐rrowó࿪arpoonóՑightarrows;應quigarro÷ニhreetimes;拌g;䋚ingdotseñἲƀahm㈍㈐㈓rò࿪aòՑ;怏oustĀ;a㈞㈟掱che»㈟mid;櫮Ȁabpt㈲㈽㉀㉒Ānr㈷㈺g;柭r;懾rëဃƀafl㉇㉊㉎r;榆;쀀𝕣us;樮imes;樵Āap㉝㉧rĀ;g㉣㉤䀩t;榔olint;樒arò㇣Ȁachq㉻㊀Ⴜ㊅quo;怺r;쀀𝓇Ābu・㊊oĀ;rȔȓƀhir㊗㊛㊠reåㇸmes;拊iȀ;efl㊪ၙᠡ㊫方tri;槎luhar;楨;愞ൡ㋕㋛㋟㌬㌸㍱\0㍺㎤\0\0㏬㏰\0㐨㑈㑚㒭㒱㓊㓱\0㘖\0\0㘳cute;䅛quï➺Ԁ;Eaceinpsyᇭ㋳㋵㋿㌂㌋㌏㌟㌦㌩;檴ǰ㋺\0㋼;檸on;䅡uåᇾĀ;dᇳ㌇il;䅟rc;䅝ƀEas㌖㌘㌛;檶p;檺im;择olint;樓iíሄ;䑁otƀ;be㌴ᵇ㌵担;橦΀Aacmstx㍆㍊㍗㍛㍞㍣㍭rr;懘rĀhr㍐㍒ë∨Ā;oਸ਼਴t耻§䂧i;䀻war;椩mĀin㍩ðnuóñt;朶rĀ;o㍶⁕쀀𝔰Ȁacoy㎂㎆㎑㎠rp;景Āhy㎋㎏cy;䑉;䑈rtɭ㎙\0\0㎜iäᑤaraì⹯耻­䂭Āgm㎨㎴maƀ;fv㎱㎲㎲䏃;䏂Ѐ;deglnprካ㏅㏉㏎㏖㏞㏡㏦ot;橪Ā;q኱ኰĀ;E㏓㏔檞;檠Ā;E㏛㏜檝;檟e;扆lus;樤arr;楲aròᄽȀaeit㏸㐈㐏㐗Āls㏽㐄lsetmé㍪hp;樳parsl;槤Ādlᑣ㐔e;挣Ā;e㐜㐝檪Ā;s㐢㐣檬;쀀⪬︀ƀflp㐮㐳㑂tcy;䑌Ā;b㐸㐹䀯Ā;a㐾㐿槄r;挿f;쀀𝕤aĀdr㑍ЂesĀ;u㑔㑕晠it»㑕ƀcsu㑠㑹㒟Āau㑥㑯pĀ;sᆈ㑫;쀀⊓︀pĀ;sᆴ㑵;쀀⊔︀uĀbp㑿㒏ƀ;esᆗᆜ㒆etĀ;eᆗ㒍ñᆝƀ;esᆨᆭ㒖etĀ;eᆨ㒝ñᆮƀ;afᅻ㒦ְrť㒫ֱ»ᅼaròᅈȀcemt㒹㒾㓂㓅r;쀀𝓈tmîñiì㐕aræᆾĀar㓎㓕rĀ;f㓔ឿ昆Āan㓚㓭ightĀep㓣㓪psiloîỠhé⺯s»⡒ʀbcmnp㓻㕞ሉ㖋㖎Ҁ;Edemnprs㔎㔏㔑㔕㔞㔣㔬㔱㔶抂;櫅ot;檽Ā;dᇚ㔚ot;櫃ult;櫁ĀEe㔨㔪;櫋;把lus;檿arr;楹ƀeiu㔽㕒㕕tƀ;en㔎㕅㕋qĀ;qᇚ㔏eqĀ;q㔫㔨m;櫇Ābp㕚㕜;櫕;櫓c̀;acensᇭ㕬㕲㕹㕻㌦pproø㋺urlyeñᇾñᇳƀaes㖂㖈㌛pproø㌚qñ㌗g;晪ڀ123;Edehlmnps㖩㖬㖯ሜ㖲㖴㗀㗉㗕㗚㗟㗨㗭耻¹䂹耻²䂲耻³䂳;櫆Āos㖹㖼t;檾ub;櫘Ā;dሢ㗅ot;櫄sĀou㗏㗒l;柉b;櫗arr;楻ult;櫂ĀEe㗤㗦;櫌;抋lus;櫀ƀeiu㗴㘉㘌tƀ;enሜ㗼㘂qĀ;qሢ㖲eqĀ;q㗧㗤m;櫈Ābp㘑㘓;櫔;櫖ƀAan㘜㘠㘭rr;懙rĀhr㘦㘨ë∮Ā;oਫ਩war;椪lig耻ß䃟௡㙑㙝㙠ዎ㙳㙹\0㙾㛂\0\0\0\0\0㛛㜃\0㜉㝬\0\0\0㞇ɲ㙖\0\0㙛get;挖;䏄rë๟ƀaey㙦㙫㙰ron;䅥dil;䅣;䑂lrec;挕r;쀀𝔱Ȁeiko㚆㚝㚵㚼ǲ㚋\0㚑eĀ4fኄኁaƀ;sv㚘㚙㚛䎸ym;䏑Ācn㚢㚲kĀas㚨㚮pproø዁im»ኬsðኞĀas㚺㚮ð዁rn耻þ䃾Ǭ̟㛆⋧es膀×;bd㛏㛐㛘䃗Ā;aᤏ㛕r;樱;樰ƀeps㛡㛣㜀á⩍Ȁ;bcf҆㛬㛰㛴ot;挶ir;櫱Ā;o㛹㛼쀀𝕥rk;櫚á㍢rime;怴ƀaip㜏㜒㝤dåቈ΀adempst㜡㝍㝀㝑㝗㝜㝟ngleʀ;dlqr㜰㜱㜶㝀㝂斵own»ᶻeftĀ;e⠀㜾ñम;扜ightĀ;e㊪㝋ñၚot;旬inus;樺lus;樹b;槍ime;樻ezium;揢ƀcht㝲㝽㞁Āry㝷㝻;쀀𝓉;䑆cy;䑛rok;䅧Āio㞋㞎xô᝷headĀlr㞗㞠eftarro÷ࡏightarrow»ཝऀAHabcdfghlmoprstuw㟐㟓㟗㟤㟰㟼㠎㠜㠣㠴㡑㡝㡫㢩㣌㣒㣪㣶ròϭar;楣Ācr㟜㟢ute耻ú䃺òᅐrǣ㟪\0㟭y;䑞ve;䅭Āiy㟵㟺rc耻û䃻;䑃ƀabh㠃㠆㠋ròᎭlac;䅱aòᏃĀir㠓㠘sht;楾;쀀𝔲rave耻ù䃹š㠧㠱rĀlr㠬㠮»ॗ»ႃlk;斀Āct㠹㡍ɯ㠿\0\0㡊rnĀ;e㡅㡆挜r»㡆op;挏ri;旸Āal㡖㡚cr;䅫肻¨͉Āgp㡢㡦on;䅳f;쀀𝕦̀adhlsuᅋ㡸㡽፲㢑㢠ownáᎳarpoonĀlr㢈㢌efô㠭ighô㠯iƀ;hl㢙㢚㢜䏅»ᏺon»㢚parrows;懈ƀcit㢰㣄㣈ɯ㢶\0\0㣁rnĀ;e㢼㢽挝r»㢽op;挎ng;䅯ri;旹cr;쀀𝓊ƀdir㣙㣝㣢ot;拰lde;䅩iĀ;f㜰㣨»᠓Āam㣯㣲rò㢨l耻ü䃼angle;榧ހABDacdeflnoprsz㤜㤟㤩㤭㦵㦸㦽㧟㧤㧨㧳㧹㧽㨁㨠ròϷarĀ;v㤦㤧櫨;櫩asèϡĀnr㤲㤷grt;榜΀eknprst㓣㥆㥋㥒㥝㥤㦖appá␕othinçẖƀhir㓫⻈㥙opô⾵Ā;hᎷ㥢ïㆍĀiu㥩㥭gmá㎳Ābp㥲㦄setneqĀ;q㥽㦀쀀⊊︀;쀀⫋︀setneqĀ;q㦏㦒쀀⊋︀;쀀⫌︀Āhr㦛㦟etá㚜iangleĀlr㦪㦯eft»थight»ၑy;䐲ash»ံƀelr㧄㧒㧗ƀ;beⷪ㧋㧏ar;抻q;扚lip;拮Ābt㧜ᑨaòᑩr;쀀𝔳tré㦮suĀbp㧯㧱»ജ»൙pf;쀀𝕧roð໻tré㦴Ācu㨆㨋r;쀀𝓋Ābp㨐㨘nĀEe㦀㨖»㥾nĀEe㦒㨞»㦐igzag;榚΀cefoprs㨶㨻㩖㩛㩔㩡㩪irc;䅵Ādi㩀㩑Ābg㩅㩉ar;機eĀ;qᗺ㩏;扙erp;愘r;쀀𝔴pf;쀀𝕨Ā;eᑹ㩦atèᑹcr;쀀𝓌ૣណ㪇\0㪋\0㪐㪛\0\0㪝㪨㪫㪯\0\0㫃㫎\0㫘ៜ៟tré៑r;쀀𝔵ĀAa㪔㪗ròσrò৶;䎾ĀAa㪡㪤ròθrò৫að✓is;拻ƀdptឤ㪵㪾Āfl㪺ឩ;쀀𝕩imåឲĀAa㫇㫊ròώròਁĀcq㫒ីr;쀀𝓍Āpt៖㫜ré។Ѐacefiosu㫰㫽㬈㬌㬑㬕㬛㬡cĀuy㫶㫻te耻ý䃽;䑏Āiy㬂㬆rc;䅷;䑋n耻¥䂥r;쀀𝔶cy;䑗pf;쀀𝕪cr;쀀𝓎Ācm㬦㬩y;䑎l耻ÿ䃿Ԁacdefhiosw㭂㭈㭔㭘㭤㭩㭭㭴㭺㮀cute;䅺Āay㭍㭒ron;䅾;䐷ot;䅼Āet㭝㭡træᕟa;䎶r;쀀𝔷cy;䐶grarr;懝pf;쀀𝕫cr;쀀𝓏Ājn㮅㮇;怍j;怌'.split("").map((t=>t.charCodeAt(0)))),q=new Uint16Array("Ȁaglq\tɭ\0\0p;䀦os;䀧t;䀾t;䀼uot;䀢".split("").map((t=>t.charCodeAt(0))));var H;const z=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),j=null!==(H=String.fromCodePoint)&&void 0!==H?H:function(t){let e="";return t>65535&&(t-=65536,e+=String.fromCharCode(t>>>10&1023|55296),t=56320|1023&t),e+=String.fromCharCode(t),e};var U,V,G,W,$;function X(t){return t>=U.ZERO&&t<=U.NINE}!function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"}(U||(U={})),function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"}(V||(V={})),function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"}(G||(G={})),($=W||(W={}))[$.Legacy=0]="Legacy",$[$.Strict=1]="Strict",$[$.Attribute=2]="Attribute";class K{constructor(t,e,i){this.decodeTree=t,this.emitCodePoint=e,this.errors=i,this.state=G.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=W.Strict}startEntity(t){this.decodeMode=t,this.state=G.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,e){switch(this.state){case G.EntityStart:return t.charCodeAt(e)===U.NUM?(this.state=G.NumericStart,this.consumed+=1,this.stateNumericStart(t,e+1)):(this.state=G.NamedEntity,this.stateNamedEntity(t,e));case G.NumericStart:return this.stateNumericStart(t,e);case G.NumericDecimal:return this.stateNumericDecimal(t,e);case G.NumericHex:return this.stateNumericHex(t,e);case G.NamedEntity:return this.stateNamedEntity(t,e)}}stateNumericStart(t,e){return e>=t.length?-1:(32|t.charCodeAt(e))===U.LOWER_X?(this.state=G.NumericHex,this.consumed+=1,this.stateNumericHex(t,e+1)):(this.state=G.NumericDecimal,this.stateNumericDecimal(t,e))}addToNumericResult(t,e,i,n){if(e!==i){const s=i-e;this.result=this.result*Math.pow(n,s)+parseInt(t.substr(e,s),n),this.consumed+=s}}stateNumericHex(t,e){const i=e;for(;e<t.length;){const s=t.charCodeAt(e);if(!(X(s)||(n=s,n>=U.UPPER_A&&n<=U.UPPER_F||n>=U.LOWER_A&&n<=U.LOWER_F)))return this.addToNumericResult(t,i,e,16),this.emitNumericEntity(s,3);e+=1}var n;return this.addToNumericResult(t,i,e,16),-1}stateNumericDecimal(t,e){const i=e;for(;e<t.length;){const n=t.charCodeAt(e);if(!X(n))return this.addToNumericResult(t,i,e,10),this.emitNumericEntity(n,2);e+=1}return this.addToNumericResult(t,i,e,10),-1}emitNumericEntity(t,e){var i;if(this.consumed<=e)return null===(i=this.errors)||void 0===i||i.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===U.SEMI)this.consumed+=1;else if(this.decodeMode===W.Strict)return 0;return this.emitCodePoint(function(t){var e;return t>=55296&&t<=57343||t>1114111?65533:null!==(e=z.get(t))&&void 0!==e?e:t}(this.result),this.consumed),this.errors&&(t!==U.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,e){const{decodeTree:i}=this;let n=i[this.treeIndex],s=(n&V.VALUE_LENGTH)>>14;for(;e<t.length;e++,this.excess++){const a=t.charCodeAt(e);if(this.treeIndex=Q(i,n,this.treeIndex+Math.max(1,s),a),this.treeIndex<0)return 0===this.result||this.decodeMode===W.Attribute&&(0===s||((r=a)===U.EQUALS||function(t){return t>=U.UPPER_A&&t<=U.UPPER_Z||t>=U.LOWER_A&&t<=U.LOWER_Z||X(t)}(r)))?0:this.emitNotTerminatedNamedEntity();if(n=i[this.treeIndex],s=(n&V.VALUE_LENGTH)>>14,0!==s){if(a===U.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==W.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}var r;return-1}emitNotTerminatedNamedEntity(){var t;const{result:e,decodeTree:i}=this,n=(i[e]&V.VALUE_LENGTH)>>14;return this.emitNamedEntityData(e,n,this.consumed),null===(t=this.errors)||void 0===t||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,e,i){const{decodeTree:n}=this;return this.emitCodePoint(1===e?n[t]&~V.VALUE_LENGTH:n[t+1],i),3===e&&this.emitCodePoint(n[t+2],i),i}end(){var t;switch(this.state){case G.NamedEntity:return 0===this.result||this.decodeMode===W.Attribute&&this.result!==this.treeIndex?0:this.emitNotTerminatedNamedEntity();case G.NumericDecimal:return this.emitNumericEntity(0,2);case G.NumericHex:return this.emitNumericEntity(0,3);case G.NumericStart:return null===(t=this.errors)||void 0===t||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case G.EntityStart:return 0}}}function Y(t){let e="";const i=new K(t,(t=>e+=j(t)));return function(t,n){let s=0,r=0;for(;(r=t.indexOf("&",r))>=0;){e+=t.slice(s,r),i.startEntity(n);const a=i.write(t,r+1);if(a<0){s=r+i.end();break}s=r+a,r=0===a?s+1:s}const a=e+t.slice(s);return e="",a}}function Q(t,e,i,n){const s=(e&V.BRANCH_LENGTH)>>7,r=e&V.JUMP_TABLE;if(0===s)return 0!==r&&n===r?i:-1;if(r){const e=n-r;return e<0||e>=s?-1:t[i+e]-1}let a=i,o=a+s-1;for(;a<=o;){const e=a+o>>>1,i=t[e];if(i<n)a=e+1;else{if(!(i>n))return t[e+s];o=e-1}}return-1}const J=Y(B);function Z(t){for(let e=1;e<t.length;e++)t[e][0]+=t[e-1][0]+1;return t}Y(q),new Map(Z([[9,"&Tab;"],[0,"&NewLine;"],[22,"&excl;"],[0,"&quot;"],[0,"&num;"],[0,"&dollar;"],[0,"&percnt;"],[0,"&amp;"],[0,"&apos;"],[0,"&lpar;"],[0,"&rpar;"],[0,"&ast;"],[0,"&plus;"],[0,"&comma;"],[1,"&period;"],[0,"&sol;"],[10,"&colon;"],[0,"&semi;"],[0,{v:"&lt;",n:8402,o:"&nvlt;"}],[0,{v:"&equals;",n:8421,o:"&bne;"}],[0,{v:"&gt;",n:8402,o:"&nvgt;"}],[0,"&quest;"],[0,"&commat;"],[26,"&lbrack;"],[0,"&bsol;"],[0,"&rbrack;"],[0,"&Hat;"],[0,"&lowbar;"],[0,"&DiacriticalGrave;"],[5,{n:106,o:"&fjlig;"}],[20,"&lbrace;"],[0,"&verbar;"],[0,"&rbrace;"],[34,"&nbsp;"],[0,"&iexcl;"],[0,"&cent;"],[0,"&pound;"],[0,"&curren;"],[0,"&yen;"],[0,"&brvbar;"],[0,"&sect;"],[0,"&die;"],[0,"&copy;"],[0,"&ordf;"],[0,"&laquo;"],[0,"&not;"],[0,"&shy;"],[0,"&circledR;"],[0,"&macr;"],[0,"&deg;"],[0,"&PlusMinus;"],[0,"&sup2;"],[0,"&sup3;"],[0,"&acute;"],[0,"&micro;"],[0,"&para;"],[0,"&centerdot;"],[0,"&cedil;"],[0,"&sup1;"],[0,"&ordm;"],[0,"&raquo;"],[0,"&frac14;"],[0,"&frac12;"],[0,"&frac34;"],[0,"&iquest;"],[0,"&Agrave;"],[0,"&Aacute;"],[0,"&Acirc;"],[0,"&Atilde;"],[0,"&Auml;"],[0,"&angst;"],[0,"&AElig;"],[0,"&Ccedil;"],[0,"&Egrave;"],[0,"&Eacute;"],[0,"&Ecirc;"],[0,"&Euml;"],[0,"&Igrave;"],[0,"&Iacute;"],[0,"&Icirc;"],[0,"&Iuml;"],[0,"&ETH;"],[0,"&Ntilde;"],[0,"&Ograve;"],[0,"&Oacute;"],[0,"&Ocirc;"],[0,"&Otilde;"],[0,"&Ouml;"],[0,"&times;"],[0,"&Oslash;"],[0,"&Ugrave;"],[0,"&Uacute;"],[0,"&Ucirc;"],[0,"&Uuml;"],[0,"&Yacute;"],[0,"&THORN;"],[0,"&szlig;"],[0,"&agrave;"],[0,"&aacute;"],[0,"&acirc;"],[0,"&atilde;"],[0,"&auml;"],[0,"&aring;"],[0,"&aelig;"],[0,"&ccedil;"],[0,"&egrave;"],[0,"&eacute;"],[0,"&ecirc;"],[0,"&euml;"],[0,"&igrave;"],[0,"&iacute;"],[0,"&icirc;"],[0,"&iuml;"],[0,"&eth;"],[0,"&ntilde;"],[0,"&ograve;"],[0,"&oacute;"],[0,"&ocirc;"],[0,"&otilde;"],[0,"&ouml;"],[0,"&div;"],[0,"&oslash;"],[0,"&ugrave;"],[0,"&uacute;"],[0,"&ucirc;"],[0,"&uuml;"],[0,"&yacute;"],[0,"&thorn;"],[0,"&yuml;"],[0,"&Amacr;"],[0,"&amacr;"],[0,"&Abreve;"],[0,"&abreve;"],[0,"&Aogon;"],[0,"&aogon;"],[0,"&Cacute;"],[0,"&cacute;"],[0,"&Ccirc;"],[0,"&ccirc;"],[0,"&Cdot;"],[0,"&cdot;"],[0,"&Ccaron;"],[0,"&ccaron;"],[0,"&Dcaron;"],[0,"&dcaron;"],[0,"&Dstrok;"],[0,"&dstrok;"],[0,"&Emacr;"],[0,"&emacr;"],[2,"&Edot;"],[0,"&edot;"],[0,"&Eogon;"],[0,"&eogon;"],[0,"&Ecaron;"],[0,"&ecaron;"],[0,"&Gcirc;"],[0,"&gcirc;"],[0,"&Gbreve;"],[0,"&gbreve;"],[0,"&Gdot;"],[0,"&gdot;"],[0,"&Gcedil;"],[1,"&Hcirc;"],[0,"&hcirc;"],[0,"&Hstrok;"],[0,"&hstrok;"],[0,"&Itilde;"],[0,"&itilde;"],[0,"&Imacr;"],[0,"&imacr;"],[2,"&Iogon;"],[0,"&iogon;"],[0,"&Idot;"],[0,"&imath;"],[0,"&IJlig;"],[0,"&ijlig;"],[0,"&Jcirc;"],[0,"&jcirc;"],[0,"&Kcedil;"],[0,"&kcedil;"],[0,"&kgreen;"],[0,"&Lacute;"],[0,"&lacute;"],[0,"&Lcedil;"],[0,"&lcedil;"],[0,"&Lcaron;"],[0,"&lcaron;"],[0,"&Lmidot;"],[0,"&lmidot;"],[0,"&Lstrok;"],[0,"&lstrok;"],[0,"&Nacute;"],[0,"&nacute;"],[0,"&Ncedil;"],[0,"&ncedil;"],[0,"&Ncaron;"],[0,"&ncaron;"],[0,"&napos;"],[0,"&ENG;"],[0,"&eng;"],[0,"&Omacr;"],[0,"&omacr;"],[2,"&Odblac;"],[0,"&odblac;"],[0,"&OElig;"],[0,"&oelig;"],[0,"&Racute;"],[0,"&racute;"],[0,"&Rcedil;"],[0,"&rcedil;"],[0,"&Rcaron;"],[0,"&rcaron;"],[0,"&Sacute;"],[0,"&sacute;"],[0,"&Scirc;"],[0,"&scirc;"],[0,"&Scedil;"],[0,"&scedil;"],[0,"&Scaron;"],[0,"&scaron;"],[0,"&Tcedil;"],[0,"&tcedil;"],[0,"&Tcaron;"],[0,"&tcaron;"],[0,"&Tstrok;"],[0,"&tstrok;"],[0,"&Utilde;"],[0,"&utilde;"],[0,"&Umacr;"],[0,"&umacr;"],[0,"&Ubreve;"],[0,"&ubreve;"],[0,"&Uring;"],[0,"&uring;"],[0,"&Udblac;"],[0,"&udblac;"],[0,"&Uogon;"],[0,"&uogon;"],[0,"&Wcirc;"],[0,"&wcirc;"],[0,"&Ycirc;"],[0,"&ycirc;"],[0,"&Yuml;"],[0,"&Zacute;"],[0,"&zacute;"],[0,"&Zdot;"],[0,"&zdot;"],[0,"&Zcaron;"],[0,"&zcaron;"],[19,"&fnof;"],[34,"&imped;"],[63,"&gacute;"],[65,"&jmath;"],[142,"&circ;"],[0,"&caron;"],[16,"&breve;"],[0,"&DiacriticalDot;"],[0,"&ring;"],[0,"&ogon;"],[0,"&DiacriticalTilde;"],[0,"&dblac;"],[51,"&DownBreve;"],[127,"&Alpha;"],[0,"&Beta;"],[0,"&Gamma;"],[0,"&Delta;"],[0,"&Epsilon;"],[0,"&Zeta;"],[0,"&Eta;"],[0,"&Theta;"],[0,"&Iota;"],[0,"&Kappa;"],[0,"&Lambda;"],[0,"&Mu;"],[0,"&Nu;"],[0,"&Xi;"],[0,"&Omicron;"],[0,"&Pi;"],[0,"&Rho;"],[1,"&Sigma;"],[0,"&Tau;"],[0,"&Upsilon;"],[0,"&Phi;"],[0,"&Chi;"],[0,"&Psi;"],[0,"&ohm;"],[7,"&alpha;"],[0,"&beta;"],[0,"&gamma;"],[0,"&delta;"],[0,"&epsi;"],[0,"&zeta;"],[0,"&eta;"],[0,"&theta;"],[0,"&iota;"],[0,"&kappa;"],[0,"&lambda;"],[0,"&mu;"],[0,"&nu;"],[0,"&xi;"],[0,"&omicron;"],[0,"&pi;"],[0,"&rho;"],[0,"&sigmaf;"],[0,"&sigma;"],[0,"&tau;"],[0,"&upsi;"],[0,"&phi;"],[0,"&chi;"],[0,"&psi;"],[0,"&omega;"],[7,"&thetasym;"],[0,"&Upsi;"],[2,"&phiv;"],[0,"&piv;"],[5,"&Gammad;"],[0,"&digamma;"],[18,"&kappav;"],[0,"&rhov;"],[3,"&epsiv;"],[0,"&backepsilon;"],[10,"&IOcy;"],[0,"&DJcy;"],[0,"&GJcy;"],[0,"&Jukcy;"],[0,"&DScy;"],[0,"&Iukcy;"],[0,"&YIcy;"],[0,"&Jsercy;"],[0,"&LJcy;"],[0,"&NJcy;"],[0,"&TSHcy;"],[0,"&KJcy;"],[1,"&Ubrcy;"],[0,"&DZcy;"],[0,"&Acy;"],[0,"&Bcy;"],[0,"&Vcy;"],[0,"&Gcy;"],[0,"&Dcy;"],[0,"&IEcy;"],[0,"&ZHcy;"],[0,"&Zcy;"],[0,"&Icy;"],[0,"&Jcy;"],[0,"&Kcy;"],[0,"&Lcy;"],[0,"&Mcy;"],[0,"&Ncy;"],[0,"&Ocy;"],[0,"&Pcy;"],[0,"&Rcy;"],[0,"&Scy;"],[0,"&Tcy;"],[0,"&Ucy;"],[0,"&Fcy;"],[0,"&KHcy;"],[0,"&TScy;"],[0,"&CHcy;"],[0,"&SHcy;"],[0,"&SHCHcy;"],[0,"&HARDcy;"],[0,"&Ycy;"],[0,"&SOFTcy;"],[0,"&Ecy;"],[0,"&YUcy;"],[0,"&YAcy;"],[0,"&acy;"],[0,"&bcy;"],[0,"&vcy;"],[0,"&gcy;"],[0,"&dcy;"],[0,"&iecy;"],[0,"&zhcy;"],[0,"&zcy;"],[0,"&icy;"],[0,"&jcy;"],[0,"&kcy;"],[0,"&lcy;"],[0,"&mcy;"],[0,"&ncy;"],[0,"&ocy;"],[0,"&pcy;"],[0,"&rcy;"],[0,"&scy;"],[0,"&tcy;"],[0,"&ucy;"],[0,"&fcy;"],[0,"&khcy;"],[0,"&tscy;"],[0,"&chcy;"],[0,"&shcy;"],[0,"&shchcy;"],[0,"&hardcy;"],[0,"&ycy;"],[0,"&softcy;"],[0,"&ecy;"],[0,"&yucy;"],[0,"&yacy;"],[1,"&iocy;"],[0,"&djcy;"],[0,"&gjcy;"],[0,"&jukcy;"],[0,"&dscy;"],[0,"&iukcy;"],[0,"&yicy;"],[0,"&jsercy;"],[0,"&ljcy;"],[0,"&njcy;"],[0,"&tshcy;"],[0,"&kjcy;"],[1,"&ubrcy;"],[0,"&dzcy;"],[7074,"&ensp;"],[0,"&emsp;"],[0,"&emsp13;"],[0,"&emsp14;"],[1,"&numsp;"],[0,"&puncsp;"],[0,"&ThinSpace;"],[0,"&hairsp;"],[0,"&NegativeMediumSpace;"],[0,"&zwnj;"],[0,"&zwj;"],[0,"&lrm;"],[0,"&rlm;"],[0,"&dash;"],[2,"&ndash;"],[0,"&mdash;"],[0,"&horbar;"],[0,"&Verbar;"],[1,"&lsquo;"],[0,"&CloseCurlyQuote;"],[0,"&lsquor;"],[1,"&ldquo;"],[0,"&CloseCurlyDoubleQuote;"],[0,"&bdquo;"],[1,"&dagger;"],[0,"&Dagger;"],[0,"&bull;"],[2,"&nldr;"],[0,"&hellip;"],[9,"&permil;"],[0,"&pertenk;"],[0,"&prime;"],[0,"&Prime;"],[0,"&tprime;"],[0,"&backprime;"],[3,"&lsaquo;"],[0,"&rsaquo;"],[3,"&oline;"],[2,"&caret;"],[1,"&hybull;"],[0,"&frasl;"],[10,"&bsemi;"],[7,"&qprime;"],[7,{v:"&MediumSpace;",n:8202,o:"&ThickSpace;"}],[0,"&NoBreak;"],[0,"&af;"],[0,"&InvisibleTimes;"],[0,"&ic;"],[72,"&euro;"],[46,"&tdot;"],[0,"&DotDot;"],[37,"&complexes;"],[2,"&incare;"],[4,"&gscr;"],[0,"&hamilt;"],[0,"&Hfr;"],[0,"&Hopf;"],[0,"&planckh;"],[0,"&hbar;"],[0,"&imagline;"],[0,"&Ifr;"],[0,"&lagran;"],[0,"&ell;"],[1,"&naturals;"],[0,"&numero;"],[0,"&copysr;"],[0,"&weierp;"],[0,"&Popf;"],[0,"&Qopf;"],[0,"&realine;"],[0,"&real;"],[0,"&reals;"],[0,"&rx;"],[3,"&trade;"],[1,"&integers;"],[2,"&mho;"],[0,"&zeetrf;"],[0,"&iiota;"],[2,"&bernou;"],[0,"&Cayleys;"],[1,"&escr;"],[0,"&Escr;"],[0,"&Fouriertrf;"],[1,"&Mellintrf;"],[0,"&order;"],[0,"&alefsym;"],[0,"&beth;"],[0,"&gimel;"],[0,"&daleth;"],[12,"&CapitalDifferentialD;"],[0,"&dd;"],[0,"&ee;"],[0,"&ii;"],[10,"&frac13;"],[0,"&frac23;"],[0,"&frac15;"],[0,"&frac25;"],[0,"&frac35;"],[0,"&frac45;"],[0,"&frac16;"],[0,"&frac56;"],[0,"&frac18;"],[0,"&frac38;"],[0,"&frac58;"],[0,"&frac78;"],[49,"&larr;"],[0,"&ShortUpArrow;"],[0,"&rarr;"],[0,"&darr;"],[0,"&harr;"],[0,"&updownarrow;"],[0,"&nwarr;"],[0,"&nearr;"],[0,"&LowerRightArrow;"],[0,"&LowerLeftArrow;"],[0,"&nlarr;"],[0,"&nrarr;"],[1,{v:"&rarrw;",n:824,o:"&nrarrw;"}],[0,"&Larr;"],[0,"&Uarr;"],[0,"&Rarr;"],[0,"&Darr;"],[0,"&larrtl;"],[0,"&rarrtl;"],[0,"&LeftTeeArrow;"],[0,"&mapstoup;"],[0,"&map;"],[0,"&DownTeeArrow;"],[1,"&hookleftarrow;"],[0,"&hookrightarrow;"],[0,"&larrlp;"],[0,"&looparrowright;"],[0,"&harrw;"],[0,"&nharr;"],[1,"&lsh;"],[0,"&rsh;"],[0,"&ldsh;"],[0,"&rdsh;"],[1,"&crarr;"],[0,"&cularr;"],[0,"&curarr;"],[2,"&circlearrowleft;"],[0,"&circlearrowright;"],[0,"&leftharpoonup;"],[0,"&DownLeftVector;"],[0,"&RightUpVector;"],[0,"&LeftUpVector;"],[0,"&rharu;"],[0,"&DownRightVector;"],[0,"&dharr;"],[0,"&dharl;"],[0,"&RightArrowLeftArrow;"],[0,"&udarr;"],[0,"&LeftArrowRightArrow;"],[0,"&leftleftarrows;"],[0,"&upuparrows;"],[0,"&rightrightarrows;"],[0,"&ddarr;"],[0,"&leftrightharpoons;"],[0,"&Equilibrium;"],[0,"&nlArr;"],[0,"&nhArr;"],[0,"&nrArr;"],[0,"&DoubleLeftArrow;"],[0,"&DoubleUpArrow;"],[0,"&DoubleRightArrow;"],[0,"&dArr;"],[0,"&DoubleLeftRightArrow;"],[0,"&DoubleUpDownArrow;"],[0,"&nwArr;"],[0,"&neArr;"],[0,"&seArr;"],[0,"&swArr;"],[0,"&lAarr;"],[0,"&rAarr;"],[1,"&zigrarr;"],[6,"&larrb;"],[0,"&rarrb;"],[15,"&DownArrowUpArrow;"],[7,"&loarr;"],[0,"&roarr;"],[0,"&hoarr;"],[0,"&forall;"],[0,"&comp;"],[0,{v:"&part;",n:824,o:"&npart;"}],[0,"&exist;"],[0,"&nexist;"],[0,"&empty;"],[1,"&Del;"],[0,"&Element;"],[0,"&NotElement;"],[1,"&ni;"],[0,"&notni;"],[2,"&prod;"],[0,"&coprod;"],[0,"&sum;"],[0,"&minus;"],[0,"&MinusPlus;"],[0,"&dotplus;"],[1,"&Backslash;"],[0,"&lowast;"],[0,"&compfn;"],[1,"&radic;"],[2,"&prop;"],[0,"&infin;"],[0,"&angrt;"],[0,{v:"&ang;",n:8402,o:"&nang;"}],[0,"&angmsd;"],[0,"&angsph;"],[0,"&mid;"],[0,"&nmid;"],[0,"&DoubleVerticalBar;"],[0,"&NotDoubleVerticalBar;"],[0,"&and;"],[0,"&or;"],[0,{v:"&cap;",n:65024,o:"&caps;"}],[0,{v:"&cup;",n:65024,o:"&cups;"}],[0,"&int;"],[0,"&Int;"],[0,"&iiint;"],[0,"&conint;"],[0,"&Conint;"],[0,"&Cconint;"],[0,"&cwint;"],[0,"&ClockwiseContourIntegral;"],[0,"&awconint;"],[0,"&there4;"],[0,"&becaus;"],[0,"&ratio;"],[0,"&Colon;"],[0,"&dotminus;"],[1,"&mDDot;"],[0,"&homtht;"],[0,{v:"&sim;",n:8402,o:"&nvsim;"}],[0,{v:"&backsim;",n:817,o:"&race;"}],[0,{v:"&ac;",n:819,o:"&acE;"}],[0,"&acd;"],[0,"&VerticalTilde;"],[0,"&NotTilde;"],[0,{v:"&eqsim;",n:824,o:"&nesim;"}],[0,"&sime;"],[0,"&NotTildeEqual;"],[0,"&cong;"],[0,"&simne;"],[0,"&ncong;"],[0,"&ap;"],[0,"&nap;"],[0,"&ape;"],[0,{v:"&apid;",n:824,o:"&napid;"}],[0,"&backcong;"],[0,{v:"&asympeq;",n:8402,o:"&nvap;"}],[0,{v:"&bump;",n:824,o:"&nbump;"}],[0,{v:"&bumpe;",n:824,o:"&nbumpe;"}],[0,{v:"&doteq;",n:824,o:"&nedot;"}],[0,"&doteqdot;"],[0,"&efDot;"],[0,"&erDot;"],[0,"&Assign;"],[0,"&ecolon;"],[0,"&ecir;"],[0,"&circeq;"],[1,"&wedgeq;"],[0,"&veeeq;"],[1,"&triangleq;"],[2,"&equest;"],[0,"&ne;"],[0,{v:"&Congruent;",n:8421,o:"&bnequiv;"}],[0,"&nequiv;"],[1,{v:"&le;",n:8402,o:"&nvle;"}],[0,{v:"&ge;",n:8402,o:"&nvge;"}],[0,{v:"&lE;",n:824,o:"&nlE;"}],[0,{v:"&gE;",n:824,o:"&ngE;"}],[0,{v:"&lnE;",n:65024,o:"&lvertneqq;"}],[0,{v:"&gnE;",n:65024,o:"&gvertneqq;"}],[0,{v:"&ll;",n:new Map(Z([[824,"&nLtv;"],[7577,"&nLt;"]]))}],[0,{v:"&gg;",n:new Map(Z([[824,"&nGtv;"],[7577,"&nGt;"]]))}],[0,"&between;"],[0,"&NotCupCap;"],[0,"&nless;"],[0,"&ngt;"],[0,"&nle;"],[0,"&nge;"],[0,"&lesssim;"],[0,"&GreaterTilde;"],[0,"&nlsim;"],[0,"&ngsim;"],[0,"&LessGreater;"],[0,"&gl;"],[0,"&NotLessGreater;"],[0,"&NotGreaterLess;"],[0,"&pr;"],[0,"&sc;"],[0,"&prcue;"],[0,"&sccue;"],[0,"&PrecedesTilde;"],[0,{v:"&scsim;",n:824,o:"&NotSucceedsTilde;"}],[0,"&NotPrecedes;"],[0,"&NotSucceeds;"],[0,{v:"&sub;",n:8402,o:"&NotSubset;"}],[0,{v:"&sup;",n:8402,o:"&NotSuperset;"}],[0,"&nsub;"],[0,"&nsup;"],[0,"&sube;"],[0,"&supe;"],[0,"&NotSubsetEqual;"],[0,"&NotSupersetEqual;"],[0,{v:"&subne;",n:65024,o:"&varsubsetneq;"}],[0,{v:"&supne;",n:65024,o:"&varsupsetneq;"}],[1,"&cupdot;"],[0,"&UnionPlus;"],[0,{v:"&sqsub;",n:824,o:"&NotSquareSubset;"}],[0,{v:"&sqsup;",n:824,o:"&NotSquareSuperset;"}],[0,"&sqsube;"],[0,"&sqsupe;"],[0,{v:"&sqcap;",n:65024,o:"&sqcaps;"}],[0,{v:"&sqcup;",n:65024,o:"&sqcups;"}],[0,"&CirclePlus;"],[0,"&CircleMinus;"],[0,"&CircleTimes;"],[0,"&osol;"],[0,"&CircleDot;"],[0,"&circledcirc;"],[0,"&circledast;"],[1,"&circleddash;"],[0,"&boxplus;"],[0,"&boxminus;"],[0,"&boxtimes;"],[0,"&dotsquare;"],[0,"&RightTee;"],[0,"&dashv;"],[0,"&DownTee;"],[0,"&bot;"],[1,"&models;"],[0,"&DoubleRightTee;"],[0,"&Vdash;"],[0,"&Vvdash;"],[0,"&VDash;"],[0,"&nvdash;"],[0,"&nvDash;"],[0,"&nVdash;"],[0,"&nVDash;"],[0,"&prurel;"],[1,"&LeftTriangle;"],[0,"&RightTriangle;"],[0,{v:"&LeftTriangleEqual;",n:8402,o:"&nvltrie;"}],[0,{v:"&RightTriangleEqual;",n:8402,o:"&nvrtrie;"}],[0,"&origof;"],[0,"&imof;"],[0,"&multimap;"],[0,"&hercon;"],[0,"&intcal;"],[0,"&veebar;"],[1,"&barvee;"],[0,"&angrtvb;"],[0,"&lrtri;"],[0,"&bigwedge;"],[0,"&bigvee;"],[0,"&bigcap;"],[0,"&bigcup;"],[0,"&diam;"],[0,"&sdot;"],[0,"&sstarf;"],[0,"&divideontimes;"],[0,"&bowtie;"],[0,"&ltimes;"],[0,"&rtimes;"],[0,"&leftthreetimes;"],[0,"&rightthreetimes;"],[0,"&backsimeq;"],[0,"&curlyvee;"],[0,"&curlywedge;"],[0,"&Sub;"],[0,"&Sup;"],[0,"&Cap;"],[0,"&Cup;"],[0,"&fork;"],[0,"&epar;"],[0,"&lessdot;"],[0,"&gtdot;"],[0,{v:"&Ll;",n:824,o:"&nLl;"}],[0,{v:"&Gg;",n:824,o:"&nGg;"}],[0,{v:"&leg;",n:65024,o:"&lesg;"}],[0,{v:"&gel;",n:65024,o:"&gesl;"}],[2,"&cuepr;"],[0,"&cuesc;"],[0,"&NotPrecedesSlantEqual;"],[0,"&NotSucceedsSlantEqual;"],[0,"&NotSquareSubsetEqual;"],[0,"&NotSquareSupersetEqual;"],[2,"&lnsim;"],[0,"&gnsim;"],[0,"&precnsim;"],[0,"&scnsim;"],[0,"&nltri;"],[0,"&NotRightTriangle;"],[0,"&nltrie;"],[0,"&NotRightTriangleEqual;"],[0,"&vellip;"],[0,"&ctdot;"],[0,"&utdot;"],[0,"&dtdot;"],[0,"&disin;"],[0,"&isinsv;"],[0,"&isins;"],[0,{v:"&isindot;",n:824,o:"&notindot;"}],[0,"&notinvc;"],[0,"&notinvb;"],[1,{v:"&isinE;",n:824,o:"&notinE;"}],[0,"&nisd;"],[0,"&xnis;"],[0,"&nis;"],[0,"&notnivc;"],[0,"&notnivb;"],[6,"&barwed;"],[0,"&Barwed;"],[1,"&lceil;"],[0,"&rceil;"],[0,"&LeftFloor;"],[0,"&rfloor;"],[0,"&drcrop;"],[0,"&dlcrop;"],[0,"&urcrop;"],[0,"&ulcrop;"],[0,"&bnot;"],[1,"&profline;"],[0,"&profsurf;"],[1,"&telrec;"],[0,"&target;"],[5,"&ulcorn;"],[0,"&urcorn;"],[0,"&dlcorn;"],[0,"&drcorn;"],[2,"&frown;"],[0,"&smile;"],[9,"&cylcty;"],[0,"&profalar;"],[7,"&topbot;"],[6,"&ovbar;"],[1,"&solbar;"],[60,"&angzarr;"],[51,"&lmoustache;"],[0,"&rmoustache;"],[2,"&OverBracket;"],[0,"&bbrk;"],[0,"&bbrktbrk;"],[37,"&OverParenthesis;"],[0,"&UnderParenthesis;"],[0,"&OverBrace;"],[0,"&UnderBrace;"],[2,"&trpezium;"],[4,"&elinters;"],[59,"&blank;"],[164,"&circledS;"],[55,"&boxh;"],[1,"&boxv;"],[9,"&boxdr;"],[3,"&boxdl;"],[3,"&boxur;"],[3,"&boxul;"],[3,"&boxvr;"],[7,"&boxvl;"],[7,"&boxhd;"],[7,"&boxhu;"],[7,"&boxvh;"],[19,"&boxH;"],[0,"&boxV;"],[0,"&boxdR;"],[0,"&boxDr;"],[0,"&boxDR;"],[0,"&boxdL;"],[0,"&boxDl;"],[0,"&boxDL;"],[0,"&boxuR;"],[0,"&boxUr;"],[0,"&boxUR;"],[0,"&boxuL;"],[0,"&boxUl;"],[0,"&boxUL;"],[0,"&boxvR;"],[0,"&boxVr;"],[0,"&boxVR;"],[0,"&boxvL;"],[0,"&boxVl;"],[0,"&boxVL;"],[0,"&boxHd;"],[0,"&boxhD;"],[0,"&boxHD;"],[0,"&boxHu;"],[0,"&boxhU;"],[0,"&boxHU;"],[0,"&boxvH;"],[0,"&boxVh;"],[0,"&boxVH;"],[19,"&uhblk;"],[3,"&lhblk;"],[3,"&block;"],[8,"&blk14;"],[0,"&blk12;"],[0,"&blk34;"],[13,"&square;"],[8,"&blacksquare;"],[0,"&EmptyVerySmallSquare;"],[1,"&rect;"],[0,"&marker;"],[2,"&fltns;"],[1,"&bigtriangleup;"],[0,"&blacktriangle;"],[0,"&triangle;"],[2,"&blacktriangleright;"],[0,"&rtri;"],[3,"&bigtriangledown;"],[0,"&blacktriangledown;"],[0,"&dtri;"],[2,"&blacktriangleleft;"],[0,"&ltri;"],[6,"&loz;"],[0,"&cir;"],[32,"&tridot;"],[2,"&bigcirc;"],[8,"&ultri;"],[0,"&urtri;"],[0,"&lltri;"],[0,"&EmptySmallSquare;"],[0,"&FilledSmallSquare;"],[8,"&bigstar;"],[0,"&star;"],[7,"&phone;"],[49,"&female;"],[1,"&male;"],[29,"&spades;"],[2,"&clubs;"],[1,"&hearts;"],[0,"&diamondsuit;"],[3,"&sung;"],[2,"&flat;"],[0,"&natural;"],[0,"&sharp;"],[163,"&check;"],[3,"&cross;"],[8,"&malt;"],[21,"&sext;"],[33,"&VerticalSeparator;"],[25,"&lbbrk;"],[0,"&rbbrk;"],[84,"&bsolhsub;"],[0,"&suphsol;"],[28,"&LeftDoubleBracket;"],[0,"&RightDoubleBracket;"],[0,"&lang;"],[0,"&rang;"],[0,"&Lang;"],[0,"&Rang;"],[0,"&loang;"],[0,"&roang;"],[7,"&longleftarrow;"],[0,"&longrightarrow;"],[0,"&longleftrightarrow;"],[0,"&DoubleLongLeftArrow;"],[0,"&DoubleLongRightArrow;"],[0,"&DoubleLongLeftRightArrow;"],[1,"&longmapsto;"],[2,"&dzigrarr;"],[258,"&nvlArr;"],[0,"&nvrArr;"],[0,"&nvHarr;"],[0,"&Map;"],[6,"&lbarr;"],[0,"&bkarow;"],[0,"&lBarr;"],[0,"&dbkarow;"],[0,"&drbkarow;"],[0,"&DDotrahd;"],[0,"&UpArrowBar;"],[0,"&DownArrowBar;"],[2,"&Rarrtl;"],[2,"&latail;"],[0,"&ratail;"],[0,"&lAtail;"],[0,"&rAtail;"],[0,"&larrfs;"],[0,"&rarrfs;"],[0,"&larrbfs;"],[0,"&rarrbfs;"],[2,"&nwarhk;"],[0,"&nearhk;"],[0,"&hksearow;"],[0,"&hkswarow;"],[0,"&nwnear;"],[0,"&nesear;"],[0,"&seswar;"],[0,"&swnwar;"],[8,{v:"&rarrc;",n:824,o:"&nrarrc;"}],[1,"&cudarrr;"],[0,"&ldca;"],[0,"&rdca;"],[0,"&cudarrl;"],[0,"&larrpl;"],[2,"&curarrm;"],[0,"&cularrp;"],[7,"&rarrpl;"],[2,"&harrcir;"],[0,"&Uarrocir;"],[0,"&lurdshar;"],[0,"&ldrushar;"],[2,"&LeftRightVector;"],[0,"&RightUpDownVector;"],[0,"&DownLeftRightVector;"],[0,"&LeftUpDownVector;"],[0,"&LeftVectorBar;"],[0,"&RightVectorBar;"],[0,"&RightUpVectorBar;"],[0,"&RightDownVectorBar;"],[0,"&DownLeftVectorBar;"],[0,"&DownRightVectorBar;"],[0,"&LeftUpVectorBar;"],[0,"&LeftDownVectorBar;"],[0,"&LeftTeeVector;"],[0,"&RightTeeVector;"],[0,"&RightUpTeeVector;"],[0,"&RightDownTeeVector;"],[0,"&DownLeftTeeVector;"],[0,"&DownRightTeeVector;"],[0,"&LeftUpTeeVector;"],[0,"&LeftDownTeeVector;"],[0,"&lHar;"],[0,"&uHar;"],[0,"&rHar;"],[0,"&dHar;"],[0,"&luruhar;"],[0,"&ldrdhar;"],[0,"&ruluhar;"],[0,"&rdldhar;"],[0,"&lharul;"],[0,"&llhard;"],[0,"&rharul;"],[0,"&lrhard;"],[0,"&udhar;"],[0,"&duhar;"],[0,"&RoundImplies;"],[0,"&erarr;"],[0,"&simrarr;"],[0,"&larrsim;"],[0,"&rarrsim;"],[0,"&rarrap;"],[0,"&ltlarr;"],[1,"&gtrarr;"],[0,"&subrarr;"],[1,"&suplarr;"],[0,"&lfisht;"],[0,"&rfisht;"],[0,"&ufisht;"],[0,"&dfisht;"],[5,"&lopar;"],[0,"&ropar;"],[4,"&lbrke;"],[0,"&rbrke;"],[0,"&lbrkslu;"],[0,"&rbrksld;"],[0,"&lbrksld;"],[0,"&rbrkslu;"],[0,"&langd;"],[0,"&rangd;"],[0,"&lparlt;"],[0,"&rpargt;"],[0,"&gtlPar;"],[0,"&ltrPar;"],[3,"&vzigzag;"],[1,"&vangrt;"],[0,"&angrtvbd;"],[6,"&ange;"],[0,"&range;"],[0,"&dwangle;"],[0,"&uwangle;"],[0,"&angmsdaa;"],[0,"&angmsdab;"],[0,"&angmsdac;"],[0,"&angmsdad;"],[0,"&angmsdae;"],[0,"&angmsdaf;"],[0,"&angmsdag;"],[0,"&angmsdah;"],[0,"&bemptyv;"],[0,"&demptyv;"],[0,"&cemptyv;"],[0,"&raemptyv;"],[0,"&laemptyv;"],[0,"&ohbar;"],[0,"&omid;"],[0,"&opar;"],[1,"&operp;"],[1,"&olcross;"],[0,"&odsold;"],[1,"&olcir;"],[0,"&ofcir;"],[0,"&olt;"],[0,"&ogt;"],[0,"&cirscir;"],[0,"&cirE;"],[0,"&solb;"],[0,"&bsolb;"],[3,"&boxbox;"],[3,"&trisb;"],[0,"&rtriltri;"],[0,{v:"&LeftTriangleBar;",n:824,o:"&NotLeftTriangleBar;"}],[0,{v:"&RightTriangleBar;",n:824,o:"&NotRightTriangleBar;"}],[11,"&iinfin;"],[0,"&infintie;"],[0,"&nvinfin;"],[4,"&eparsl;"],[0,"&smeparsl;"],[0,"&eqvparsl;"],[5,"&blacklozenge;"],[8,"&RuleDelayed;"],[1,"&dsol;"],[9,"&bigodot;"],[0,"&bigoplus;"],[0,"&bigotimes;"],[1,"&biguplus;"],[1,"&bigsqcup;"],[5,"&iiiint;"],[0,"&fpartint;"],[2,"&cirfnint;"],[0,"&awint;"],[0,"&rppolint;"],[0,"&scpolint;"],[0,"&npolint;"],[0,"&pointint;"],[0,"&quatint;"],[0,"&intlarhk;"],[10,"&pluscir;"],[0,"&plusacir;"],[0,"&simplus;"],[0,"&plusdu;"],[0,"&plussim;"],[0,"&plustwo;"],[1,"&mcomma;"],[0,"&minusdu;"],[2,"&loplus;"],[0,"&roplus;"],[0,"&Cross;"],[0,"&timesd;"],[0,"&timesbar;"],[1,"&smashp;"],[0,"&lotimes;"],[0,"&rotimes;"],[0,"&otimesas;"],[0,"&Otimes;"],[0,"&odiv;"],[0,"&triplus;"],[0,"&triminus;"],[0,"&tritime;"],[0,"&intprod;"],[2,"&amalg;"],[0,"&capdot;"],[1,"&ncup;"],[0,"&ncap;"],[0,"&capand;"],[0,"&cupor;"],[0,"&cupcap;"],[0,"&capcup;"],[0,"&cupbrcap;"],[0,"&capbrcup;"],[0,"&cupcup;"],[0,"&capcap;"],[0,"&ccups;"],[0,"&ccaps;"],[2,"&ccupssm;"],[2,"&And;"],[0,"&Or;"],[0,"&andand;"],[0,"&oror;"],[0,"&orslope;"],[0,"&andslope;"],[1,"&andv;"],[0,"&orv;"],[0,"&andd;"],[0,"&ord;"],[1,"&wedbar;"],[6,"&sdote;"],[3,"&simdot;"],[2,{v:"&congdot;",n:824,o:"&ncongdot;"}],[0,"&easter;"],[0,"&apacir;"],[0,{v:"&apE;",n:824,o:"&napE;"}],[0,"&eplus;"],[0,"&pluse;"],[0,"&Esim;"],[0,"&Colone;"],[0,"&Equal;"],[1,"&ddotseq;"],[0,"&equivDD;"],[0,"&ltcir;"],[0,"&gtcir;"],[0,"&ltquest;"],[0,"&gtquest;"],[0,{v:"&leqslant;",n:824,o:"&nleqslant;"}],[0,{v:"&geqslant;",n:824,o:"&ngeqslant;"}],[0,"&lesdot;"],[0,"&gesdot;"],[0,"&lesdoto;"],[0,"&gesdoto;"],[0,"&lesdotor;"],[0,"&gesdotol;"],[0,"&lap;"],[0,"&gap;"],[0,"&lne;"],[0,"&gne;"],[0,"&lnap;"],[0,"&gnap;"],[0,"&lEg;"],[0,"&gEl;"],[0,"&lsime;"],[0,"&gsime;"],[0,"&lsimg;"],[0,"&gsiml;"],[0,"&lgE;"],[0,"&glE;"],[0,"&lesges;"],[0,"&gesles;"],[0,"&els;"],[0,"&egs;"],[0,"&elsdot;"],[0,"&egsdot;"],[0,"&el;"],[0,"&eg;"],[2,"&siml;"],[0,"&simg;"],[0,"&simlE;"],[0,"&simgE;"],[0,{v:"&LessLess;",n:824,o:"&NotNestedLessLess;"}],[0,{v:"&GreaterGreater;",n:824,o:"&NotNestedGreaterGreater;"}],[1,"&glj;"],[0,"&gla;"],[0,"&ltcc;"],[0,"&gtcc;"],[0,"&lescc;"],[0,"&gescc;"],[0,"&smt;"],[0,"&lat;"],[0,{v:"&smte;",n:65024,o:"&smtes;"}],[0,{v:"&late;",n:65024,o:"&lates;"}],[0,"&bumpE;"],[0,{v:"&PrecedesEqual;",n:824,o:"&NotPrecedesEqual;"}],[0,{v:"&sce;",n:824,o:"&NotSucceedsEqual;"}],[2,"&prE;"],[0,"&scE;"],[0,"&precneqq;"],[0,"&scnE;"],[0,"&prap;"],[0,"&scap;"],[0,"&precnapprox;"],[0,"&scnap;"],[0,"&Pr;"],[0,"&Sc;"],[0,"&subdot;"],[0,"&supdot;"],[0,"&subplus;"],[0,"&supplus;"],[0,"&submult;"],[0,"&supmult;"],[0,"&subedot;"],[0,"&supedot;"],[0,{v:"&subE;",n:824,o:"&nsubE;"}],[0,{v:"&supE;",n:824,o:"&nsupE;"}],[0,"&subsim;"],[0,"&supsim;"],[2,{v:"&subnE;",n:65024,o:"&varsubsetneqq;"}],[0,{v:"&supnE;",n:65024,o:"&varsupsetneqq;"}],[2,"&csub;"],[0,"&csup;"],[0,"&csube;"],[0,"&csupe;"],[0,"&subsup;"],[0,"&supsub;"],[0,"&subsub;"],[0,"&supsup;"],[0,"&suphsub;"],[0,"&supdsub;"],[0,"&forkv;"],[0,"&topfork;"],[0,"&mlcp;"],[8,"&Dashv;"],[1,"&Vdashl;"],[0,"&Barv;"],[0,"&vBar;"],[0,"&vBarv;"],[1,"&Vbar;"],[0,"&Not;"],[0,"&bNot;"],[0,"&rnmid;"],[0,"&cirmid;"],[0,"&midcir;"],[0,"&topcir;"],[0,"&nhpar;"],[0,"&parsim;"],[9,{v:"&parsl;",n:8421,o:"&nparsl;"}],[44343,{n:new Map(Z([[56476,"&Ascr;"],[1,"&Cscr;"],[0,"&Dscr;"],[2,"&Gscr;"],[2,"&Jscr;"],[0,"&Kscr;"],[2,"&Nscr;"],[0,"&Oscr;"],[0,"&Pscr;"],[0,"&Qscr;"],[1,"&Sscr;"],[0,"&Tscr;"],[0,"&Uscr;"],[0,"&Vscr;"],[0,"&Wscr;"],[0,"&Xscr;"],[0,"&Yscr;"],[0,"&Zscr;"],[0,"&ascr;"],[0,"&bscr;"],[0,"&cscr;"],[0,"&dscr;"],[1,"&fscr;"],[1,"&hscr;"],[0,"&iscr;"],[0,"&jscr;"],[0,"&kscr;"],[0,"&lscr;"],[0,"&mscr;"],[0,"&nscr;"],[1,"&pscr;"],[0,"&qscr;"],[0,"&rscr;"],[0,"&sscr;"],[0,"&tscr;"],[0,"&uscr;"],[0,"&vscr;"],[0,"&wscr;"],[0,"&xscr;"],[0,"&yscr;"],[0,"&zscr;"],[52,"&Afr;"],[0,"&Bfr;"],[1,"&Dfr;"],[0,"&Efr;"],[0,"&Ffr;"],[0,"&Gfr;"],[2,"&Jfr;"],[0,"&Kfr;"],[0,"&Lfr;"],[0,"&Mfr;"],[0,"&Nfr;"],[0,"&Ofr;"],[0,"&Pfr;"],[0,"&Qfr;"],[1,"&Sfr;"],[0,"&Tfr;"],[0,"&Ufr;"],[0,"&Vfr;"],[0,"&Wfr;"],[0,"&Xfr;"],[0,"&Yfr;"],[1,"&afr;"],[0,"&bfr;"],[0,"&cfr;"],[0,"&dfr;"],[0,"&efr;"],[0,"&ffr;"],[0,"&gfr;"],[0,"&hfr;"],[0,"&ifr;"],[0,"&jfr;"],[0,"&kfr;"],[0,"&lfr;"],[0,"&mfr;"],[0,"&nfr;"],[0,"&ofr;"],[0,"&pfr;"],[0,"&qfr;"],[0,"&rfr;"],[0,"&sfr;"],[0,"&tfr;"],[0,"&ufr;"],[0,"&vfr;"],[0,"&wfr;"],[0,"&xfr;"],[0,"&yfr;"],[0,"&zfr;"],[0,"&Aopf;"],[0,"&Bopf;"],[1,"&Dopf;"],[0,"&Eopf;"],[0,"&Fopf;"],[0,"&Gopf;"],[1,"&Iopf;"],[0,"&Jopf;"],[0,"&Kopf;"],[0,"&Lopf;"],[0,"&Mopf;"],[1,"&Oopf;"],[3,"&Sopf;"],[0,"&Topf;"],[0,"&Uopf;"],[0,"&Vopf;"],[0,"&Wopf;"],[0,"&Xopf;"],[0,"&Yopf;"],[1,"&aopf;"],[0,"&bopf;"],[0,"&copf;"],[0,"&dopf;"],[0,"&eopf;"],[0,"&fopf;"],[0,"&gopf;"],[0,"&hopf;"],[0,"&iopf;"],[0,"&jopf;"],[0,"&kopf;"],[0,"&lopf;"],[0,"&mopf;"],[0,"&nopf;"],[0,"&oopf;"],[0,"&popf;"],[0,"&qopf;"],[0,"&ropf;"],[0,"&sopf;"],[0,"&topf;"],[0,"&uopf;"],[0,"&vopf;"],[0,"&wopf;"],[0,"&xopf;"],[0,"&yopf;"],[0,"&zopf;"]]))}],[8906,"&fflig;"],[0,"&filig;"],[0,"&fllig;"],[0,"&ffilig;"],[0,"&ffllig;"]]));const tt=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]);function et(t,e){return function(i){let n,s=0,r="";for(;n=t.exec(i);)s!==n.index&&(r+=i.substring(s,n.index)),r+=e.get(n[0].charCodeAt(0)),s=n.index+1;return r+i.substring(s)}}var it,nt;function st(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=Array(e);i<e;i++)n[i]=t[i];return n}String.prototype.codePointAt,et(/[&<>'"]/g,tt),et(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),et(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]])),function(t){t[t.XML=0]="XML",t[t.HTML=1]="HTML"}(it||(it={})),function(t){t[t.UTF8=0]="UTF8",t[t.ASCII=1]="ASCII",t[t.Extensive=2]="Extensive",t[t.Attribute=3]="Attribute",t[t.Text=4]="Text"}(nt||(nt={}));var rt={includeSpaces:!1,renderedCss:!1,validTypes:["longtextV2","plaintext"]};function at(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];rt.includeSpaces=Boolean(e),rt.renderedCss||((t=document.createElement("style")).textContent="\n/* Learnosity essay limit by character styles */\n.lrn_widget .lrn_word_count,\n.lrn_widget .lrn_character_count {\n    margin-right: 0px;\n}\n",document.head.append(t),rt.renderedCss=!0),function(){for(var t=_.appInstance().getQuestions(),e=function(){var t,e,s=(t=n[i],e=2,function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var n,s,r,a,o=[],l=!0,c=!1;try{if(r=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=r.call(i)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(t){c=!0,s=t}finally{try{if(!l&&null!=i.return&&(a=i.return(),Object(a)!==a))return}finally{if(c)throw s}}return o}}(t,e)||function(t,e){if(t){if("string"==typeof t)return st(t,e);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?st(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=(s[0],s[1]);if(rt.validTypes.indexOf(r.type)>=0){var a=_.appInstance().question(r.response_id);_.appInstance().question(r.response_id).on("rendered",(function(){!function(t){var e;if(!(null===(e=w.activity())||void 0===e||null===(e=e.config)||void 0===e||null===(e=e.questions_api_init_options)||void 0===e||null===(e=e.labelBundle)||void 0===e?void 0:e.wordLength)){var i=t.getQuestion().response_id,n=document.getElementById(i).querySelector(".lrn_word_limit"),s=n.textContent.replace("Word","Character");n.textContent=s}}(a),w.isResuming()&&ot(a)})),a.on("changed",(function(){ot(a)}))}},i=0,n=Object.entries(t);i<n.length;i++)e()}(),_.appInstance().on("item:load",(function(t){!function(){var t,e,i,n=document.querySelector(".test-submit.item-next"),s=document.querySelector(".custom_btn.item-next");s&&!k.isResponsiveMode()&&(D.isLastItem()?(e=document.querySelector(".review-screen"),i=null===(t=w.activity())||void 0===t||null===(t=t.config)||void 0===t||null===(t=t.configuration)||void 0===t?void 0:t.decouple_submit_from_review,e&&!i&&w.region()?s.classList.add("hidden"):(n.classList.add("hidden"),s.classList.remove("hidden"))):s.classList.add("hidden"))}()}));var i=document.querySelector(".custom_btn.item-next");i?(i.classList.add("lrn_btn_blue"),function(){var t=document.querySelector(".custom_btn.item-next");t&&(t.addEventListener("click",lt),_.appInstance().on("test:panel:shown",(function(t){var e=document.querySelector(".panel-footer .test-submit");e&&e.addEventListener("click",lt)})))}()):C.A.error("No custom submit button found. Character length validation will occur, but no submission prevention.")}function ot(t){var e,i,n,s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=t.getQuestion().type,a=t.getQuestion().max_length,o=null!==(e=t.getResponse())&&void 0!==e&&e.value?null===(i=t.getResponse())||void 0===i?void 0:i.value:"",l=!0;return n="plaintext"===r?(rt.includeSpaces?o:dt(o)).length:function(t,e=W.Legacy){return J(t,e)}(rt.includeSpaces?ct(o):dt(ct(o))).length,a&&n>a&&(l=!1),s&&function(t,e,i){var n=t.getQuestion().response_id,s=document.getElementById(n),r=s.querySelector(".lrn_texteditor_editable"),a=s.querySelector(".lrn_word_count"),o=s.querySelector(".lrn_length_indicator"),l="lrn_wordcount_warning_label",c="lrn_wordcount_warning",d=i;function h(){a.textContent=d,e?(r.classList.remove(c),o.classList.remove(l)):(r.classList.add(c),o.classList.add(l))}"plaintext"===t.getQuestion().type?(d=i+" /",setTimeout((function(){h()}),10)):h()}(t,l,n),l}function lt(t){var e=_.appInstance().getQuestions(),i=[];for(var n in e){var s;rt.validTypes.includes(e[n].type)&&(null!==(s=e[n])&&void 0!==s&&s.submit_over_limit||ot(T.questionInstance(n),!1)||i.push(n))}if(i.length){C.A.warn("Invalid essay response length found."),t.preventDefault(),t.stopPropagation();for(var r=[],a=0;a<i.length;a++){var o=D.itemByResponseId(i[a]);o&&r.push(o.source.reference)}!function(t){for(var e,i,n,s,r={question:(null===(e=w.activity())||void 0===e||null===(e=e.config)||void 0===e||null===(e=e.labelBundle)||void 0===e?void 0:e.question)||"Question",submitTest:(null===(i=w.activity())||void 0===i||null===(i=i.config)||void 0===i||null===(i=i.labelBundle)||void 0===i?void 0:i.submitTest)||"Submit activity",decline:(null===(n=w.activity())||void 0===n||null===(n=n.config)||void 0===n||null===(n=n.labelBundle)||void 0===n?void 0:n.decline)||"Cancel",invalidQuestionsMessage:(null===(s=w.activity())||void 0===s||null===(s=s.config)||void 0===s||null===(s=s.labelBundle)||void 0===s?void 0:s.invalidQuestionsMessage)||"The following questions are not currently valid. Please follow the links to review"},a="\n        <p>".concat(r.invalidQuestionsMessage,"</p>\n        <ul>\n    "),o=0;o<t.length;o++)a+='<li class="link essay-limit-character-item" data-item-reference="'.concat(t[o],'">').concat(r.question,"</li>");a+="</ul>",_.assessApp().on("button:btn_essay_character_limit_cancel:clicked",(function(){k.hideDialog()})),_.appInstance().on("test:panel:show",(function(){setTimeout((function(){var t=document.querySelectorAll(".essay-limit-character-item");t&&t.forEach((function(t){var e=t.getAttribute("data-item-reference");t.addEventListener("click",(function(){_.appInstance().items().goto(e),k.hideDialog()}))}))}),500)})),k.dialog({header:r.submitTest,body:a,buttons:[{button_id:"btn_essay_character_limit_cancel",label:r.decline,is_primary:!0}]})}(r)}else!function(){var t=document.getElementById("lrn_assess_next_btn");if(t)t.click();else{var e={show_submit_confirmation:!0,show_submit_ui:!0,success:function(t){C.A.info("Submit was successful",t)},error:function(t){C.A.error("Submit has failed",t)}};_.appInstance().submit(e)}}()}function ct(t){return t.replace(/<[^>]*>/g,"").trim()}function dt(t){return t.replace(/\s+/g,"")}var ht=i(7391),ut=i.n(ht);var pt=Math.floor,ft=Math.random;const gt=function(t,e){var i,n,s=-1,r=t.length,a=r-1;for(e=void 0===e?r:e;++s<e;){var o=(n=a,(i=s)+pt(ft()*(n-i+1))),l=t[o];t[o]=t[s],t[s]=l}return t.length=e,t},mt=function(t){return gt(function(t,e){var i=-1,n=t.length;for(e||(e=Array(n));++i<n;)e[i]=t[i];return e}(t))},vt=function(t,e){return function(t,e){for(var i=-1,n=null==t?0:t.length,s=Array(n);++i<n;)s[i]=e(t[i],i,t);return s}(e,(function(e){return t[e]}))},bt="object"==typeof global&&global&&global.Object===Object&&global;var yt="object"==typeof self&&self&&self.Object===Object&&self;const _t=bt||yt||Function("return this")(),wt=_t.Symbol;var At=Object.prototype,xt=At.hasOwnProperty,Et=At.toString,St=wt?wt.toStringTag:void 0;var Tt=Object.prototype.toString;var Ct=wt?wt.toStringTag:void 0;const kt=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Ct&&Ct in Object(t)?function(t){var e=xt.call(t,St),i=t[St];try{t[St]=void 0;var n=!0}catch(t){}var s=Et.call(t);return n&&(e?t[St]=i:delete t[St]),s}(t):function(t){return Tt.call(t)}(t)},Mt=function(t){return null!=t&&"object"==typeof t},It=function(t){return Mt(t)&&"[object Arguments]"==kt(t)};var Lt=Object.prototype,Pt=Lt.hasOwnProperty,Rt=Lt.propertyIsEnumerable;const Dt=It(function(){return arguments}())?It:function(t){return Mt(t)&&Pt.call(t,"callee")&&!Rt.call(t,"callee")},Ft=Array.isArray;var Ot="object"==typeof exports&&exports&&!exports.nodeType&&exports,Nt=Ot&&"object"==typeof module&&module&&!module.nodeType&&module,Bt=Nt&&Nt.exports===Ot?_t.Buffer:void 0;const qt=(Bt?Bt.isBuffer:void 0)||function(){return!1};var Ht=/^(?:0|[1-9]\d*)$/;const zt=function(t,e){var i=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==i||"symbol"!=i&&Ht.test(t))&&t>-1&&t%1==0&&t<e},jt=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991};var Ut={};Ut["[object Float32Array]"]=Ut["[object Float64Array]"]=Ut["[object Int8Array]"]=Ut["[object Int16Array]"]=Ut["[object Int32Array]"]=Ut["[object Uint8Array]"]=Ut["[object Uint8ClampedArray]"]=Ut["[object Uint16Array]"]=Ut["[object Uint32Array]"]=!0,Ut["[object Arguments]"]=Ut["[object Array]"]=Ut["[object ArrayBuffer]"]=Ut["[object Boolean]"]=Ut["[object DataView]"]=Ut["[object Date]"]=Ut["[object Error]"]=Ut["[object Function]"]=Ut["[object Map]"]=Ut["[object Number]"]=Ut["[object Object]"]=Ut["[object RegExp]"]=Ut["[object Set]"]=Ut["[object String]"]=Ut["[object WeakMap]"]=!1;var Vt="object"==typeof exports&&exports&&!exports.nodeType&&exports,Gt=Vt&&"object"==typeof module&&module&&!module.nodeType&&module,Wt=Gt&&Gt.exports===Vt&&bt.process,$t=function(){try{return Gt&&Gt.require&&Gt.require("util").types||Wt&&Wt.binding&&Wt.binding("util")}catch(t){}}(),Xt=$t&&$t.isTypedArray;const Kt=Xt?(Yt=Xt,function(t){return Yt(t)}):function(t){return Mt(t)&&jt(t.length)&&!!Ut[kt(t)]};var Yt,Qt=Object.prototype.hasOwnProperty;const Jt=function(t,e){var i=Ft(t),n=!i&&Dt(t),s=!i&&!n&&qt(t),r=!i&&!n&&!s&&Kt(t),a=i||n||s||r,o=a?function(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}(t.length,String):[],l=o.length;for(var c in t)!e&&!Qt.call(t,c)||a&&("length"==c||s&&("offset"==c||"parent"==c)||r&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||zt(c,l))||o.push(c);return o};var Zt=Object.prototype;const te=function(t,e){return function(i){return t(e(i))}}(Object.keys,Object);var ee=Object.prototype.hasOwnProperty;const ie=function(t){if(i=(e=t)&&e.constructor,e!==("function"==typeof i&&i.prototype||Zt))return te(t);var e,i,n=[];for(var s in Object(t))ee.call(t,s)&&"constructor"!=s&&n.push(s);return n},ne=function(t){return null!=t&&jt(t.length)&&!function(t){if(!function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}(t))return!1;var e=kt(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}(t)},se=function(t){return null==t?[]:vt(t,function(t){return ne(t)?Jt(t):ie(t)}(t))},re=function(t){return gt(se(t))},ae=function(t){return(Ft(t)?mt:re)(t)};function oe(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(t){if("string"==typeof t)return le(t,e);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?le(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,s=function(){};return{s,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,o=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return a=t.done,t},e:function(t){o=!0,r=t},f:function(){try{a||null==i.return||i.return()}finally{if(o)throw r}}}}function le(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=Array(e);i<e;i++)n[i]=t[i];return n}function ce(t){var e=t||1,i="LRN Hide Alternatives:";_.appInstance().on("item:load",(function(){var t=T.questions();Object.values(t).forEach((function(t){if("mcq"===t.type)if(function(t){return!t.multiple_responses||!1===t.multiple_responses}(t))if(function(t,e){return t.options.length-e>1}(t,e))if(function(t){return"validation"in t&&t.validation}(t))if(p=t.validation,Boolean(p.valid_response.value&&p.valid_response.value.length)){var n=[],s=function(t){return t.valid_response.value}(t.validation);Object.values(s).forEach((function(e){Object.values(t.options).forEach((function(t){e!==t.value&&n.push(t.value)}))}));for(var r=[],a=0;a<e;a++)r.push(de(n,t.response_id)[a]);for(var o=document.getElementById(t.response_id).getElementsByClassName("lrn_mcqgroup"),l=0;l<o[0].children.length;l++){var c,d=o[0].children[l].getElementsByClassName("lrn-input"),h=oe(r);try{for(h.s();!(c=h.n()).done;){var u=c.value;d[0].getAttribute("value")===u&&(o[0].children[l].style.display="none")}}catch(t){h.e(t)}finally{h.f()}}}else console.info(i,"No correct answer found in validation object");else console.info(i," No validation object found");else console.info(i,"Invalid number of options to hide:",e);else console.info(i,"Only supports single response mode");var p}))}))}function de(t,e){var i=ut()(e);return ae(t.map((function(t){return{value:t,sort:i()}}))).sort((function(t,e){return t.sort-e.sort})).map((function(t){return t.value}))}var he=i(6254),ue=i(6411),pe={supportedPlatforms:["chromeos","macos","windows"]};function fe(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{global:[{bindings:{chromeos:["ctrl+shift+v"],macos:["command+shift+v"],windows:["ctrl+shift+v"]},type:"item.flag"},{bindings:{chromeos:["ctrl+alt+0"],macos:["command+option+0"],windows:["ctrl+alt+0"]},type:"masking.enable"}],item:[{bindings:{chromeos:["ctrl+shift+1","ctrl+shift+2","ctrl+shift+3","ctrl+shift+4","ctrl+shift+5","ctrl+shift+6"],macos:["command+ctrl+1","command+ctrl+2","command+ctrl+3","command+ctrl+4","command+ctrl+5","command+ctrl+6"],windows:["ctrl+shift+1","ctrl+shift+2","ctrl+shift+3","ctrl+shift+4","ctrl+shift+5","ctrl+shift+6"]},restrictTo:["mcq"],type:"response.set"},{bindings:{chromeos:["ctrl+alt+1","ctrl+alt+2","ctrl+alt+3","ctrl+alt+4","ctrl+alt+5","ctrl+alt+6"],macos:["command+option+1","command+option+2","command+option+3","command+option+4","command+option+5","command+option+6"],windows:["ctrl+alt+1","ctrl+alt+2","ctrl+alt+3","ctrl+alt+4","ctrl+alt+5","ctrl+alt+6"]},type:"response.mask"}]},e=function(){var t;return pe.supportedPlatforms.forEach((function(e){he[e]&&(t=e)})),t}();pe.bindings=t,e&&(ue.prototype.stopCallback=function(t,e,i){var n=document.activeElement;return"radio"!==n.getAttribute("type")&&"checkbox"!==n.getAttribute("type")&&!((" "+e.className+" ").indexOf(" mousetrap ")>-1)&&("INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||e.contentEditable&&"true"==e.contentEditable)},pe.bindings.hasOwnProperty("global")&&Array.isArray(pe.bindings.global)&&pe.bindings.global.forEach((function(t){if(t.hasOwnProperty("type"))switch(t.type){case"item.flag":i=t.bindings[e],ue.bind(i,(function(t,e){D.flag()}));break;case"masking.enable":!function(t){T.questionInstance().isMaskable()&&ue.bind(t,(function(t){_.appInstance().questionsApp().masking(!D.isMaskingEnabled())}))}(t.bindings[e])}var i})),pe.bindings.hasOwnProperty("item")&&Array.isArray(pe.bindings.item)&&_.appInstance().on("item:load",(function(){pe.bindings.item.forEach((function(t){if(t.hasOwnProperty("type"))switch(t.type){case"response.mask":i=t.bindings[e],n=T.questions(),s=0,n.forEach((function(t){"mcq"===t.type&&s++})),1===s&&Object.values(n).forEach((function(t){"mcq"===t.type&&ue.bind(i,(function(e,i){if(D.isMaskingEnabled()){var n,s=Number(i.at(-1));if((null===(n=t.options)||void 0===n?void 0:n.length)>=s){var r=D.itemElement().querySelectorAll(".lrn-mcq-option")[s-1].querySelector(".lrn-mask");r&&r.click()}}}))}));break;case"response.set":!function(t){var e=T.questions(),i=0;e.forEach((function(t){"mcq"===t.type&&i++})),1===i&&Object.values(e).forEach((function(e){"mcq"===e.type&&ue.bind(t,(function(t){var i;(null===(i=e.options)||void 0===i?void 0:i.length)>=t.key&&document.getElementById("".concat(e.response_id)).querySelectorAll(".lrn-input")[t.key-1].click()}))}))}(t.bindings[e])}var i,n,s}))})))}var ge="ERROR",me={_initialised:!1,magnifier:null};function ve(t){me._initialised?C.A.debug("Magnifier already initialised, ignoring run();",ge):(t||(t={zoom:4,shape:"square",width:350,height:350}),me.magnifier=new _e(t),me._initialised=!0)}function be(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"lrn__magnifier";document.querySelectorAll(".".concat(e)).forEach((function(t){t.addEventListener("click",(function(){me.magnifier.toggle()}))})),_.appInstance().on("item:load",void((t=D.itemElement().querySelectorAll("img"))&&t.forEach((function(t){t.addEventListener("click",(function(t){me.magnifier.isVisible()||me.magnifier.show(t)}))}))))}function ye(){me.magnifier.toggle()}function _e(t){var e=this;e.options=Object.assign({zoom:2,shape:"square",width:200,height:200},t),window.MutationObserver||window.WebKitMutationObserver;var i,n,s,r,a,o,l=!1,c={};function d(t,e,i){t.style.left="".concat(e,"px"),t.style.top="".concat(i,"px")}function h(t,e,i){t.style.width="".concat(e,"px"),t.style.height="".concat(i,"px")}function u(){switch(e.options.shape){case"square":h(i,e.options.width,e.options.height);break;case"circle":h(i,e.options.width,e.options.height),i.style.borderRadius="50%"}n.style.WebkitTransform=n.style.MozTransform=n.style.OTransform=n.style.MsTransform=n.style.transform="scale(".concat(e.options.zoom,")")}function p(t,e){for(var i=e;null!=i;){if(i==t)return!0;i=i.parentNode}return!1}function f(){l&&(_(),b(),A())}function g(){l&&(window.clearTimeout(r),r=window.setTimeout(f,100))}function m(){l&&g()}function v(t,i){var n=c[t];if(n)for(var s=0;s<n.length;s++)n[s].call(e,i)}function b(){var t=i.offsetLeft,s=i.offsetTop,r=document.body.scrollLeft,o=document.body.scrollTop,l=-t*e.options.zoom-r*e.options.zoom,c=-s*e.options.zoom-o*e.options.zoom;d(n,l,c),v("viewPortChanged",a)}function y(t,e){var i=t.querySelectorAll(e);if(i.length>0)for(var n=0;n<i.length;n++)i[n].parentNode.removeChild(i[n])}function _(){n.innerHTML="";var t=document.body,e=t.cloneNode(!0),s=t.style.backgroundColor;s&&i.css("background-color",s),e.style.cursor="auto",e.style.paddingTop="0px",e.setAttribute("unselectable","on");var r=t.querySelectorAll("canvas"),o=e.querySelectorAll("canvas");if(r.length>0&&r.length===o.length)for(var l=0;l<r.length;l++)o[l].getContext("2d").drawImage(r[l],0,0);y(e,"script"),y(e,"audio"),y(e,"video"),y(e,".magnifier"),v("prepareContent",e),n.appendChild(e);var c=document.body.clientWidth,d=document.body.clientHeight;h(n,c,d),v("contentUpdated",a=n.querySelector("body"))}function w(t){var e=[];if(t.getAttribute){t.getAttribute("id")&&e.push("#"+t.getAttribute("id")),t.className&&e.push("."+t.className.split(" ").join("."));for(var i=0;i<e.length;i++){var n=a.querySelectorAll(e[i]);if(1==n.length)return n[0].scrollTop=t.scrollTop,n[0].scrollLeft=t.scrollLeft,!0}}else t==document&&b();return!1}function A(t){if(l){if(t&&t.target)w(t.target);else{for(var e=[],n=document.querySelectorAll("div"),s=0;s<n.length;s++)n[s].scrollTop>0&&e.push(n[s]);for(var r=0;r<e.length;r++)p(i,e[r])||w(e[r])}v("syncScrollBars",a)}}return document.addEventListener("keydown",(function(t){"Escape"===t.key&&e.isVisible()&&e.hide()})),e.setZoom=function(t){e.options.zoom=t,u()},e.setShape=function(t,i,n){e.options.shape=t,i&&(e.options.width=i),n&&(e.options.height=n),u()},e.setWidth=function(t){e.options.width=t,u()},e.setHeight=function(t){e.options.height=t,u()},e.getZoom=function(){return e.options.zoom},e.getShape=function(){return e.options.shape},e.getWidth=function(){return e.options.width},e.getHeight=function(){return e.options.height},e.isVisible=function(){return l},e.on=function(t,e){c[t]=c[t]||[],c[t].push(e)},e.syncScrollBars=function(t){A()},e.syncContent=function(t){g()},e.hide=function(t){s&&(s.disconnect(),s=null),document.removeEventListener&&(document.removeEventListener("DOMNodeInserted",m,!1),document.removeEventListener("DOMNodeRemoved",m,!1)),n.innerHTML="",i.style.display="none",l=!1},e.show=function(t){var e,n;t?(e=t.pageX-175,n=t.pageY-175):(e=200,n=200),u(),_(),d(i,e,n),i.style.display="",b(),A(),v("initScrollBars",a),l=!0},e.toggle=function(t){e.isVisible()?e.hide():e.show()},(o=document.createElement("div")).innerHTML='<div class="magnifier" style="display: none;position: fixed;overflow: hidden;background-color: white;border: 1px solid #555;border-radius: 4px;z-index:10000;">\n                                <div class="magnifier-content" style="top: 0px;left: 0px;margin-left: 0px;margin-top: 0px;overflow: visible;position: absolute;display: block;transform-origin: left top;-moz-transform-origin: left top;-ms-transform-origin: left top;-webkit-transform-origin: left top;-o-transform-origin: left top;user-select: none;-moz-user-select: none;-webkit-user-select: none;padding-top: 0px"></div>\n                                <div class="magnifier-glass" style="position: absolute;top: 0px;left: 0px;width: 100%;height: 100%;opacity: 0.0;-ms-filter: alpha(opacity=0);background-color: white;cursor: move;"></div>\n                            </div>',i=o.querySelector(".magnifier"),document.body.appendChild(i),n=i.querySelector(".magnifier-content"),window.addEventListener&&(window.addEventListener("resize",f,!1),window.addEventListener("scroll",A,!0)),function(t,e){var i,n,s,r,a=null,o=null;function l(o){var l=o.target||o.srcElement,c=l.parentNode;if(l&&-1==e.exclude.indexOf(l.tagName.toUpperCase())&&(!c||-1==e.exclude.indexOf(c.tagName.toUpperCase()))){a=t;var d=o.pageX||o.touches[0].pageX,h=o.pageY||o.touches[0].pageY;s=a.getBoundingClientRect().left-a.offsetLeft,r=a.getBoundingClientRect().top-a.offsetTop,n=d-(a.getBoundingClientRect().left+document.body.scrollLeft),i=h-(a.getBoundingClientRect().top+document.body.scrollTop),o.preventDefault()}}function c(t){if(null!==a){var o=t.pageX||t.touches[0].pageX,l=t.pageY||t.touches[0].pageY,c=o-n-s-document.body.scrollLeft,d=l-i-r-document.body.scrollTop;!function(t,e,i){t.style.left="".concat(e,"px"),t.style.top="".concat(i,"px")}(a,c,d),e.ondrag&&e.ondrag.call(t)}}function d(t){null!==a&&(a=null)}(e=e||{}).exclude=["INPUT","TEXTAREA","SELECT","A","BUTTON"],o=e.handler?t.querySelector(e.handler):t,t.style.cursor="move",o.addEventListener("mousedown",(function(t){l(t)})),window.addEventListener("mousemove",(function(t){c(t)})),window.addEventListener("mouseup",(function(t){d()})),o.addEventListener("touchstart",(function(t){l(t)})),window.addEventListener("touchmove",(function(t){c(t)})),window.addEventListener("touchend",(function(t){d()}))}(i,{ondrag:b}),e}function we(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(t){if("string"==typeof t)return Ae(t,e);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Ae(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,s=function(){};return{s,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,o=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return a=t.done,t},e:function(t){o=!0,r=t},f:function(){try{a||null==i.return||i.return()}finally{if(o)throw r}}}}function Ae(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=Array(e);i<e;i++)n[i]=t[i];return n}var xe={chosenMask:"upperAlpha",prefixMask:{lowerAlpha:97,upperAlpha:65,numeric:49},explicitPrefixes:[],renderedCss:!1,suffix:"."};function Ee(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"upperAlpha",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".",n=arguments.length>2?arguments[2]:void 0;xe.prefixMask.hasOwnProperty(e)&&(xe.chosenMask=e),i&&"string"==typeof i&&(xe.suffix=i),n&&Array.isArray(n)&&(xe.explicitPrefixes=n),xe.renderedCss||((t=document.createElement("style")).textContent="\n/* Learnosity MCQ label prefix styles */\n.lrn-prefix-label {\n    padding-right: 15px;\n    font-weight: 500;\n}\n@media (max-width: 750px) {\n    .lrn-prefix-label {\n        padding-right: 10px;\n    }\n}\n@media (max-width: 650px) {\n    .lrn-prefix-label {\n        padding-right: 5px;\n    }\n}\n",document.head.append(t),xe.renderedCss=!0),_.appInstance().on("item:load",(function(){!function(t){var e=xe.prefixMask[xe.chosenMask],i=xe.suffix;try{var n,s=we(t);try{for(s.s();!(n=s.n()).done;){var r,a,o=n.value;if("mcq"===o.type&&"block"!==(null==o||null===(r=o.ui_style)||void 0===r?void 0:r.type)&&"horizontal-input-bottom"!==(null==o||null===(a=o.ui_style)||void 0===a?void 0:a.type)){var l,c=o.response_id,d=document.getElementById(c).querySelectorAll(".lrn-mcq-option"),h=0,u=we(d);try{for(u.s();!(l=u.n()).done;){var p=l.value,f=p.querySelector(".lrn-possible-answer").children;if(!p.querySelector(".lrn-prefix-label")){var g;g=Array.isArray(xe.explicitPrefixes)&&xe.explicitPrefixes.length&&"string"==typeof xe.explicitPrefixes[h]?xe.explicitPrefixes[h]:String.fromCharCode(e+h);for(var m=0;m<f.length;m++){var v=document.createElement("span");v.classList.add("lrn-prefix-label"),v.append("".concat(g).concat(i)),f[m].prepend(v)}h++}}}catch(t){u.e(t)}finally{u.f()}}}}catch(t){s.e(t)}finally{s.f()}}catch(t){C.A.error(t)}}(T.questions())}))}function Se(){Se=function(){return e};var t,e={},i=Object.prototype,n=i.hasOwnProperty,s=Object.defineProperty||function(t,e,i){t[e]=i.value},r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function c(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,i){return t[e]=i}}function d(t,e,i,n){var r=e&&e.prototype instanceof v?e:v,a=Object.create(r.prototype),o=new I(n||[]);return s(a,"_invoke",{value:T(t,i,o)}),a}function h(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}e.wrap=d;var u="suspendedStart",p="suspendedYield",f="executing",g="completed",m={};function v(){}function b(){}function y(){}var _={};c(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(L([])));A&&A!==i&&n.call(A,a)&&(_=A);var x=y.prototype=v.prototype=Object.create(_);function E(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function i(s,r,a,o){var l=h(t[s],t,r);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==Me(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){i("next",t,a,o)}),(function(t){i("throw",t,a,o)})):e.resolve(d).then((function(t){c.value=t,a(c)}),(function(t){return i("throw",t,a,o)}))}o(l.arg)}var r;s(this,"_invoke",{value:function(t,n){function s(){return new e((function(e,s){i(t,n,e,s)}))}return r=r?r.then(s,s):s()}})}function T(e,i,n){var s=u;return function(r,a){if(s===f)throw Error("Generator is already running");if(s===g){if("throw"===r)throw a;return{value:t,done:!0}}for(n.method=r,n.arg=a;;){var o=n.delegate;if(o){var l=C(o,n);if(l){if(l===m)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(s===u)throw s=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);s=f;var c=h(e,i,n);if("normal"===c.type){if(s=n.done?g:p,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(s=g,n.method="throw",n.arg=c.arg)}}}function C(e,i){var n=i.method,s=e.iterator[n];if(s===t)return i.delegate=null,"throw"===n&&e.iterator.return&&(i.method="return",i.arg=t,C(e,i),"throw"===i.method)||"return"!==n&&(i.method="throw",i.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var r=h(s,e.iterator,i.arg);if("throw"===r.type)return i.method="throw",i.arg=r.arg,i.delegate=null,m;var a=r.arg;return a?a.done?(i[e.resultName]=a.value,i.next=e.nextLoc,"return"!==i.method&&(i.method="next",i.arg=t),i.delegate=null,m):a:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,m)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function L(e){if(e||""===e){var i=e[a];if(i)return i.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var s=-1,r=function i(){for(;++s<e.length;)if(n.call(e,s))return i.value=e[s],i.done=!1,i;return i.value=t,i.done=!0,i};return r.next=r}}throw new TypeError(Me(e)+" is not iterable")}return b.prototype=y,s(x,"constructor",{value:y,configurable:!0}),s(y,"constructor",{value:b,configurable:!0}),b.displayName=c(y,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,c(t,l,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},E(S.prototype),c(S.prototype,o,(function(){return this})),e.AsyncIterator=S,e.async=function(t,i,n,s,r){void 0===r&&(r=Promise);var a=new S(d(t,i,n,s),r);return e.isGeneratorFunction(i)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(x),c(x,l,"Generator"),c(x,a,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),i=[];for(var n in e)i.push(n);return i.reverse(),function t(){for(;i.length;){var n=i.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=L,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(M),!e)for(var i in this)"t"===i.charAt(0)&&n.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var i=this;function s(n,s){return o.type="throw",o.arg=e,i.next=n,s&&(i.method="next",i.arg=t),!!s}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],o=a.completion;if("root"===a.tryLoc)return s("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return s(a.catchLoc,!0);if(this.prev<a.finallyLoc)return s(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return s(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return s(a.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i];if(s.tryLoc<=this.prev&&n.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var r=s;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=t,a.arg=e,r?(this.method="next",this.next=r.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),M(i),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var n=i.completion;if("throw"===n.type){var s=n.arg;M(i)}return s}}throw Error("illegal catch attempt")},delegateYield:function(e,i,n){return this.delegate={iterator:L(e),resultName:i,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function Te(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function Ce(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Te(Object(i),!0).forEach((function(e){ke(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Te(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function ke(t,e,i){return(e=function(t){var e=function(t){if("object"!=Me(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,"string");if("object"!=Me(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Me(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Me(t){return Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Me(t)}function Ie(t,e,i,n,s,r,a){try{var o=t[r](a),l=o.value}catch(t){return void i(t)}o.done?e(l):Promise.resolve(l).then(n,s)}function Le(t){return function(){var e=this,i=arguments;return new Promise((function(n,s){var r=t.apply(e,i);function a(t){Ie(r,n,s,a,o,"next",t)}function o(t){Ie(r,n,s,a,o,"throw",t)}a(void 0)}))}}var Pe={options:{iconWrapper:"top-right-wrapper",interval:3e4,message:"Internet connection is currently down.",render:!0,uri:"https://questions.learnosity.com?latest-lts"},renderedCss:!1};function Re(t){var e;Pe.renderedCss||((e=document.createElement("style")).textContent="\n/* Learnosity render network status */\n.lt__networkStatus-indicator {\n    width: 24px;\n    text-align: center;\n    position: relative;\n    top: 9px;\n}\n",document.head.append(e),Pe.renderedCss=!0),function(t){t&&"object"===Me(t)&&(Pe.options=Ce(Ce({},Pe.options),t))}(t),setInterval(De,Pe.options.interval)}function De(){return Fe.apply(this,arguments)}function Fe(){return(Fe=Le(Se().mark((function t(){var e,i,n,s;return Se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Oe();case 2:e=t.sent,i=document.querySelector(".lt__networkStatus-indicator"),Be(e),Pe.options.render&&(e?i&&i.remove():(n=document.querySelector(".".concat(Pe.options.iconWrapper)),s='<div class="lt__networkStatus-indicator pos-left" role="status" aria-live="polite" aria-atomic="true" aria-relevant="all">\n                <span title="'.concat(Pe.options.message,'" aria-hidden="true">\n                    <svg xmlns="http://www.w3.org/2000/svg" height="16px" viewBox="0 -960 960 960" width="16px" fill="#333333">\n                        <path d="M790-56 414-434q-47 11-87.5 33T254-346l-84-86q32-32 69-56t79-42l-90-90q-41 21-76.5 46.5T84-516L0-602q32-32 66.5-57.5T140-708l-84-84 56-56 736 736-58 56Zm-310-64q-42 0-71-29.5T380-220q0-42 29-71t71-29q42 0 71 29t29 71q0 41-29 70.5T480-120Zm236-238-29-29-29-29-144-144q81 8 151.5 41T790-432l-74 74Zm160-158q-77-77-178.5-120.5T480-680q-21 0-40.5 1.5T400-674L298-776q44-12 89.5-18t92.5-6q142 0 265 53t215 145l-84 86Z"/>\n                    </svg>\n                </span>\n                <span class="sr-only">').concat(Pe.options.message,"</span>\n            </div>"),n&&!i&&n.insertAdjacentHTML("afterbegin",s)));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Oe(){return Ne.apply(this,arguments)}function Ne(){return(Ne=Le(Se().mark((function t(){return Se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(Pe.options.uri,{method:"HEAD",mode:"no-cors",cache:"no-store"});case 3:return t.sent,t.abrupt("return",!0);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",!1);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function Be(t){var e=new CustomEvent(t?"LTNetworkOnline":"LTNetworkOffline");document.dispatchEvent(e)}var qe={color:"rgba(250, 170, 140, 0.5)",renderedCss:!1,zindex:99999};function He(t,e){var i,n;if(t&&"string"==typeof t&&(qe.color=t),e&&"number"==typeof e&&(qe.zindex=e),!document.querySelector(".lrn__overlay")){var s=document.createElement("div");s.classList.add("lrn__overlay"),document.querySelector("body").append(s)}qe.renderedCss||(i=document.createElement("style"),n="\n/* Learnosity page overlay styles */\n.lrn__overlay {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: ".concat(qe.color,";\n    z-index: ").concat(qe.zindex,";\n    pointer-events: none;\n}\n"),i.textContent=n,document.head.append(i),qe.renderedCss=!0)}function ze(){var t=document.querySelector(".lrn__overlay");t&&t.remove()}var je={d:(t,e)=>{for(var i in e)je.o(e,i)&&!je.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},Ue=globalThis.pdfjsLib={};je.d(Ue,{AbortException:()=>yi,AnnotationEditorLayer:()=>Kr,AnnotationEditorParamsType:()=>Ye,AnnotationEditorType:()=>Ke,AnnotationEditorUIManager:()=>un,AnnotationLayer:()=>Nr,AnnotationMode:()=>Xe,CMapCompressionType:()=>ti,ColorPicker:()=>Gr,DOMSVGFactory:()=>Hi,DrawLayer:()=>Yr,FeatureTest:()=>xi,GlobalWorkerOptions:()=>es,ImageKind:()=>Je,InvalidPDFException:()=>gi,MissingPDFException:()=>mi,OPS:()=>ei,PDFDataRangeTransport:()=>Gs,PDFDateString:()=>Qi,PDFWorker:()=>Ks,PasswordResponses:()=>ii,PermissionFlag:()=>Qe,PixelsPerInch:()=>Oi,RenderingCancelledException:()=>ji,TextLayer:()=>Fs,UnexpectedResponseException:()=>vi,Util:()=>Si,VerbosityLevel:()=>Ze,XfaLayer:()=>ar,build:()=>ir,createValidAbsoluteUrl:()=>di,fetchData:()=>Ni,getDocument:()=>js,getFilenameFromUrl:()=>Gi,getPdfFilenameFromUrl:()=>Wi,getXfaPageViewport:()=>Ji,isDataScheme:()=>Ui,isPdfFile:()=>Vi,noContextMenu:()=>Ki,normalizeUnicode:()=>ki,setLayerDimensions:()=>nn,shadow:()=>hi,version:()=>er});const Ve=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type),Ge=[1,0,0,1,0,0],We=[.001,0,0,.001,0,0],$e=1.35,Xe={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Ke={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Ye={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},Qe={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Je={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Ze={ERRORS:0,WARNINGS:1,INFOS:5},ti={NONE:0,BINARY:1},ei={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},ii={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let ni=Ze.WARNINGS;function si(t){Number.isInteger(t)&&(ni=t)}function ri(){return ni}function ai(t){ni>=Ze.INFOS&&console.log(`Info: ${t}`)}function oi(t){ni>=Ze.WARNINGS&&console.log(`Warning: ${t}`)}function li(t){throw new Error(t)}function ci(t,e){t||li(e)}function di(t,e=null,i=null){if(!t)return null;try{if(i&&"string"==typeof t){if(i.addDefaultProtocol&&t.startsWith("www.")){const e=t.match(/\./g);e?.length>=2&&(t=`http://${t}`)}if(i.tryConvertEncoding)try{t=decodeURIComponent(escape(t))}catch{}}const n=e?new URL(t,e):new URL(t);if(function(t){switch(t?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(n))return n}catch{}return null}function hi(t,e,i,n=!1){return Object.defineProperty(t,e,{value:i,enumerable:!n,configurable:!0,writable:!1}),i}const ui=function(){function t(t,e){this.message=t,this.name=e}return t.prototype=new Error,t.constructor=t,t}();class pi extends ui{constructor(t,e){super(t,"PasswordException"),this.code=e}}class fi extends ui{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class gi extends ui{constructor(t){super(t,"InvalidPDFException")}}class mi extends ui{constructor(t){super(t,"MissingPDFException")}}class vi extends ui{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class bi extends ui{constructor(t){super(t,"FormatError")}}class yi extends ui{constructor(t){super(t,"AbortException")}}function _i(t){"object"==typeof t&&void 0!==t?.length||li("Invalid argument for bytesToString");const e=t.length,i=8192;if(e<i)return String.fromCharCode.apply(null,t);const n=[];for(let s=0;s<e;s+=i){const r=Math.min(s+i,e),a=t.subarray(s,r);n.push(String.fromCharCode.apply(null,a))}return n.join("")}function wi(t){"string"!=typeof t&&li("Invalid argument for stringToBytes");const e=t.length,i=new Uint8Array(e);for(let n=0;n<e;++n)i[n]=255&t.charCodeAt(n);return i}function Ai(t){const e=Object.create(null);for(const[i,n]of t)e[i]=n;return e}class xi{static get isLittleEndian(){return hi(this,"isLittleEndian",function(){const t=new Uint8Array(4);return t[0]=1,1===new Uint32Array(t.buffer,0,1)[0]}())}static get isEvalSupported(){return hi(this,"isEvalSupported",function(){try{return new Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return hi(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}static get platform(){return"undefined"!=typeof navigator&&"string"==typeof navigator?.platform?hi(this,"platform",{isMac:navigator.platform.includes("Mac")}):hi(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){return hi(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Ei=Array.from(Array(256).keys(),(t=>t.toString(16).padStart(2,"0")));class Si{static makeHexColor(t,e,i){return`#${Ei[t]}${Ei[e]}${Ei[i]}`}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){return[t[0]*e[0]+t[1]*e[2]+e[4],t[0]*e[1]+t[1]*e[3]+e[5]]}static applyInverseTransform(t,e){const i=e[0]*e[3]-e[1]*e[2];return[(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/i,(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/i]}static getAxialAlignedBoundingBox(t,e){const i=this.applyTransform(t,e),n=this.applyTransform(t.slice(2,4),e),s=this.applyTransform([t[0],t[3]],e),r=this.applyTransform([t[2],t[1]],e);return[Math.min(i[0],n[0],s[0],r[0]),Math.min(i[1],n[1],s[1],r[1]),Math.max(i[0],n[0],s[0],r[0]),Math.max(i[1],n[1],s[1],r[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],i=t[0]*e[0]+t[1]*e[2],n=t[0]*e[1]+t[1]*e[3],s=t[2]*e[0]+t[3]*e[2],r=t[2]*e[1]+t[3]*e[3],a=(i+r)/2,o=Math.sqrt((i+r)**2-4*(i*r-s*n))/2,l=a+o||1,c=a-o||1;return[Math.sqrt(l),Math.sqrt(c)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),n=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>n)return null;const s=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),r=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return s>r?null:[i,s,n,r]}static#t(t,e,i,n,s,r,a,o,l,c){if(l<=0||l>=1)return;const d=1-l,h=l*l,u=h*l,p=d*(d*(d*t+3*l*e)+3*h*i)+u*n,f=d*(d*(d*s+3*l*r)+3*h*a)+u*o;c[0]=Math.min(c[0],p),c[1]=Math.min(c[1],f),c[2]=Math.max(c[2],p),c[3]=Math.max(c[3],f)}static#e(t,e,i,n,s,r,a,o,l,c,d,h){if(Math.abs(l)<1e-12)return void(Math.abs(c)>=1e-12&&this.#t(t,e,i,n,s,r,a,o,-d/c,h));const u=c**2-4*d*l;if(u<0)return;const p=Math.sqrt(u),f=2*l;this.#t(t,e,i,n,s,r,a,o,(-c+p)/f,h),this.#t(t,e,i,n,s,r,a,o,(-c-p)/f,h)}static bezierBoundingBox(t,e,i,n,s,r,a,o,l){return l?(l[0]=Math.min(l[0],t,a),l[1]=Math.min(l[1],e,o),l[2]=Math.max(l[2],t,a),l[3]=Math.max(l[3],e,o)):l=[Math.min(t,a),Math.min(e,o),Math.max(t,a),Math.max(e,o)],this.#e(t,i,s,a,e,n,r,o,3*(3*(i-s)-t+a),6*(t-2*i+s),3*(i-t),l),this.#e(t,i,s,a,e,n,r,o,3*(3*(n-r)-e+o),6*(e-2*n+r),3*(n-e),l),l}}let Ti=null,Ci=null;function ki(t){return Ti||(Ti=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Ci=new Map([["ﬅ","ſt"]])),t.replaceAll(Ti,((t,e,i)=>e?e.normalize("NFKC"):Ci.get(i)))}const Mi="pdfjs_internal_id_";class Ii{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,n,s){return"none"}destroy(t=!1){}}class Li{#i=!1;constructor({enableHWA:t=!1}={}){this.#i=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!this.#i})}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){li("Abstract method `_createCanvas` called.")}}class Pi{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":""),i=this.isCompressed?ti.BINARY:ti.NONE;return this._fetchData(e,i).catch((t=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)}))}_fetchData(t,e){li("Abstract method `_fetchData` called.")}}class Ri{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetchData(e).catch((t=>{throw new Error(`Unable to load font data at: ${e}`)}))}_fetchData(t){li("Abstract method `_fetchData` called.")}}class Di{create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const n=this._createSVG("svg:svg");return n.setAttribute("version","1.1"),i||(n.setAttribute("width",`${t}px`),n.setAttribute("height",`${e}px`)),n.setAttribute("preserveAspectRatio","none"),n.setAttribute("viewBox",`0 0 ${t} ${e}`),n}createElement(t){if("string"!=typeof t)throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){li("Abstract method `_createSVG` called.")}}const Fi="http://www.w3.org/2000/svg";class Oi{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Ni(t,e="text"){if(Xi(t,document.baseURI)){const i=await fetch(t);if(!i.ok)throw new Error(i.statusText);switch(e){case"arraybuffer":return i.arrayBuffer();case"blob":return i.blob();case"json":return i.json()}return i.text()}return new Promise(((i,n)=>{const s=new XMLHttpRequest;s.open("GET",t,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE)if(200!==s.status&&0!==s.status)n(new Error(s.statusText));else{switch(e){case"arraybuffer":case"blob":case"json":return void i(s.response)}i(s.responseText)}},s.send(null)}))}class Bi extends Pi{_fetchData(t,e){return Ni(t,this.isCompressed?"arraybuffer":"text").then((t=>({cMapData:t instanceof ArrayBuffer?new Uint8Array(t):wi(t),compressionType:e})))}}class qi extends Ri{_fetchData(t){return Ni(t,"arraybuffer").then((t=>new Uint8Array(t)))}}class Hi extends Di{_createSVG(t){return document.createElementNS(Fi,t)}}class zi{constructor({viewBox:t,scale:e,rotation:i,offsetX:n=0,offsetY:s=0,dontFlip:r=!1}){this.viewBox=t,this.scale=e,this.rotation=i,this.offsetX=n,this.offsetY=s;const a=(t[2]+t[0])/2,o=(t[3]+t[1])/2;let l,c,d,h,u,p,f,g;switch((i%=360)<0&&(i+=360),i){case 180:l=-1,c=0,d=0,h=1;break;case 90:l=0,c=1,d=1,h=0;break;case 270:l=0,c=-1,d=-1,h=0;break;case 0:l=1,c=0,d=0,h=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}r&&(d=-d,h=-h),0===l?(u=Math.abs(o-t[1])*e+n,p=Math.abs(a-t[0])*e+s,f=(t[3]-t[1])*e,g=(t[2]-t[0])*e):(u=Math.abs(a-t[0])*e+n,p=Math.abs(o-t[1])*e+s,f=(t[2]-t[0])*e,g=(t[3]-t[1])*e),this.transform=[l*e,c*e,d*e,h*e,u-l*e*a-d*e*o,p-c*e*a-h*e*o],this.width=f,this.height=g}get rawDims(){const{viewBox:t}=this;return hi(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:n=this.offsetY,dontFlip:s=!1}={}){return new zi({viewBox:this.viewBox.slice(),scale:t,rotation:e,offsetX:i,offsetY:n,dontFlip:s})}convertToViewportPoint(t,e){return Si.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=Si.applyTransform([t[0],t[1]],this.transform),i=Si.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){return Si.applyInverseTransform([t,e],this.transform)}}class ji extends ui{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Ui(t){const e=t.length;let i=0;for(;i<e&&""===t[i].trim();)i++;return"data:"===t.substring(i,i+5).toLowerCase()}function Vi(t){return"string"==typeof t&&/\.pdf$/i.test(t)}function Gi(t){return[t]=t.split(/[#?]/,1),t.substring(t.lastIndexOf("/")+1)}function Wi(t,e="document.pdf"){if("string"!=typeof t)return e;if(Ui(t))return oi('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,n=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(t);let s=i.exec(n[1])||i.exec(n[2])||i.exec(n[3]);if(s&&(s=s[0],s.includes("%")))try{s=i.exec(decodeURIComponent(s))[0]}catch{}return s||e}class $i{started=Object.create(null);times=[];time(t){t in this.started&&oi(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||oi(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:t}of this.times)e=Math.max(t.length,e);for(const{name:i,start:n,end:s}of this.times)t.push(`${i.padEnd(e)} ${s-n}ms\n`);return t.join("")}}function Xi(t,e){try{const{protocol:i}=e?new URL(t,e):new URL(t);return"http:"===i||"https:"===i}catch{return!1}}function Ki(t){t.preventDefault()}let Yi;class Qi{static toDateObject(t){if(!t||"string"!=typeof t)return null;Yi||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=Yi.exec(t);if(!e)return null;const i=parseInt(e[1],10);let n=parseInt(e[2],10);n=n>=1&&n<=12?n-1:0;let s=parseInt(e[3],10);s=s>=1&&s<=31?s:1;let r=parseInt(e[4],10);r=r>=0&&r<=23?r:0;let a=parseInt(e[5],10);a=a>=0&&a<=59?a:0;let o=parseInt(e[6],10);o=o>=0&&o<=59?o:0;const l=e[7]||"Z";let c=parseInt(e[8],10);c=c>=0&&c<=23?c:0;let d=parseInt(e[9],10)||0;return d=d>=0&&d<=59?d:0,"-"===l?(r+=c,a+=d):"+"===l&&(r-=c,a-=d),new Date(Date.UTC(i,n,s,r,a,o))}}function Ji(t,{scale:e=1,rotation:i=0}){const{width:n,height:s}=t.attributes.style,r=[0,0,parseInt(n),parseInt(s)];return new zi({viewBox:r,scale:e,rotation:i})}function Zi(t){if(t.startsWith("#")){const e=parseInt(t.slice(1),16);return[(16711680&e)>>16,(65280&e)>>8,255&e]}return t.startsWith("rgb(")?t.slice(4,-1).split(",").map((t=>parseInt(t))):t.startsWith("rgba(")?t.slice(5,-1).split(",").map((t=>parseInt(t))).slice(0,3):(oi(`Not a valid color format: "${t}"`),[0,0,0])}function tn(t){const{a:e,b:i,c:n,d:s,e:r,f:a}=t.getTransform();return[e,i,n,s,r,a]}function en(t){const{a:e,b:i,c:n,d:s,e:r,f:a}=t.getTransform().invertSelf();return[e,i,n,s,r,a]}function nn(t,e,i=!1,n=!0){if(e instanceof zi){const{pageWidth:n,pageHeight:s}=e.rawDims,{style:r}=t,a=xi.isCSSRoundSupported,o=`var(--scale-factor) * ${n}px`,l=`var(--scale-factor) * ${s}px`,c=a?`round(${o}, 1px)`:`calc(${o})`,d=a?`round(${l}, 1px)`:`calc(${l})`;i&&e.rotation%180!=0?(r.width=d,r.height=c):(r.width=c,r.height=d)}n&&t.setAttribute("data-main-rotation",e.rotation)}class sn{#n=null;#s=null;#r;#a=null;#o=null;static#l=null;constructor(t){this.#r=t,sn.#l||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"})}render(){const t=this.#n=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const e=this.#r._uiManager._signal;t.addEventListener("contextmenu",Ki,{signal:e}),t.addEventListener("pointerdown",sn.#c,{signal:e});const i=this.#a=document.createElement("div");i.className="buttons",t.append(i);const n=this.#r.toolbarPosition;if(n){const{style:e}=t,i="ltr"===this.#r._uiManager.direction?1-n[0]:n[0];e.insetInlineEnd=100*i+"%",e.top=`calc(${100*n[1]}% + var(--editor-toolbar-vert-offset))`}return this.#d(),t}static#c(t){t.stopPropagation()}#h(t){this.#r._focusEventsAllowed=!1,t.preventDefault(),t.stopPropagation()}#u(t){this.#r._focusEventsAllowed=!0,t.preventDefault(),t.stopPropagation()}#p(t){const e=this.#r._uiManager._signal;t.addEventListener("focusin",this.#h.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#u.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Ki,{signal:e})}hide(){this.#n.classList.add("hidden"),this.#s?.hideDropdown()}show(){this.#n.classList.remove("hidden"),this.#o?.shown()}#d(){const{editorType:t,_uiManager:e}=this.#r,i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",sn.#l[t]),this.#p(i),i.addEventListener("click",(t=>{e.delete()}),{signal:e._signal}),this.#a.append(i)}get#f(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#p(e),this.#a.prepend(e,this.#f),this.#o=t}addColorPicker(t){this.#s=t;const e=t.renderButton();this.#p(e),this.#a.prepend(e,this.#f)}remove(){this.#n.remove(),this.#s?.destroy(),this.#s=null}}class rn{#a=null;#n=null;#g;constructor(t){this.#g=t}#m(){const t=this.#n=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Ki,{signal:this.#g._signal});const e=this.#a=document.createElement("div");return e.className="buttons",t.append(e),this.#v(),t}#b(t,e){let i=0,n=0;for(const s of t){const t=s.y+s.height;if(t<i)continue;const r=s.x+(e?s.width:0);t>i?(n=r,i=t):e?r>n&&(n=r):r<n&&(n=r)}return[e?1-n:n,i]}show(t,e,i){const[n,s]=this.#b(e,i),{style:r}=this.#n||=this.#m();t.append(this.#n),r.insetInlineEnd=100*n+"%",r.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){this.#n.remove()}#v(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=this.#g._signal;t.addEventListener("contextmenu",Ki,{signal:i}),t.addEventListener("click",(()=>{this.#g.highlightSelection("floating_button")}),{signal:i}),this.#a.append(t)}}function an(t,e,i){for(const n of i)e.addEventListener(n,t[n].bind(t))}class on{#y=0;get id(){return"pdfjs_internal_editor_"+this.#y++}}class ln{#_=function(){if("undefined"!=typeof crypto&&"function"==typeof crypto?.randomUUID)return crypto.randomUUID();const t=new Uint8Array(32);if("undefined"!=typeof crypto&&"function"==typeof crypto?.getRandomValues)crypto.getRandomValues(t);else for(let e=0;e<32;e++)t[e]=Math.floor(255*Math.random());return _i(t)}();#y=0;#w=null;static get _isSVGFittingCanvas(){const t=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',hi(this,"_isSVGFittingCanvas",e.decode().then((()=>(t.drawImage(e,0,0,1,1,0,0,1,3),0===new Uint32Array(t.getImageData(0,0,1,1).data.buffer)[0]))))}async#A(t,e){this.#w||=new Map;let i=this.#w.get(t);if(null===i)return null;if(i?.bitmap)return i.refCounter+=1,i;try{let t;if(i||={bitmap:null,id:`image_${this.#_}_${this.#y++}`,refCounter:0,isSvg:!1},"string"==typeof e?(i.url=e,t=await Ni(e,"blob")):t=i.file=e,"image/svg+xml"===t.type){const e=ln._isSVGFittingCanvas,n=new FileReader,s=new Image,r=new Promise(((t,r)=>{s.onload=()=>{i.bitmap=s,i.isSvg=!0,t()},n.onload=async()=>{const t=i.svgUrl=n.result;s.src=await e?`${t}#svgView(preserveAspectRatio(none))`:t},s.onerror=n.onerror=r}));n.readAsDataURL(t),await r}else i.bitmap=await createImageBitmap(t);i.refCounter=1}catch(t){console.error(t),i=null}return this.#w.set(t,i),i&&this.#w.set(i.id,i),i}async getFromFile(t){const{lastModified:e,name:i,size:n,type:s}=t;return this.#A(`${e}_${i}_${n}_${s}`,t)}async getFromUrl(t){return this.#A(t,t)}async getFromId(t){this.#w||=new Map;const e=this.#w.get(t);return e?e.bitmap?(e.refCounter+=1,e):e.file?this.getFromFile(e.file):this.getFromUrl(e.url):null}getSvgUrl(t){const e=this.#w.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#w||=new Map;const e=this.#w.get(t);e&&(e.refCounter-=1,0===e.refCounter&&(e.bitmap=null))}isValidId(t){return t.startsWith(`image_${this.#_}_`)}}class cn{#x=[];#E=!1;#S;#T=-1;constructor(t=128){this.#S=t}add({cmd:t,undo:e,post:i,mustExec:n,type:s=NaN,overwriteIfSameType:r=!1,keepUndo:a=!1}){if(n&&t(),this.#E)return;const o={cmd:t,undo:e,post:i,type:s};if(-1===this.#T)return this.#x.length>0&&(this.#x.length=0),this.#T=0,void this.#x.push(o);if(r&&this.#x[this.#T].type===s)return a&&(o.undo=this.#x[this.#T].undo),void(this.#x[this.#T]=o);const l=this.#T+1;l===this.#S?this.#x.splice(0,1):(this.#T=l,l<this.#x.length&&this.#x.splice(l)),this.#x.push(o)}undo(){if(-1===this.#T)return;this.#E=!0;const{undo:t,post:e}=this.#x[this.#T];t(),e?.(),this.#E=!1,this.#T-=1}redo(){if(this.#T<this.#x.length-1){this.#T+=1,this.#E=!0;const{cmd:t,post:e}=this.#x[this.#T];t(),e?.(),this.#E=!1}}hasSomethingToUndo(){return-1!==this.#T}hasSomethingToRedo(){return this.#T<this.#x.length-1}destroy(){this.#x=null}}class dn{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=xi.platform;for(const[i,n,s={}]of t)for(const t of i){const i=t.startsWith("mac+");e&&i?(this.callbacks.set(t.slice(4),{callback:n,options:s}),this.allKeys.add(t.split("+").at(-1))):e||i||(this.callbacks.set(t,{callback:n,options:s}),this.allKeys.add(t.split("+").at(-1)))}}#C(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(this.#C(e));if(!i)return;const{callback:n,options:{bubbles:s=!1,args:r=[],checker:a=null}}=i;a&&!a(t,e)||(n.bind(t,...r,e)(),s||(e.stopPropagation(),e.preventDefault()))}}class hn{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return function(t){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const i of t.keys()){e.style.color=i;const n=window.getComputedStyle(e).color;t.set(i,Zi(n))}e.remove()}(t),hi(this,"_colors",t)}convert(t){const e=Zi(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[t,i]of this._colors)if(i.every(((t,i)=>t===e[i])))return hn._colorsMapping.get(t);return e}getHexCode(t){const e=this._colors.get(t);return e?Si.makeHexColor(...e):t}}class un{#k=new AbortController;#M=null;#I=new Map;#L=new Map;#P=null;#R=null;#D=null;#F=new cn;#O=null;#N=0;#B=new Set;#q=null;#H=null;#z=new Set;#j=!1;#U=!1;#V=!1;#G=null;#W=null;#$=null;#X=null;#K=!1;#Y=null;#Q=new on;#J=!1;#Z=!1;#tt=null;#et=null;#it=null;#nt=null;#st=Ke.NONE;#rt=new Set;#at=null;#ot=null;#lt=null;#ct={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#dt=[0,0];#ht=null;#ut=null;#pt=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=un.prototype,e=t=>t.#ut.contains(document.activeElement)&&"BUTTON"!==document.activeElement.tagName&&t.hasSomethingToControl(),i=(t,{target:e})=>{if(e instanceof HTMLInputElement){const{type:t}=e;return"text"!==t&&"number"!==t}return!0},n=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return hi(this,"_keyboardManager",new dn([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(t,{target:e})=>!(e instanceof HTMLButtonElement)&&t.#ut.contains(e)&&!t.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(t,{target:e})=>!(e instanceof HTMLButtonElement)&&t.#ut.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-n,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[n,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-n],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,n],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:e}]]))}constructor(t,e,i,n,s,r,a,o,l,c,d){const h=this._signal=this.#k.signal;this.#ut=t,this.#pt=e,this.#P=i,this._eventBus=n,n._on("editingaction",this.onEditingAction.bind(this),{signal:h}),n._on("pagechanging",this.onPageChanging.bind(this),{signal:h}),n._on("scalechanging",this.onScaleChanging.bind(this),{signal:h}),n._on("rotationchanging",this.onRotationChanging.bind(this),{signal:h}),n._on("setpreference",this.onSetPreference.bind(this),{signal:h}),n._on("switchannotationeditorparams",(t=>this.updateParams(t.type,t.value)),{signal:h}),this.#ft(),this.#gt(),this.#mt(),this.#R=s.annotationStorage,this.#G=s.filterFactory,this.#ot=r,this.#X=a||null,this.#j=o,this.#U=l,this.#V=c,this.#nt=d||null,this.viewParameters={realScale:Oi.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}destroy(){this.#k?.abort(),this.#k=null,this._signal=null;for(const t of this.#L.values())t.destroy();this.#L.clear(),this.#I.clear(),this.#z.clear(),this.#M=null,this.#rt.clear(),this.#F.destroy(),this.#P?.destroy(),this.#Y?.hide(),this.#Y=null,this.#W&&(clearTimeout(this.#W),this.#W=null),this.#ht&&(clearTimeout(this.#ht),this.#ht=null)}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#nt}get useNewAltTextFlow(){return this.#U}get useNewAltTextWhenAddingImage(){return this.#V}get hcmFilter(){return hi(this,"hcmFilter",this.#ot?this.#G.addHCMFilter(this.#ot.foreground,this.#ot.background):"none")}get direction(){return hi(this,"direction",getComputedStyle(this.#ut).direction)}get highlightColors(){return hi(this,"highlightColors",this.#X?new Map(this.#X.split(",").map((t=>t.split("=").map((t=>t.trim()))))):null)}get highlightColorNames(){return hi(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,(t=>t.reverse()))):null)}setMainHighlightColorPicker(t){this.#it=t}editAltText(t,e=!1){this.#P?.editAltText(this,t,e)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){"enableNewAltTextWhenAddingImage"===t&&(this.#V=e)}onPageChanging({pageNumber:t}){this.#N=t-1}focusMainContainer(){this.#ut.focus()}findParent(t,e){for(const i of this.#L.values()){const{x:n,y:s,width:r,height:a}=i.div.getBoundingClientRect();if(t>=n&&t<=n+r&&e>=s&&e<=s+a)return i}return null}disableUserSelect(t=!1){this.#pt.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#z.add(t)}removeShouldRescale(t){this.#z.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*Oi.PDF_TO_CSS_UNITS;for(const t of this.#z)t.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#vt({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#bt(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const e of this.#L.values())if(e.hasTextLayer(t))return e;return null}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:i,anchorOffset:n,focusNode:s,focusOffset:r}=e,a=e.toString(),o=this.#vt(e).closest(".textLayer"),l=this.getSelectionBoxes(o);if(!l)return;e.empty();const c=this.#bt(o),d=this.#st===Ke.NONE,h=()=>{c?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:l,anchorNode:i,anchorOffset:n,focusNode:s,focusOffset:r,text:a}),d&&this.showAllEditors("highlight",!0,!0)};d?this.switchToMode(Ke.HIGHLIGHT,h):h()}#yt(){const t=document.getSelection();if(!t||t.isCollapsed)return;const e=this.#vt(t).closest(".textLayer"),i=this.getSelectionBoxes(e);i&&(this.#Y||=new rn(this),this.#Y.show(e,i,"ltr"===this.direction))}addToAnnotationStorage(t){t.isEmpty()||!this.#R||this.#R.has(t.id)||this.#R.setValue(t.id,t)}#_t(){const t=document.getSelection();if(!t||t.isCollapsed)return void(this.#at&&(this.#Y?.hide(),this.#at=null,this.#wt({hasSelectedText:!1})));const{anchorNode:e}=t;if(e===this.#at)return;const i=this.#vt(t).closest(".textLayer");if(i){if(this.#Y?.hide(),this.#at=e,this.#wt({hasSelectedText:!0}),(this.#st===Ke.HIGHLIGHT||this.#st===Ke.NONE)&&(this.#st===Ke.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#K=this.isShiftKeyDown,!this.isShiftKeyDown)){const t=this.#st===Ke.HIGHLIGHT?this.#bt(i):null;t?.toggleDrawing();const e=new AbortController,n=this.combinedSignal(e),s=i=>{"pointerup"===i.type&&0!==i.button||(e.abort(),t?.toggleDrawing(!0),"pointerup"===i.type&&this.#At("main_toolbar"))};window.addEventListener("pointerup",s,{signal:n}),window.addEventListener("blur",s,{signal:n})}}else this.#at&&(this.#Y?.hide(),this.#at=null,this.#wt({hasSelectedText:!1}))}#At(t=""){this.#st===Ke.HIGHLIGHT?this.highlightSelection(t):this.#j&&this.#yt()}#ft(){document.addEventListener("selectionchange",this.#_t.bind(this),{signal:this._signal})}#xt(){if(this.#$)return;this.#$=new AbortController;const t=this.combinedSignal(this.#$);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#Et(){this.#$?.abort(),this.#$=null}blur(){if(this.isShiftKeyDown=!1,this.#K&&(this.#K=!1,this.#At("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#rt)if(e.div.contains(t)){this.#et=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#et)return;const[t,e]=this.#et;this.#et=null,e.addEventListener("focusin",(()=>{t._focusEventsAllowed=!0}),{once:!0,signal:this._signal}),e.focus()}#mt(){if(this.#tt)return;this.#tt=new AbortController;const t=this.combinedSignal(this.#tt);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#St(){this.#tt?.abort(),this.#tt=null}#Tt(){if(this.#O)return;this.#O=new AbortController;const t=this.combinedSignal(this.#O);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#Ct(){this.#O?.abort(),this.#O=null}#gt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#mt(),this.#Tt()}removeEditListeners(){this.#St(),this.#Ct()}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const i of this.#H)if(i.isHandlingMimeForPasting(e))return t.dataTransfer.dropEffect="copy",void t.preventDefault()}drop(t){for(const e of t.dataTransfer.items)for(const i of this.#H)if(i.isHandlingMimeForPasting(e.type))return i.paste(e,this.currentLayer),void t.preventDefault()}copy(t){if(t.preventDefault(),this.#M?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const t of this.#rt){const i=t.serialize(!0);i&&e.push(i)}0!==e.length&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}paste(t){t.preventDefault();const{clipboardData:e}=t;for(const t of e.items)for(const e of this.#H)if(e.isHandlingMimeForPasting(t.type))return void e.paste(t,this.currentLayer);let i=e.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(t){return void oi(`paste: "${t.message}".`)}if(!Array.isArray(i))return;this.unselectAll();const n=this.currentLayer;try{const t=[];for(const e of i){const i=n.deserialize(e);if(!i)return;t.push(i)}const e=()=>{for(const e of t)this.#kt(e);this.#Mt(t)},s=()=>{for(const e of t)e.remove()};this.addCommands({cmd:e,undo:s,mustExec:!0})}catch(t){oi(`paste: "${t.message}".`)}}keydown(t){this.isShiftKeyDown||"Shift"!==t.key||(this.isShiftKeyDown=!0),this.#st===Ke.NONE||this.isEditorHandlingKeyboard||un._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&"Shift"===t.key&&(this.isShiftKeyDown=!1,this.#K&&(this.#K=!1,this.#At("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu")}}#wt(t){Object.entries(t).some((([t,e])=>this.#ct[t]!==e))&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#ct,t)}),this.#st===Ke.HIGHLIGHT&&!1===t.hasSelectedEditor&&this.#It([[Ye.HIGHLIGHT_FREE,!0]]))}#It(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#xt(),this.#Tt(),this.#wt({isEditing:this.#st!==Ke.NONE,isEmpty:this.#Lt(),hasSomethingToUndo:this.#F.hasSomethingToUndo(),hasSomethingToRedo:this.#F.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#Et(),this.#Ct(),this.#wt({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#H){this.#H=t;for(const t of this.#H)this.#It(t.defaultPropertiesToUpdate)}}getId(){return this.#Q.id}get currentLayer(){return this.#L.get(this.#N)}getLayer(t){return this.#L.get(t)}get currentPageIndex(){return this.#N}addLayer(t){this.#L.set(t.pageIndex,t),this.#J?t.enable():t.disable()}removeLayer(t){this.#L.delete(t.pageIndex)}updateMode(t,e=null,i=!1){if(this.#st!==t){if(this.#st=t,t===Ke.NONE)return this.setEditingState(!1),void this.#Pt();this.setEditingState(!0),this.#Rt(),this.unselectAll();for(const e of this.#L.values())e.updateMode(t);if(e||!i){if(e)for(const t of this.#I.values())if(t.annotationElementId===e){this.setSelected(t),t.enterInEditMode();break}}else this.addNewEditorFromKeyboard()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==this.#st&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){if(this.#H){switch(t){case Ye.CREATE:return void this.currentLayer.addNewEditor();case Ye.HIGHLIGHT_DEFAULT_COLOR:this.#it?.updateColor(e);break;case Ye.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#lt||=new Map).set(t,e),this.showAllEditors("highlight",e)}for(const i of this.#rt)i.updateParams(t,e);for(const i of this.#H)i.updateDefaultParams(t,e)}}showAllEditors(t,e,i=!1){for(const i of this.#I.values())i.editorType===t&&i.show(e);(this.#lt?.get(Ye.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#It([[Ye.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#Z!==t){this.#Z=t;for(const e of this.#L.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}#Rt(){if(!this.#J){this.#J=!0;for(const t of this.#L.values())t.enable();for(const t of this.#I.values())t.enable()}}#Pt(){if(this.unselectAll(),this.#J){this.#J=!1;for(const t of this.#L.values())t.disable();for(const t of this.#I.values())t.disable()}}getEditors(t){const e=[];for(const i of this.#I.values())i.pageIndex===t&&e.push(i);return e}getEditor(t){return this.#I.get(t)}addEditor(t){this.#I.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#W&&clearTimeout(this.#W),this.#W=setTimeout((()=>{this.focusMainContainer(),this.#W=null}),0)),this.#I.delete(t.id),this.unselect(t),t.annotationElementId&&this.#B.has(t.annotationElementId)||this.#R?.remove(t.id)}addDeletedAnnotationElement(t){this.#B.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#B.has(t)}removeDeletedAnnotationElement(t){this.#B.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#kt(t){const e=this.#L.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#M!==t&&(this.#M=t,t&&this.#It(t.propertiesToUpdate))}get#Dt(){let t=null;for(t of this.#rt);return t}updateUI(t){this.#Dt===t&&this.#It(t.propertiesToUpdate)}toggleSelected(t){if(this.#rt.has(t))return this.#rt.delete(t),t.unselect(),void this.#wt({hasSelectedEditor:this.hasSelection});this.#rt.add(t),t.select(),this.#It(t.propertiesToUpdate),this.#wt({hasSelectedEditor:!0})}setSelected(t){for(const e of this.#rt)e!==t&&e.unselect();this.#rt.clear(),this.#rt.add(t),t.select(),this.#It(t.propertiesToUpdate),this.#wt({hasSelectedEditor:!0})}isSelected(t){return this.#rt.has(t)}get firstSelectedEditor(){return this.#rt.values().next().value}unselect(t){t.unselect(),this.#rt.delete(t),this.#wt({hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==this.#rt.size}get isEnterHandled(){return 1===this.#rt.size&&this.firstSelectedEditor.isEnterHandled}undo(){this.#F.undo(),this.#wt({hasSomethingToUndo:this.#F.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#Lt()})}redo(){this.#F.redo(),this.#wt({hasSomethingToUndo:!0,hasSomethingToRedo:this.#F.hasSomethingToRedo(),isEmpty:this.#Lt()})}addCommands(t){this.#F.add(t),this.#wt({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#Lt()})}#Lt(){if(0===this.#I.size)return!0;if(1===this.#I.size)for(const t of this.#I.values())return t.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const t=[...this.#rt];this.addCommands({cmd:()=>{for(const e of t)e.remove()},undo:()=>{for(const e of t)this.#kt(e)},mustExec:!0})}commitOrRemove(){this.#M?.commitOrRemove()}hasSomethingToControl(){return this.#M||this.hasSelection}#Mt(t){for(const t of this.#rt)t.unselect();this.#rt.clear();for(const e of t)e.isEmpty()||(this.#rt.add(e),e.select());this.#wt({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#rt)t.commit();this.#Mt(this.#I.values())}unselectAll(){if((!this.#M||(this.#M.commitOrRemove(),this.#st===Ke.NONE))&&this.hasSelection){for(const t of this.#rt)t.unselect();this.#rt.clear(),this.#wt({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;this.#dt[0]+=t,this.#dt[1]+=e;const[n,s]=this.#dt,r=[...this.#rt];this.#ht&&clearTimeout(this.#ht),this.#ht=setTimeout((()=>{this.#ht=null,this.#dt[0]=this.#dt[1]=0,this.addCommands({cmd:()=>{for(const t of r)this.#I.has(t.id)&&t.translateInPage(n,s)},undo:()=>{for(const t of r)this.#I.has(t.id)&&t.translateInPage(-n,-s)},mustExec:!1})}),1e3);for(const i of r)i.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#q=new Map;for(const t of this.#rt)this.#q.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#q)return!1;this.disableUserSelect(!1);const t=this.#q;this.#q=null;let e=!1;for(const[{x:i,y:n,pageIndex:s},r]of t)r.newX=i,r.newY=n,r.newPageIndex=s,e||=i!==r.savedX||n!==r.savedY||s!==r.savedPageIndex;if(!e)return!1;const i=(t,e,i,n)=>{if(this.#I.has(t.id)){const s=this.#L.get(n);s?t._setParentAndPosition(s,e,i):(t.pageIndex=n,t.x=e,t.y=i)}};return this.addCommands({cmd:()=>{for(const[e,{newX:n,newY:s,newPageIndex:r}]of t)i(e,n,s,r)},undo:()=>{for(const[e,{savedX:n,savedY:s,savedPageIndex:r}]of t)i(e,n,s,r)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#q)for(const i of this.#q.keys())i.drag(t,e)}rebuild(t){if(null===t.parent){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||1===this.#rt.size&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#M===t}getActive(){return this.#M}getMode(){return this.#st}get imageManager(){return hi(this,"imageManager",new ln)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let i=0,n=e.rangeCount;i<n;i++)if(!t.contains(e.getRangeAt(i).commonAncestorContainer))return null;const{x:i,y:n,width:s,height:r}=t.getBoundingClientRect();let a;switch(t.getAttribute("data-main-rotation")){case"90":a=(t,e,a,o)=>({x:(e-n)/r,y:1-(t+a-i)/s,width:o/r,height:a/s});break;case"180":a=(t,e,a,o)=>({x:1-(t+a-i)/s,y:1-(e+o-n)/r,width:a/s,height:o/r});break;case"270":a=(t,e,a,o)=>({x:1-(e+o-n)/r,y:(t-i)/s,width:o/r,height:a/s});break;default:a=(t,e,a,o)=>({x:(t-i)/s,y:(e-n)/r,width:a/s,height:o/r})}const o=[];for(let t=0,i=e.rangeCount;t<i;t++){const i=e.getRangeAt(t);if(!i.collapsed)for(const{x:t,y:e,width:n,height:s}of i.getClientRects())0!==n&&0!==s&&o.push(a(t,e,n,s))}return 0===o.length?null:o}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#D||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#D?.delete(t)}renderAnnotationElement(t){const e=this.#D?.get(t.data.id);if(!e)return;const i=this.#R.getRawValue(e);i&&(this.#st!==Ke.NONE||i.hasBeenModified)&&i.renderAnnotationElement(t)}}class pn{#o=null;#Ft=!1;#Ot=null;#Nt=null;#Bt=null;#qt=!1;#Ht=null;#r=null;#zt=null;#jt=null;#Ut=!1;static _l10nPromise=null;constructor(t){this.#r=t,this.#Ut=t._uiManager.useNewAltTextFlow}static initialize(t){pn._l10nPromise||=t}async render(){const t=this.#Ot=document.createElement("button");let e;t.className="altText",this.#Ut?(t.classList.add("new"),e=await pn._l10nPromise.get("pdfjs-editor-new-alt-text-missing-button-label")):e=await pn._l10nPromise.get("pdfjs-editor-alt-text-button-label"),t.textContent=e,t.setAttribute("aria-label",e),t.tabIndex="0";const i=this.#r._uiManager._signal;t.addEventListener("contextmenu",Ki,{signal:i}),t.addEventListener("pointerdown",(t=>t.stopPropagation()),{signal:i});const n=t=>{t.preventDefault(),this.#r._uiManager.editAltText(this.#r),this.#Ut&&this.#r._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#Vt}})};return t.addEventListener("click",n,{capture:!0,signal:i}),t.addEventListener("keydown",(e=>{e.target===t&&"Enter"===e.key&&(this.#qt=!0,n(e))}),{signal:i}),await this.#Gt(),t}get#Vt(){return(this.#o?"added":null===this.#o&&this.guessedText&&"review")||"missing"}finish(){this.#Ot&&(this.#Ot.focus({focusVisible:this.#qt}),this.#qt=!1)}isEmpty(){return this.#Ut?null===this.#o:!this.#o&&!this.#Ft}hasData(){return this.#Ut?null!==this.#o||!!this.#zt:this.isEmpty()}get guessedText(){return this.#zt}async setGuessedText(t){null===this.#o&&(this.#zt=t,this.#jt=await pn._l10nPromise.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer")({generatedAltText:t}),this.#Gt())}toggleAltTextBadge(t=!1){if(!this.#Ut||this.#o)return this.#Ht?.remove(),void(this.#Ht=null);if(!this.#Ht){const t=this.#Ht=document.createElement("div");t.className="noAltTextBadge",this.#r.div.append(t)}this.#Ht.classList.toggle("hidden",!t)}serialize(t){let e=this.#o;return t||this.#zt!==e||(e=this.#jt),{altText:e,decorative:this.#Ft,guessedText:this.#zt,textWithDisclaimer:this.#jt}}get data(){return{altText:this.#o,decorative:this.#Ft}}set data({altText:t,decorative:e,guessedText:i,textWithDisclaimer:n,cancel:s=!1}){i&&(this.#zt=i,this.#jt=n),this.#o===t&&this.#Ft===e||(s||(this.#o=t,this.#Ft=e),this.#Gt())}toggle(t=!1){this.#Ot&&(!t&&this.#Bt&&(clearTimeout(this.#Bt),this.#Bt=null),this.#Ot.disabled=!t)}shown(){this.#r._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#Vt}})}destroy(){this.#Ot?.remove(),this.#Ot=null,this.#Nt=null,this.#Ht?.remove(),this.#Ht=null}async#Gt(){const t=this.#Ot;if(!t)return;if(this.#Ut){const e=this.#Vt,i="review"===e?"to-review":e;if(t.classList.toggle("done",!!this.#o),pn._l10nPromise.get(`pdfjs-editor-new-alt-text-${i}-button-label`).then((e=>{t.setAttribute("aria-label",e);for(const i of t.childNodes)if(i.nodeType===Node.TEXT_NODE){i.textContent=e;break}})),!this.#o)return void this.#Nt?.remove()}else{if(!this.#o&&!this.#Ft)return t.classList.remove("done"),void this.#Nt?.remove();t.classList.add("done"),pn._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then((e=>{t.setAttribute("aria-label",e)}))}let e=this.#Nt;if(!e){this.#Nt=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip");const i=e.id=`alt-text-tooltip-${this.#r.id}`;t.setAttribute("aria-describedby",i);const n=100,s=this.#r._uiManager._signal;s.addEventListener("abort",(()=>{clearTimeout(this.#Bt),this.#Bt=null}),{once:!0}),t.addEventListener("mouseenter",(()=>{this.#Bt=setTimeout((()=>{this.#Bt=null,this.#Nt.classList.add("show"),this.#r._reportTelemetry({action:"alt_text_tooltip"})}),n)}),{signal:s}),t.addEventListener("mouseleave",(()=>{this.#Bt&&(clearTimeout(this.#Bt),this.#Bt=null),this.#Nt?.classList.remove("show")}),{signal:s})}e.innerText=this.#Ft?await pn._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):this.#o,e.parentNode||t.append(e);const i=this.#r.getImageForAltText();i?.setAttribute("aria-describedby",e.id)}}class fn{#Wt=null;#$t=null;#o=null;#Xt=!1;#Kt=!1;#Yt=null;#Qt=null;#Jt=null;#Zt="";#te=!1;#ee=null;#ie=!1;#ne=!1;#se=!1;#re=null;#ae=0;#oe=0;#le=null;_editToolbar=null;_initialOptions=Object.create(null);_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10nPromise=null;static _l10nResizer=null;#ce=!1;#de=fn._zIndex++;static _borderLineWidth=-1;static _colorManager=new hn;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=fn.prototype._resizeWithKeyboard,e=un.TRANSLATE_SMALL,i=un.TRANSLATE_BIG;return hi(this,"_resizerKeyboardManager",new dn([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],fn.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:i,pageHeight:n,pageX:s,pageY:r}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,n],this.pageTranslation=[s,r];const[a,o]=this.parentDimensions;this.x=t.x/a,this.y=t.y/o,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return hi(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new gn({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e,i){if(fn._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),fn._l10nPromise||=new Map([...["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-new-alt-text-added-button-label","pdfjs-editor-new-alt-text-missing-button-label","pdfjs-editor-new-alt-text-to-review-button-label"].map((e=>[e,t.get(e)])),...["pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer"].map((e=>[e,t.get.bind(t,e)]))]),i?.strings)for(const e of i.strings)fn._l10nPromise.set(e,t.get(e));if(-1!==fn._borderLineWidth)return;const n=getComputedStyle(document.documentElement);fn._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){li("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#ce}set _isDraggable(t){this.#ce=t,this.div?.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(2*t),this.y+=this.width*t/(2*e);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(2*t),this.y-=this.width*t/(2*e);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#de}setParent(t){null!==t?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):this.#he(),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#te?this.#te=!1:this.parent.setSelected(this))}focusout(t){if(!this._focusEventsAllowed)return;if(!this.isAttachedToDOM)return;const e=t.relatedTarget;e?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,n){const[s,r]=this.parentDimensions;[i,n]=this.screenToPageTranslation(i,n),this.x=(t+i)/s,this.y=(e+n)/r,this.fixAndSetPosition()}#ue([t,e],i,n){[i,n]=this.screenToPageTranslation(i,n),this.x+=i/t,this.y+=n/e,this.fixAndSetPosition()}translate(t,e){this.#ue(this.parentDimensions,t,e)}translateInPage(t,e){this.#ee||=[this.x,this.y],this.#ue(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){this.#ee||=[this.x,this.y];const[i,n]=this.parentDimensions;if(this.x+=t/i,this.y+=e/n,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:t,y:e}=this.div.getBoundingClientRect();this.parent.findNewParent(this,t,e)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:r}=this;const[a,o]=this.getBaseTranslation();s+=a,r+=o,this.div.style.left=`${(100*s).toFixed(2)}%`,this.div.style.top=`${(100*r).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!this.#ee&&(this.#ee[0]!==this.x||this.#ee[1]!==this.y)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:i}=fn,n=i/t,s=i/e;switch(this.rotation){case 90:return[-n,s];case 180:return[n,s];case 270:return[n,-s];default:return[-n,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const[e,i]=this.pageDimensions;let{x:n,y:s,width:r,height:a}=this;if(r*=e,a*=i,n*=e,s*=i,this._mustFixPosition)switch(t){case 0:n=Math.max(0,Math.min(e-r,n)),s=Math.max(0,Math.min(i-a,s));break;case 90:n=Math.max(0,Math.min(e-a,n)),s=Math.min(i,Math.max(r,s));break;case 180:n=Math.min(e,Math.max(r,n)),s=Math.min(i,Math.max(a,s));break;case 270:n=Math.min(e,Math.max(a,n)),s=Math.max(0,Math.min(i-r,s))}this.x=n/=e,this.y=s/=i;const[o,l]=this.getBaseTranslation();n+=o,s+=l;const{style:c}=this.div;c.left=`${(100*n).toFixed(2)}%`,c.top=`${(100*s).toFixed(2)}%`,this.moveInDOM()}static#pe(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return fn.#pe(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return fn.#pe(t,e,360-this.parentRotation)}#fe(t){switch(t){case 90:{const[t,e]=this.pageDimensions;return[0,-t/e,e/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,e]=this.pageDimensions;return[0,t/e,-e/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,i]}=this,n=e*t,s=i*t;return xi.isCSSRoundSupported?[Math.round(n),Math.round(s)]:[n,s]}setDims(t,e){const[i,n]=this.parentDimensions;this.div.style.width=`${(100*t/i).toFixed(2)}%`,this.#Kt||(this.div.style.height=`${(100*e/n).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:i}=t,n=i.endsWith("%"),s=!this.#Kt&&e.endsWith("%");if(n&&s)return;const[r,a]=this.parentDimensions;n||(t.width=`${(100*parseFloat(i)/r).toFixed(2)}%`),this.#Kt||s||(t.height=`${(100*parseFloat(e)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#ge(){if(this.#Yt)return;this.#Yt=document.createElement("div"),this.#Yt.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const i of t){const t=document.createElement("div");this.#Yt.append(t),t.classList.add("resizer",i),t.setAttribute("data-resizer-name",i),t.addEventListener("pointerdown",this.#me.bind(this,i),{signal:e}),t.addEventListener("contextmenu",Ki,{signal:e}),t.tabIndex=-1}this.div.prepend(this.#Yt)}#me(t,e){e.preventDefault();const{isMac:i}=xi.platform;if(0!==e.button||e.ctrlKey&&i)return;this.#o?.toggle(!1);const n=this._isDraggable;this._isDraggable=!1;const s=new AbortController,r=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#ve.bind(this,t),{passive:!0,capture:!0,signal:r}),window.addEventListener("contextmenu",Ki,{signal:r});const a=this.x,o=this.y,l=this.width,c=this.height,d=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const u=()=>{s.abort(),this.parent.togglePointerEvents(!0),this.#o?.toggle(!0),this._isDraggable=n,this.parent.div.style.cursor=d,this.div.style.cursor=h,this.#be(a,o,l,c)};window.addEventListener("pointerup",u,{signal:r}),window.addEventListener("blur",u,{signal:r})}#be(t,e,i,n){const s=this.x,r=this.y,a=this.width,o=this.height;s===t&&r===e&&a===i&&o===n||this.addCommands({cmd:()=>{this.width=a,this.height=o,this.x=s,this.y=r;const[t,e]=this.parentDimensions;this.setDims(t*a,e*o),this.fixAndSetPosition()},undo:()=>{this.width=i,this.height=n,this.x=t,this.y=e;const[s,r]=this.parentDimensions;this.setDims(s*i,r*n),this.fixAndSetPosition()},mustExec:!0})}#ve(t,e){const[i,n]=this.parentDimensions,s=this.x,r=this.y,a=this.width,o=this.height,l=fn.MIN_SIZE/i,c=fn.MIN_SIZE/n,d=t=>Math.round(1e4*t)/1e4,h=this.#fe(this.rotation),u=(t,e)=>[h[0]*t+h[2]*e,h[1]*t+h[3]*e],p=this.#fe(360-this.rotation);let f,g,m=!1,v=!1;switch(t){case"topLeft":m=!0,f=(t,e)=>[0,0],g=(t,e)=>[t,e];break;case"topMiddle":f=(t,e)=>[t/2,0],g=(t,e)=>[t/2,e];break;case"topRight":m=!0,f=(t,e)=>[t,0],g=(t,e)=>[0,e];break;case"middleRight":v=!0,f=(t,e)=>[t,e/2],g=(t,e)=>[0,e/2];break;case"bottomRight":m=!0,f=(t,e)=>[t,e],g=(t,e)=>[0,0];break;case"bottomMiddle":f=(t,e)=>[t/2,e],g=(t,e)=>[t/2,0];break;case"bottomLeft":m=!0,f=(t,e)=>[0,e],g=(t,e)=>[t,0];break;case"middleLeft":v=!0,f=(t,e)=>[0,e/2],g=(t,e)=>[t,e/2]}const b=f(a,o),y=g(a,o);let _=u(...y);const w=d(s+_[0]),A=d(r+_[1]);let x=1,E=1,[S,T]=this.screenToPageTranslation(e.movementX,e.movementY);var C,k;if([S,T]=(C=S/i,k=T/n,[p[0]*C+p[2]*k,p[1]*C+p[3]*k]),m){const t=Math.hypot(a,o);x=E=Math.max(Math.min(Math.hypot(y[0]-b[0]-S,y[1]-b[1]-T)/t,1/a,1/o),l/a,c/o)}else v?x=Math.max(l,Math.min(1,Math.abs(y[0]-b[0]-S)))/a:E=Math.max(c,Math.min(1,Math.abs(y[1]-b[1]-T)))/o;const M=d(a*x),I=d(o*E);_=u(...g(M,I));const L=w-_[0],P=A-_[1];this.width=M,this.height=I,this.x=L,this.y=P,this.setDims(i*M,n*I),this.fixAndSetPosition()}altTextFinish(){this.#o?.finish()}async addEditToolbar(){return this._editToolbar||this.#ne||(this._editToolbar=new sn(this),this.div.append(this._editToolbar.render()),this.#o&&await this._editToolbar.addAltText(this.#o)),this._editToolbar}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#o?.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){this.#o||(pn.initialize(fn._l10nPromise),this.#o=new pn(this),this.#Wt&&(this.#o.data=this.#Wt,this.#Wt=null),await this.addEditToolbar())}get altTextData(){return this.#o?.data}set altTextData(t){this.#o&&(this.#o.data=t)}get guessedAltText(){return this.#o?.guessedText}async setGuessedAltText(t){await(this.#o?.setGuessedText(t))}serializeAltText(t){return this.#o?.serialize(t)}hasAltText(){return!!this.#o&&!this.#o.isEmpty()}hasAltTextData(){return this.#o?.hasData()??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=this.#Xt?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.#ye();const[t,e]=this.parentDimensions;this.parentRotation%180!=0&&(this.div.style.maxWidth=`${(100*e/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/e).toFixed(2)}%`);const[i,n]=this.getInitialTranslation();return this.translate(i,n),an(this,this.div,["pointerdown"]),this.div}pointerdown(t){const{isMac:e}=xi.platform;0!==t.button||t.ctrlKey&&e?t.preventDefault():(this.#te=!0,this._isDraggable?this.#_e(t):this.#we(t))}#we(t){const{isMac:e}=xi.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#_e(t){const e=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();const i=new AbortController,n=this._uiManager.combinedSignal(i);if(e){this.div.classList.add("moving"),this.#ae=t.clientX,this.#oe=t.clientY;const e=t=>{const{clientX:e,clientY:i}=t,[n,s]=this.screenToPageTranslation(e-this.#ae,i-this.#oe);this.#ae=e,this.#oe=i,this._uiManager.dragSelectedEditors(n,s)};window.addEventListener("pointermove",e,{passive:!0,capture:!0,signal:n})}const s=()=>{i.abort(),e&&this.div.classList.remove("moving"),this.#te=!1,this._uiManager.endDragSession()||this.#we(t)};window.addEventListener("pointerup",s,{signal:n}),window.addEventListener("blur",s,{signal:n})}moveInDOM(){this.#re&&clearTimeout(this.#re),this.#re=setTimeout((()=>{this.#re=null,this.parent?.moveEditorInDOM(this)}),0)}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition()}getRect(t,e,i=this.rotation){const n=this.parentScale,[s,r]=this.pageDimensions,[a,o]=this.pageTranslation,l=t/n,c=e/n,d=this.x*s,h=this.y*r,u=this.width*s,p=this.height*r;switch(i){case 0:return[d+l+a,r-h-c-p+o,d+l+u+a,r-h-c+o];case 90:return[d+c+a,r-h+l+o,d+c+p+a,r-h+l+u+o];case 180:return[d-l-u+a,r-h+c+o,d-l+a,r-h+c+p+o];case 270:return[d-c-p+a,r-h-l-u+o,d-c+a,r-h-l+o];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[i,n,s,r]=t,a=s-i,o=r-n;switch(this.rotation){case 0:return[i,e-r,a,o];case 90:return[i,e-n,o,a];case 180:return[s,e-n,a,o];case 270:return[s,e-r,o,a];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#ne=!0}disableEditMode(){this.#ne=!1}isInEditMode(){return this.#ne}shouldGetKeyboardEvents(){return this.#se}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}#ye(){if(this.#Jt||!this.div)return;this.#Jt=new AbortController;const t=this._uiManager.combinedSignal(this.#Jt);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#ye()}rotate(t){}serialize(t=!1,e=null){li("An editor must be serializable")}static deserialize(t,e,i){const n=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i});n.rotation=t.rotation,n.#Wt=t.accessibilityData;const[s,r]=n.pageDimensions,[a,o,l,c]=n.getRectInCurrentCoords(t.rect,r);return n.x=a/s,n.y=o/r,n.width=l/s,n.height=c/r,n}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||null!==this.serialize())}remove(){if(this.#Jt?.abort(),this.#Jt=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#re&&(clearTimeout(this.#re),this.#re=null),this.#he(),this.removeEditToolbar(),this.#le){for(const t of this.#le.values())clearTimeout(t);this.#le=null}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#ge(),this.#Yt.classList.remove("hidden"),an(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||"Enter"!==t.key)return;this._uiManager.setSelected(this),this.#Qt={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#Yt.children;if(!this.#$t){this.#$t=Array.from(e);const t=this.#Ae.bind(this),i=this.#xe.bind(this),n=this._uiManager._signal;for(const e of this.#$t){const s=e.getAttribute("data-resizer-name");e.setAttribute("role","spinbutton"),e.addEventListener("keydown",t,{signal:n}),e.addEventListener("blur",i,{signal:n}),e.addEventListener("focus",this.#Ee.bind(this,s),{signal:n}),e.setAttribute("data-l10n-id",fn._l10nResizer[s])}}const i=this.#$t[0];let n=0;for(const t of e){if(t===i)break;n++}const s=(360-this.rotation+this.parentRotation)%360/90*(this.#$t.length/4);if(s!==n){if(s<n)for(let t=0;t<n-s;t++)this.#Yt.append(this.#Yt.firstChild);else if(s>n)for(let t=0;t<s-n;t++)this.#Yt.firstChild.before(this.#Yt.lastChild);let t=0;for(const i of e){const e=this.#$t[t++].getAttribute("data-resizer-name");i.setAttribute("data-l10n-id",fn._l10nResizer[e])}}this.#Se(0),this.#se=!0,this.#Yt.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#Ae(t){fn._resizerKeyboardManager.exec(this,t)}#xe(t){this.#se&&t.relatedTarget?.parentNode!==this.#Yt&&this.#he()}#Ee(t){this.#Zt=this.#se?t:""}#Se(t){if(this.#$t)for(const e of this.#$t)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#se&&this.#ve(this.#Zt,{movementX:t,movementY:e})}#he(){if(this.#se=!1,this.#Se(-1),this.#Qt){const{savedX:t,savedY:e,savedWidth:i,savedHeight:n}=this.#Qt;this.#be(t,e,i,n),this.#Qt=null}}_stopResizingWithKeyboard(){this.#he(),this.div.focus()}select(){this.makeResizable(),this.div?.classList.add("selectedEditor"),this._editToolbar?(this._editToolbar?.show(),this.#o?.toggleAltTextBadge(!1)):this.addEditToolbar().then((()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()}))}unselect(){this.#Yt?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#o?.toggleAltTextBadge(!0)}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return this.#ie}set isEditing(t){this.#ie=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){this.#Kt=!0;const i=t/e,{style:n}=this.div;n.aspectRatio=i,n.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#le||=new Map;const{action:e}=t;let i=this.#le.get(e);return i&&clearTimeout(i),i=setTimeout((()=>{this._reportTelemetry(t),this.#le.delete(e),0===this.#le.size&&(this.#le=null)}),fn._telemetryTimeout),void this.#le.set(e,i)}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#Xt=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#Xt=!0}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(e){if("CANVAS"===e.nodeName){const t=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.before(e)}}else e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);return e}resetAnnotationElement(t){const{firstChild:e}=t.container;"DIV"===e.nodeName&&e.classList.contains("annotationContent")&&e.remove()}}class gn extends fn{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}const mn=3285377520,vn=4294901760,bn=65535;class yn{constructor(t){this.h1=t?4294967295&t:mn,this.h2=t?4294967295&t:mn}update(t){let e,i;if("string"==typeof t){e=new Uint8Array(2*t.length),i=0;for(let n=0,s=t.length;n<s;n++){const s=t.charCodeAt(n);s<=255?e[i++]=s:(e[i++]=s>>>8,e[i++]=255&s)}}else{if(!ArrayBuffer.isView(t))throw new Error("Invalid data format, must be a string or TypedArray.");e=t.slice(),i=e.byteLength}const n=i>>2,s=i-4*n,r=new Uint32Array(e.buffer,0,n);let a=0,o=0,l=this.h1,c=this.h2;const d=3432918353,h=461845907,u=11601,p=13715;for(let t=0;t<n;t++)1&t?(a=r[t],a=a*d&vn|a*u&bn,a=a<<15|a>>>17,a=a*h&vn|a*p&bn,l^=a,l=l<<13|l>>>19,l=5*l+3864292196):(o=r[t],o=o*d&vn|o*u&bn,o=o<<15|o>>>17,o=o*h&vn|o*p&bn,c^=o,c=c<<13|c>>>19,c=5*c+3864292196);switch(a=0,s){case 3:a^=e[4*n+2]<<16;case 2:a^=e[4*n+1]<<8;case 1:a^=e[4*n],a=a*d&vn|a*u&bn,a=a<<15|a>>>17,a=a*h&vn|a*p&bn,1&n?l^=a:c^=a}this.h1=l,this.h2=c}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=3981806797*t&vn|36045*t&bn,e=4283543511*e&vn|(2950163797*(e<<16|t>>>16)&vn)>>>16,t^=e>>>1,t=444984403*t&vn|60499*t&bn,e=3301882366*e&vn|(3120437893*(e<<16|t>>>16)&vn)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const _n=Object.freeze({map:null,hash:"",transfer:void 0});class wn{#Te=!1;#Ce=null;#ke=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const i=this.#ke.get(t);return void 0===i?e:Object.assign(e,i)}getRawValue(t){return this.#ke.get(t)}remove(t){if(this.#ke.delete(t),0===this.#ke.size&&this.resetModified(),"function"==typeof this.onAnnotationEditor){for(const t of this.#ke.values())if(t instanceof fn)return;this.onAnnotationEditor(null)}}setValue(t,e){const i=this.#ke.get(t);let n=!1;if(void 0!==i)for(const[t,s]of Object.entries(e))i[t]!==s&&(n=!0,i[t]=s);else n=!0,this.#ke.set(t,e);n&&this.#Me(),e instanceof fn&&"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(e.constructor._type)}has(t){return this.#ke.has(t)}getAll(){return this.#ke.size>0?Ai(this.#ke):null}setAll(t){for(const[e,i]of Object.entries(t))this.setValue(e,i)}get size(){return this.#ke.size}#Me(){this.#Te||(this.#Te=!0,"function"==typeof this.onSetModified&&this.onSetModified())}resetModified(){this.#Te&&(this.#Te=!1,"function"==typeof this.onResetModified&&this.onResetModified())}get print(){return new An(this)}get serializable(){if(0===this.#ke.size)return _n;const t=new Map,e=new yn,i=[],n=Object.create(null);let s=!1;for(const[i,r]of this.#ke){const a=r instanceof fn?r.serialize(!1,n):r;a&&(t.set(i,a),e.update(`${i}:${JSON.stringify(a)}`),s||=!!a.bitmap)}if(s)for(const e of t.values())e.bitmap&&i.push(e.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:_n}get editorStats(){let t=null;const e=new Map;for(const i of this.#ke.values()){if(!(i instanceof fn))continue;const n=i.telemetryFinalData;if(!n)continue;const{type:s}=n;e.has(s)||e.set(s,Object.getPrototypeOf(i).constructor),t||=Object.create(null);const r=t[s]||=new Map;for(const[t,e]of Object.entries(n)){if("type"===t)continue;let i=r.get(t);i||(i=new Map,r.set(t,i));const n=i.get(e)??0;i.set(e,n+1)}}for(const[i,n]of e)t[i]=n.computeTelemetryFinalData(t[i]);return t}resetModifiedIds(){this.#Ce=null}get modifiedIds(){if(this.#Ce)return this.#Ce;const t=[];for(const e of this.#ke.values())e instanceof fn&&e.annotationElementId&&e.serialize()&&t.push(e.annotationElementId);return this.#Ce={ids:new Set(t),hash:t.join(",")}}}class An extends wn{#Ie;constructor(t){super();const{map:e,hash:i,transfer:n}=t.serializable,s=structuredClone(e,n?{transfer:n}:null);this.#Ie={map:s,hash:i,transfer:n}}get print(){li("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#Ie}get modifiedIds(){return hi(this,"modifiedIds",{ids:new Set,hash:""})}}class xn{#Le=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#Le.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:e}){if(t&&!this.#Le.has(t.loadedName))if(ci(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:n,style:s}=t,r=new FontFace(i,n,s);this.addNativeFontFace(r);try{await r.load(),this.#Le.add(i),e?.(t)}catch{oi(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(r)}}else li("Not implemented: loadSystemFont without the Font Loading API.")}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo)return void await this.loadSystemFont(t);if(this.isFontLoadingAPISupported){const e=t.createNativeFontFace();if(e){this.addNativeFontFace(e);try{await e.loaded}catch(i){throw oi(`Failed to load font '${e.family}': '${i}'.`),t.disableFontFace=!0,i}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise((e=>{const i=this._queueLoadingCallback(e);this._prepareFontLoadEvent(t,i)}))}}get isFontLoadingAPISupported(){return hi(this,"isFontLoadingAPISupported",!!this._document?.fonts)}get isSyncFontLoadingSupported(){let t=!1;return(Ve||"undefined"!=typeof navigator&&"string"==typeof navigator?.userAgent&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),hi(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){const{loadingRequests:e}=this,i={done:!1,complete:function(){for(ci(!i.done,"completeRequest() cannot be called twice."),i.done=!0;e.length>0&&e[0].done;){const t=e.shift();setTimeout(t.callback,0)}},callback:t};return e.push(i),i}get _loadTestFont(){return hi(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(t,e){function i(t,e){return t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|255&t.charCodeAt(e+3)}function n(t,e,i,n){return t.substring(0,e)+n+t.substring(e+i)}let s,r;const a=this._document.createElement("canvas");a.width=1,a.height=1;const o=a.getContext("2d");let l=0;const c=`lt${Date.now()}${this.loadTestFontId++}`;let d=this._loadTestFont;d=n(d,976,c.length,c);const h=1482184792;let u=i(d,16);for(s=0,r=c.length-3;s<r;s+=4)u=u-h+i(c,s)|0;var p;s<c.length&&(u=u-h+i(c+"XXX",s)|0),d=n(d,16,4,(p=u,String.fromCharCode(p>>24&255,p>>16&255,p>>8&255,255&p)));const f=`@font-face {font-family:"${c}";src:url(data:font/opentype;base64,${btoa(d)});}`;this.insertRule(f);const g=this._document.createElement("div");g.style.visibility="hidden",g.style.width=g.style.height="10px",g.style.position="absolute",g.style.top=g.style.left="0px";for(const e of[t.loadedName,c]){const t=this._document.createElement("span");t.textContent="Hi",t.style.fontFamily=e,g.append(t)}this._document.body.append(g),function t(e,i){if(++l>30)return oi("Load test font never loaded."),void i();o.font="30px "+e,o.fillText(".",0,20),o.getImageData(0,0,1,1).data[3]>0?i():setTimeout(t.bind(null,e,i))}(c,(()=>{g.remove(),e.complete()}))}}class En{constructor(t,{disableFontFace:e=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const e in t)this[e]=t[e];this.disableFontFace=!0===e,this._inspectFont=i}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(this.cssFontInfo){const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}else t=new FontFace(this.loadedName,this.data,{});return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=_i(this.data),e=`url(data:${this.mimetype};base64,${btoa(t)});`;let i;if(this.cssFontInfo){let t=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(t+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),i=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${t}src:${e}}`}else i=`@font-face {font-family:"${this.loadedName}";src:${e}}`;return this._inspectFont?.(this,e),i}getPathGenerator(t,e){if(void 0!==this.compiledGlyphs[e])return this.compiledGlyphs[e];let i;try{i=t.get(this.loadedName+"_path_"+e)}catch(t){oi(`getPathGenerator - ignoring character: "${t}".`)}if(!Array.isArray(i)||0===i.length)return this.compiledGlyphs[e]=function(t,e){};const n=[];for(let t=0,e=i.length;t<e;)switch(i[t++]){case 0:{const[e,s,r,a,o,l]=i.slice(t,t+6);n.push((t=>t.bezierCurveTo(e,s,r,a,o,l))),t+=6}break;case 1:{const[e,s]=i.slice(t,t+2);n.push((t=>t.moveTo(e,s))),t+=2}break;case 2:{const[e,s]=i.slice(t,t+2);n.push((t=>t.lineTo(e,s))),t+=2}break;case 3:{const[e,s,r,a]=i.slice(t,t+4);n.push((t=>t.quadraticCurveTo(e,s,r,a))),t+=4}break;case 4:n.push((t=>t.restore()));break;case 5:n.push((t=>t.save()));break;case 6:ci(2===n.length,"Scale command is only valid at the third position.");break;case 7:{const[e,s,r,a,o,l]=i.slice(t,t+6);n.push((t=>t.transform(e,s,r,a,o,l))),t+=6}break;case 8:{const[e,s]=i.slice(t,t+2);n.push((t=>t.translate(e,s))),t+=2}}return this.compiledGlyphs[e]=function(t,e){n[0](t),n[1](t),t.scale(e,-e);for(let e=2,i=n.length;e<i;e++)n[e](t)}}}if(Ve){var Sn=Promise.withResolvers(),Tn=null;(async()=>{const t=await import("fs"),e=await import("http"),i=await import("https"),n=await import("url");return new Map(Object.entries({fs:t,http:e,https:i,url:n,canvas:void 0,path2d:void 0}))})().then((t=>{Tn=t,Sn.resolve()}),(t=>{oi(`loadPackages: ${t}`),Tn=new Map,Sn.resolve()}))}class Cn{static get promise(){return Sn.promise}static get(t){return Tn?.get(t)}}const kn=function(t){return Cn.get("fs").promises.readFile(t).then((t=>new Uint8Array(t)))},Mn="Fill",In="Stroke",Ln="Shading";function Pn(t,e){if(!e)return;const i=e[2]-e[0],n=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],i,n),t.clip(s)}class Rn{getPattern(){li("Abstract method `getPattern` called.")}}class Dn extends Rn{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;"axial"===this._type?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const t of this._colorStops)e.addColorStop(t[0],t[1]);return e}getPattern(t,e,i,n){let s;if(n===In||n===Mn){const r=e.current.getClippedPathBoundingBox(n,tn(t))||[0,0,0,0],a=Math.ceil(r[2]-r[0])||1,o=Math.ceil(r[3]-r[1])||1,l=e.cachedCanvases.getCanvas("pattern",a,o,!0),c=l.context;c.clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.rect(0,0,c.canvas.width,c.canvas.height),c.translate(-r[0],-r[1]),i=Si.transform(i,[1,0,0,1,r[0],r[1]]),c.transform(...e.baseTransform),this.matrix&&c.transform(...this.matrix),Pn(c,this._bbox),c.fillStyle=this._createGradient(c),c.fill(),s=t.createPattern(l.canvas,"no-repeat");const d=new DOMMatrix(i);s.setTransform(d)}else Pn(t,this._bbox),s=this._createGradient(t);return s}}function Fn(t,e,i,n,s,r,a,o){const l=e.coords,c=e.colors,d=t.data,h=4*t.width;let u;l[i+1]>l[n+1]&&(u=i,i=n,n=u,u=r,r=a,a=u),l[n+1]>l[s+1]&&(u=n,n=s,s=u,u=a,a=o,o=u),l[i+1]>l[n+1]&&(u=i,i=n,n=u,u=r,r=a,a=u);const p=(l[i]+e.offsetX)*e.scaleX,f=(l[i+1]+e.offsetY)*e.scaleY,g=(l[n]+e.offsetX)*e.scaleX,m=(l[n+1]+e.offsetY)*e.scaleY,v=(l[s]+e.offsetX)*e.scaleX,b=(l[s+1]+e.offsetY)*e.scaleY;if(f>=b)return;const y=c[r],_=c[r+1],w=c[r+2],A=c[a],x=c[a+1],E=c[a+2],S=c[o],T=c[o+1],C=c[o+2],k=Math.round(f),M=Math.round(b);let I,L,P,R,D,F,O,N;for(let t=k;t<=M;t++){if(t<m){const e=t<f?0:(f-t)/(f-m);I=p-(p-g)*e,L=y-(y-A)*e,P=_-(_-x)*e,R=w-(w-E)*e}else{let e;e=t>b?1:m===b?0:(m-t)/(m-b),I=g-(g-v)*e,L=A-(A-S)*e,P=x-(x-T)*e,R=E-(E-C)*e}let e;e=t<f?0:t>b?1:(f-t)/(f-b),D=p-(p-v)*e,F=y-(y-S)*e,O=_-(_-T)*e,N=w-(w-C)*e;const i=Math.round(Math.min(I,D)),n=Math.round(Math.max(I,D));let s=h*t+4*i;for(let t=i;t<=n;t++)e=(I-t)/(I-D),e<0?e=0:e>1&&(e=1),d[s++]=L-(L-F)*e|0,d[s++]=P-(P-O)*e|0,d[s++]=R-(R-N)*e|0,d[s++]=255}}function On(t,e,i){const n=e.coords,s=e.colors;let r,a;switch(e.type){case"lattice":const o=e.verticesPerRow,l=Math.floor(n.length/o)-1,c=o-1;for(r=0;r<l;r++){let e=r*o;for(let r=0;r<c;r++,e++)Fn(t,i,n[e],n[e+1],n[e+o],s[e],s[e+1],s[e+o]),Fn(t,i,n[e+o+1],n[e+1],n[e+o],s[e+o+1],s[e+1],s[e+o])}break;case"triangles":for(r=0,a=n.length;r<a;r+=3)Fn(t,i,n[r],n[r+1],n[r+2],s[r],s[r+1],s[r+2]);break;default:throw new Error("illegal figure")}}class Nn extends Rn{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,i){const n=Math.floor(this._bounds[0]),s=Math.floor(this._bounds[1]),r=Math.ceil(this._bounds[2])-n,a=Math.ceil(this._bounds[3])-s,o=Math.min(Math.ceil(Math.abs(r*t[0]*1.1)),3e3),l=Math.min(Math.ceil(Math.abs(a*t[1]*1.1)),3e3),c=r/o,d=a/l,h={coords:this._coords,colors:this._colors,offsetX:-n,offsetY:-s,scaleX:1/c,scaleY:1/d},u=o+4,p=l+4,f=i.getCanvas("mesh",u,p,!1),g=f.context,m=g.createImageData(o,l);if(e){const t=m.data;for(let i=0,n=t.length;i<n;i+=4)t[i]=e[0],t[i+1]=e[1],t[i+2]=e[2],t[i+3]=255}for(const t of this._figures)On(m,t,h);return g.putImageData(m,2,2),{canvas:f.canvas,offsetX:n-2*c,offsetY:s-2*d,scaleX:c,scaleY:d}}getPattern(t,e,i,n){let s;if(Pn(t,this._bbox),n===Ln)s=Si.singularValueDecompose2dScale(tn(t));else if(s=Si.singularValueDecompose2dScale(e.baseTransform),this.matrix){const t=Si.singularValueDecompose2dScale(this.matrix);s=[s[0]*t[0],s[1]*t[1]]}const r=this._createMeshCanvas(s,n===Ln?null:this._background,e.cachedCanvases);return n!==Ln&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(r.offsetX,r.offsetY),t.scale(r.scaleX,r.scaleY),t.createPattern(r.canvas,"no-repeat")}}class Bn extends Rn{getPattern(){return"hotpink"}}class qn{static MAX_PATTERN_SIZE=3e3;constructor(t,e,i,n,s){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=i,this.canvasGraphicsFactory=n,this.baseTransform=s}createPatternCanvas(t){const e=this.operatorList,i=this.bbox,n=this.xstep,s=this.ystep,r=this.paintType,a=this.tilingType,o=this.color,l=this.canvasGraphicsFactory;ai("TilingType: "+a);const c=i[0],d=i[1],h=i[2],u=i[3],p=Si.singularValueDecompose2dScale(this.matrix),f=Si.singularValueDecompose2dScale(this.baseTransform),g=[p[0]*f[0],p[1]*f[1]],m=this.getSizeAndScale(n,this.ctx.canvas.width,g[0]),v=this.getSizeAndScale(s,this.ctx.canvas.height,g[1]),b=t.cachedCanvases.getCanvas("pattern",m.size,v.size,!0),y=b.context,_=l.createCanvasGraphics(y);_.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(_,r,o);let w=c,A=d,x=h,E=u;return c<0&&(w=0,x+=Math.abs(c)),d<0&&(A=0,E+=Math.abs(d)),y.translate(-m.scale*w,-v.scale*A),_.transform(m.scale,0,0,v.scale,0,0),y.save(),this.clipBbox(_,w,A,x,E),_.baseTransform=tn(_.ctx),_.executeOperatorList(e),_.endDrawing(),{canvas:b.canvas,scaleX:m.scale,scaleY:v.scale,offsetX:w,offsetY:A}}getSizeAndScale(t,e,i){t=Math.abs(t);const n=Math.max(qn.MAX_PATTERN_SIZE,e);let s=Math.ceil(t*i);return s>=n?s=n:i=s/t,{scale:i,size:s}}clipBbox(t,e,i,n,s){const r=n-e,a=s-i;t.ctx.rect(e,i,r,a),t.current.updateRectMinMax(tn(t.ctx),[e,i,n,s]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const n=t.ctx,s=t.current;switch(e){case 1:const t=this.ctx;n.fillStyle=t.fillStyle,n.strokeStyle=t.strokeStyle,s.fillColor=t.fillStyle,s.strokeColor=t.strokeStyle;break;case 2:const r=Si.makeHexColor(i[0],i[1],i[2]);n.fillStyle=r,n.strokeStyle=r,s.fillColor=r,s.strokeColor=r;break;default:throw new bi(`Unsupported paint type: ${e}`)}}getPattern(t,e,i,n){let s=i;n!==Ln&&(s=Si.transform(s,e.baseTransform),this.matrix&&(s=Si.transform(s,this.matrix)));const r=this.createPatternCanvas(e);let a=new DOMMatrix(s);a=a.translate(r.offsetX,r.offsetY),a=a.scale(1/r.scaleX,1/r.scaleY);const o=t.createPattern(r.canvas,"repeat");return o.setTransform(a),o}}function Hn({src:t,srcPos:e=0,dest:i,width:n,height:s,nonBlackColor:r=4294967295,inverseDecode:a=!1}){const o=xi.isLittleEndian?4278190080:255,[l,c]=a?[r,o]:[o,r],d=n>>3,h=7&n,u=t.length;i=new Uint32Array(i.buffer);let p=0;for(let n=0;n<s;n++){for(const n=e+d;e<n;e++){const n=e<u?t[e]:255;i[p++]=128&n?c:l,i[p++]=64&n?c:l,i[p++]=32&n?c:l,i[p++]=16&n?c:l,i[p++]=8&n?c:l,i[p++]=4&n?c:l,i[p++]=2&n?c:l,i[p++]=1&n?c:l}if(0===h)continue;const n=e<u?t[e++]:255;for(let t=0;t<h;t++)i[p++]=n&1<<7-t?c:l}return{srcPos:e,destPos:p}}const zn=16;class jn{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let n;return void 0!==this.cache[t]?(n=this.cache[t],this.canvasFactory.reset(n,e,i)):(n=this.canvasFactory.create(e,i),this.cache[t]=n),n}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Un(t,e,i,n,s,r,a,o,l,c){const[d,h,u,p,f,g]=tn(t);if(0===h&&0===u){const m=a*d+f,v=Math.round(m),b=o*p+g,y=Math.round(b),_=(a+l)*d+f,w=Math.abs(Math.round(_)-v)||1,A=(o+c)*p+g,x=Math.abs(Math.round(A)-y)||1;return t.setTransform(Math.sign(d),0,0,Math.sign(p),v,y),t.drawImage(e,i,n,s,r,0,0,w,x),t.setTransform(d,h,u,p,f,g),[w,x]}if(0===d&&0===p){const m=o*u+f,v=Math.round(m),b=a*h+g,y=Math.round(b),_=(o+c)*u+f,w=Math.abs(Math.round(_)-v)||1,A=(a+l)*h+g,x=Math.abs(Math.round(A)-y)||1;return t.setTransform(0,Math.sign(h),Math.sign(u),0,v,y),t.drawImage(e,i,n,s,r,0,0,x,w),t.setTransform(d,h,u,p,f,g),[x,w]}return t.drawImage(e,i,n,s,r,a,o,l,c),[Math.hypot(d,h)*l,Math.hypot(u,p)*c]}class Vn{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=Ge,this.textMatrixScale=1,this.fontMatrix=We,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=0,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,i){[e,i]=Si.applyTransform([e,i],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(t,e){const i=Si.applyTransform(e,t),n=Si.applyTransform(e.slice(2),t),s=Si.applyTransform([e[0],e[3]],t),r=Si.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,i[0],n[0],s[0],r[0]),this.minY=Math.min(this.minY,i[1],n[1],s[1],r[1]),this.maxX=Math.max(this.maxX,i[0],n[0],s[0],r[0]),this.maxY=Math.max(this.maxY,i[1],n[1],s[1],r[1])}updateScalingPathMinMax(t,e){Si.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,i,n,s,r,a,o,l,c){const d=Si.bezierBoundingBox(e,i,n,s,r,a,o,l,c);c||this.updateRectMinMax(t,d)}getPathBoundingBox(t=Mn,e=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(t===In){e||li("Stroke bounding box must include transform.");const t=Si.singularValueDecompose2dScale(e),n=t[0]*this.lineWidth/2,s=t[1]*this.lineWidth/2;i[0]-=n,i[1]-=s,i[2]+=n,i[3]+=s}return i}updateClipFromPath(){const t=Si.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=Mn,e=null){return Si.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function Gn(t,e){if("undefined"!=typeof ImageData&&e instanceof ImageData)return void t.putImageData(e,0,0);const i=e.height,n=e.width,s=i%zn,r=(i-s)/zn,a=0===s?r:r+1,o=t.createImageData(n,zn);let l,c=0;const d=e.data,h=o.data;let u,p,f,g;if(e.kind===Je.GRAYSCALE_1BPP){const e=d.byteLength,i=new Uint32Array(h.buffer,0,h.byteLength>>2),g=i.length,m=n+7>>3,v=4294967295,b=xi.isLittleEndian?4278190080:255;for(u=0;u<a;u++){for(f=u<r?zn:s,l=0,p=0;p<f;p++){const t=e-c;let s=0;const r=t>m?n:8*t-7,a=-8&r;let o=0,h=0;for(;s<a;s+=8)h=d[c++],i[l++]=128&h?v:b,i[l++]=64&h?v:b,i[l++]=32&h?v:b,i[l++]=16&h?v:b,i[l++]=8&h?v:b,i[l++]=4&h?v:b,i[l++]=2&h?v:b,i[l++]=1&h?v:b;for(;s<r;s++)0===o&&(h=d[c++],o=128),i[l++]=h&o?v:b,o>>=1}for(;l<g;)i[l++]=0;t.putImageData(o,0,u*zn)}}else if(e.kind===Je.RGBA_32BPP){for(p=0,g=n*zn*4,u=0;u<r;u++)h.set(d.subarray(c,c+g)),c+=g,t.putImageData(o,0,p),p+=zn;u<a&&(g=n*s*4,h.set(d.subarray(c,c+g)),t.putImageData(o,0,p))}else{if(e.kind!==Je.RGB_24BPP)throw new Error(`bad image kind: ${e.kind}`);for(f=zn,g=n*f,u=0;u<a;u++){for(u>=r&&(f=s,g=n*f),l=0,p=g;p--;)h[l++]=d[c++],h[l++]=d[c++],h[l++]=d[c++],h[l++]=255;t.putImageData(o,0,u*zn)}}}function Wn(t,e){if(e.bitmap)return void t.drawImage(e.bitmap,0,0);const i=e.height,n=e.width,s=i%zn,r=(i-s)/zn,a=0===s?r:r+1,o=t.createImageData(n,zn);let l=0;const c=e.data,d=o.data;for(let e=0;e<a;e++){const i=e<r?zn:s;({srcPos:l}=Hn({src:c,srcPos:l,dest:d,width:n,height:i,nonBlackColor:0})),t.putImageData(o,0,e*zn)}}function $n(t,e){const i=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of i)void 0!==t[n]&&(e[n]=t[n]);void 0!==t.setLineDash&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function Xn(t){if(t.strokeStyle=t.fillStyle="#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",void 0!==t.setLineDash&&(t.setLineDash([]),t.lineDashOffset=0),!Ve){const{filter:e}=t;"none"!==e&&""!==e&&(t.filter="none")}}function Kn(t,e){if(e)return!0;const i=Si.singularValueDecompose2dScale(t);i[0]=Math.fround(i[0]),i[1]=Math.fround(i[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*Oi.PDF_TO_CSS_UNITS);return i[0]<=n&&i[1]<=n}const Yn=["butt","round","square"],Qn=["miter","round","bevel"],Jn={},Zn={};class ts{constructor(t,e,i,n,s,{optionalContentConfig:r,markedContentStack:a=null},o,l){this.ctx=t,this.current=new Vn(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=n,this.filterFactory=s,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=r,this.cachedCanvases=new jn(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=o,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=l,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return"string"==typeof t?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:n=null}){const s=this.ctx.canvas.width,r=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=n||"#ffffff",this.ctx.fillRect(0,0,s,r),this.ctx.fillStyle=a,i){const t=this.cachedCanvases.getCanvas("transparent",s,r);this.compositeCtx=this.ctx,this.transparentCanvas=t.canvas,this.ctx=t.context,this.ctx.save(),this.ctx.transform(...tn(this.compositeCtx))}this.ctx.save(),Xn(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=tn(this.ctx)}executeOperatorList(t,e,i,n){const s=t.argsArray,r=t.fnArray;let a=e||0;const o=s.length;if(o===a)return a;const l=o-a>10&&"function"==typeof i,c=l?Date.now()+15:0;let d=0;const h=this.commonObjs,u=this.objs;let p;for(;;){if(void 0!==n&&a===n.nextBreakPoint)return n.breakIt(a,i),a;if(p=r[a],p!==ei.dependency)this[p].apply(this,s[a]);else for(const t of s[a]){const e=t.startsWith("g_")?h:u;if(!e.has(t))return e.get(t,i),a}if(a++,a===o)return a;if(l&&++d>10){if(Date.now()>c)return i(),a;d=0}}}#Pe(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#Pe(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#Re()}#Re(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==t){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const i=t.width,n=t.height;let s,r,a=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),l=i,c=n,d="prescale1";for(;a>2&&l>1||o>2&&c>1;){let e=l,i=c;a>2&&l>1&&(e=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),a/=l/e),o>2&&c>1&&(i=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/i),s=this.cachedCanvases.getCanvas(d,e,i),r=s.context,r.clearRect(0,0,e,i),r.drawImage(t,0,0,l,c,0,0,e,i),t=s.canvas,l=e,c=i,d="prescale1"===d?"prescale2":"prescale1"}return{img:t,paintWidth:l,paintHeight:c}}_createMaskCanvas(t){const e=this.ctx,{width:i,height:n}=t,s=this.current.fillColor,r=this.current.patternFill,a=tn(e);let o,l,c,d;if((t.bitmap||t.data)&&t.count>1){const e=t.bitmap||t.data.buffer;l=JSON.stringify(r?a:[a.slice(0,4),s]),o=this._cachedBitmapsMap.get(e),o||(o=new Map,this._cachedBitmapsMap.set(e,o));const i=o.get(l);if(i&&!r)return{canvas:i,offsetX:Math.round(Math.min(a[0],a[2])+a[4]),offsetY:Math.round(Math.min(a[1],a[3])+a[5])};c=i}c||(d=this.cachedCanvases.getCanvas("maskCanvas",i,n),Wn(d.context,t));let h=Si.transform(a,[1/i,0,0,-1/n,0,0]);h=Si.transform(h,[1,0,0,1,0,-n]);const[u,p,f,g]=Si.getAxialAlignedBoundingBox([0,0,i,n],h),m=Math.round(f-u)||1,v=Math.round(g-p)||1,b=this.cachedCanvases.getCanvas("fillCanvas",m,v),y=b.context,_=u,w=p;y.translate(-_,-w),y.transform(...h),c||(c=this._scaleImage(d.canvas,en(y)),c=c.img,o&&r&&o.set(l,c)),y.imageSmoothingEnabled=Kn(tn(y),t.interpolate),Un(y,c,0,0,c.width,c.height,0,0,i,n),y.globalCompositeOperation="source-in";const A=Si.transform(en(y),[1,0,0,1,-_,-w]);return y.fillStyle=r?s.getPattern(e,this,A,Mn):s,y.fillRect(0,0,i,n),o&&!r&&(this.cachedCanvases.delete("fillCanvas"),o.set(l,b.canvas)),{canvas:b.canvas,offsetX:Math.round(_),offsetY:Math.round(w)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=Yn[t]}setLineJoin(t){this.ctx.lineJoin=Qn[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const i=this.ctx;void 0!==i.setLineDash&&(i.setLineDash(t),i.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,i]of t)switch(e){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,n=this.cachedCanvases.getCanvas(i,t,e);this.suspendedCtx=this.ctx,this.ctx=n.context;const s=this.ctx;s.setTransform(...tn(this.suspendedCtx)),$n(this.suspendedCtx,s),function(t,e){if(t._removeMirroring)throw new Error("Context is already forwarding operations.");t.__originalSave=t.save,t.__originalRestore=t.restore,t.__originalRotate=t.rotate,t.__originalScale=t.scale,t.__originalTranslate=t.translate,t.__originalTransform=t.transform,t.__originalSetTransform=t.setTransform,t.__originalResetTransform=t.resetTransform,t.__originalClip=t.clip,t.__originalMoveTo=t.moveTo,t.__originalLineTo=t.lineTo,t.__originalBezierCurveTo=t.bezierCurveTo,t.__originalRect=t.rect,t.__originalClosePath=t.closePath,t.__originalBeginPath=t.beginPath,t._removeMirroring=()=>{t.save=t.__originalSave,t.restore=t.__originalRestore,t.rotate=t.__originalRotate,t.scale=t.__originalScale,t.translate=t.__originalTranslate,t.transform=t.__originalTransform,t.setTransform=t.__originalSetTransform,t.resetTransform=t.__originalResetTransform,t.clip=t.__originalClip,t.moveTo=t.__originalMoveTo,t.lineTo=t.__originalLineTo,t.bezierCurveTo=t.__originalBezierCurveTo,t.rect=t.__originalRect,t.closePath=t.__originalClosePath,t.beginPath=t.__originalBeginPath,delete t._removeMirroring},t.save=function(){e.save(),this.__originalSave()},t.restore=function(){e.restore(),this.__originalRestore()},t.translate=function(t,i){e.translate(t,i),this.__originalTranslate(t,i)},t.scale=function(t,i){e.scale(t,i),this.__originalScale(t,i)},t.transform=function(t,i,n,s,r,a){e.transform(t,i,n,s,r,a),this.__originalTransform(t,i,n,s,r,a)},t.setTransform=function(t,i,n,s,r,a){e.setTransform(t,i,n,s,r,a),this.__originalSetTransform(t,i,n,s,r,a)},t.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},t.rotate=function(t){e.rotate(t),this.__originalRotate(t)},t.clip=function(t){e.clip(t),this.__originalClip(t)},t.moveTo=function(t,i){e.moveTo(t,i),this.__originalMoveTo(t,i)},t.lineTo=function(t,i){e.lineTo(t,i),this.__originalLineTo(t,i)},t.bezierCurveTo=function(t,i,n,s,r,a){e.bezierCurveTo(t,i,n,s,r,a),this.__originalBezierCurveTo(t,i,n,s,r,a)},t.rect=function(t,i,n,s){e.rect(t,i,n,s),this.__originalRect(t,i,n,s)},t.closePath=function(){e.closePath(),this.__originalClosePath()},t.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}(s,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),$n(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,n){const s=n[0],r=n[1],a=n[2]-s,o=n[3]-r;0!==a&&0!==o&&(this.genericComposeSMask(e.context,i,a,o,e.subtype,e.backdrop,e.transferMap,s,r,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,n,s,r,a,o,l,c,d){let h=t.canvas,u=o-c,p=l-d;if(r)if(u<0||p<0||u+i>h.width||p+n>h.height){const t=this.cachedCanvases.getCanvas("maskExtension",i,n),e=t.context;e.drawImage(h,-u,-p),r.some((t=>0!==t))&&(e.globalCompositeOperation="destination-atop",e.fillStyle=Si.makeHexColor(...r),e.fillRect(0,0,i,n),e.globalCompositeOperation="source-over"),h=t.canvas,u=p=0}else if(r.some((t=>0!==t))){t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const e=new Path2D;e.rect(u,p,i,n),t.clip(e),t.globalCompositeOperation="destination-atop",t.fillStyle=Si.makeHexColor(...r),t.fillRect(u,p,i,n),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),"Alpha"===s&&a?e.filter=this.filterFactory.addAlphaFilter(a):"Luminosity"===s&&(e.filter=this.filterFactory.addLuminosityFilter(a));const f=new Path2D;f.rect(o,l,i,n),e.clip(f),e.globalCompositeOperation="destination-in",e.drawImage(h,u,p,i,n,o,l,i,n),e.restore()}save(){this.inSMaskMode?($n(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),$n(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,i,n,s,r){this.ctx.transform(t,e,i,n,s,r),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i){const n=this.ctx,s=this.current;let r,a,o=s.x,l=s.y;const c=tn(n),d=0===c[0]&&0===c[3]||0===c[1]&&0===c[2],h=d?i.slice(0):null;for(let i=0,u=0,p=t.length;i<p;i++)switch(0|t[i]){case ei.rectangle:o=e[u++],l=e[u++];const t=e[u++],i=e[u++],p=o+t,f=l+i;n.moveTo(o,l),0===t||0===i?n.lineTo(p,f):(n.lineTo(p,l),n.lineTo(p,f),n.lineTo(o,f)),d||s.updateRectMinMax(c,[o,l,p,f]),n.closePath();break;case ei.moveTo:o=e[u++],l=e[u++],n.moveTo(o,l),d||s.updatePathMinMax(c,o,l);break;case ei.lineTo:o=e[u++],l=e[u++],n.lineTo(o,l),d||s.updatePathMinMax(c,o,l);break;case ei.curveTo:r=o,a=l,o=e[u+4],l=e[u+5],n.bezierCurveTo(e[u],e[u+1],e[u+2],e[u+3],o,l),s.updateCurvePathMinMax(c,r,a,e[u],e[u+1],e[u+2],e[u+3],o,l,h),u+=6;break;case ei.curveTo2:r=o,a=l,n.bezierCurveTo(o,l,e[u],e[u+1],e[u+2],e[u+3]),s.updateCurvePathMinMax(c,r,a,o,l,e[u],e[u+1],e[u+2],e[u+3],h),o=e[u+2],l=e[u+3],u+=4;break;case ei.curveTo3:r=o,a=l,o=e[u+2],l=e[u+3],n.bezierCurveTo(e[u],e[u+1],o,l,o,l),s.updateCurvePathMinMax(c,r,a,e[u],e[u+1],o,l,o,l,h),u+=4;break;case ei.closePath:n.closePath()}d&&s.updateScalingPathMinMax(c,h),s.setCurrentPoint(o,l)}closePath(){this.ctx.closePath()}stroke(t=!0){const e=this.ctx,i=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof i&&i?.getPattern?(e.save(),e.strokeStyle=i.getPattern(e,this,en(e),In),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const e=this.ctx,i=this.current.fillColor;let n=!1;this.current.patternFill&&(e.save(),e.fillStyle=i.getPattern(e,this,en(e),Mn),n=!0);const s=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==s&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),n&&e.restore(),t&&this.consumePath(s)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Jn}eoClip(){this.pendingClip=Zn}beginText(){this.current.textMatrix=Ge,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(void 0!==t){e.save(),e.beginPath();for(const i of t)e.setTransform(...i.transform),e.translate(i.x,i.y),i.addToPath(e,i.fontSize);e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}else e.beginPath()}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){const i=this.commonObjs.get(t),n=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(n.fontMatrix=i.fontMatrix||We,0!==n.fontMatrix[0]&&0!==n.fontMatrix[3]||oi("Invalid font matrix for font "+t),e<0?(e=-e,n.fontDirection=-1):n.fontDirection=1,this.current.font=i,this.current.fontSize=e,i.isType3Font)return;const s=i.loadedName||"sans-serif",r=i.systemFontInfo?.css||`"${s}", ${i.fallbackName}`;let a="normal";i.black?a="900":i.bold&&(a="bold");const o=i.italic?"italic":"normal";let l=e;e<16?l=16:e>100&&(l=100),this.current.fontSizeScale=e/l,this.ctx.font=`${o} ${a} ${l}px ${r}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,i,n,s,r){this.current.textMatrix=[t,e,i,n,s,r],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,i,n){const s=this.ctx,r=this.current,a=r.font,o=r.textRenderingMode,l=r.fontSize/r.fontSizeScale,c=3&o,d=!!(4&o),h=r.patternFill&&!a.missingFile;let u;(a.disableFontFace||d||h)&&(u=a.getPathGenerator(this.commonObjs,t)),a.disableFontFace||h?(s.save(),s.translate(e,i),s.beginPath(),u(s,l),n&&s.setTransform(...n),0!==c&&2!==c||s.fill(),1!==c&&2!==c||s.stroke(),s.restore()):(0!==c&&2!==c||s.fillText(t,e,i),1!==c&&2!==c||s.strokeText(t,e,i)),d&&(this.pendingTextPaths||=[]).push({transform:tn(s),x:e,y:i,fontSize:l,addToPath:u})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let t=3;t<e.length;t+=4)if(e[t]>0&&e[t]<255){i=!0;break}return hi(this,"isFontSubpixelAAEnabled",i)}showText(t){const e=this.current,i=e.font;if(i.isType3Font)return this.showType3Text(t);const n=e.fontSize;if(0===n)return;const s=this.ctx,r=e.fontSizeScale,a=e.charSpacing,o=e.wordSpacing,l=e.fontDirection,c=e.textHScale*l,d=t.length,h=i.vertical,u=h?1:-1,p=i.defaultVMetrics,f=n*e.fontMatrix[0],g=0===e.textRenderingMode&&!i.disableFontFace&&!e.patternFill;let m;if(s.save(),s.transform(...e.textMatrix),s.translate(e.x,e.y+e.textRise),l>0?s.scale(c,-1):s.scale(c,1),e.patternFill){s.save();const t=e.fillColor.getPattern(s,this,en(s),Mn);m=tn(s),s.restore(),s.fillStyle=t}let v=e.lineWidth;const b=e.textMatrixScale;if(0===b||0===v){const t=3&e.textRenderingMode;1!==t&&2!==t||(v=this.getSinglePixelWidth())}else v/=b;if(1!==r&&(s.scale(r,r),v/=r),s.lineWidth=v,i.isInvalidPDFjsFont){const i=[];let n=0;for(const e of t)i.push(e.unicode),n+=e.width;return s.fillText(i.join(""),0,0),e.x+=n*f*c,s.restore(),void this.compose()}let y,_=0;for(y=0;y<d;++y){const e=t[y];if("number"==typeof e){_+=u*e*n/1e3;continue}let c=!1;const d=(e.isSpace?o:0)+a,v=e.fontChar,b=e.accent;let w,A,x=e.width;if(h){const t=e.vmetric||p,i=-(e.vmetric?t[1]:.5*x)*f,n=t[2]*f;x=t?-t[0]:x,w=i/r,A=(_+n)/r}else w=_/r,A=0;if(i.remeasure&&x>0){const t=1e3*s.measureText(v).width/n*r;if(x<t&&this.isFontSubpixelAAEnabled){const e=x/t;c=!0,s.save(),s.scale(e,1),w/=e}else x!==t&&(w+=(x-t)/2e3*n/r)}if(this.contentVisible&&(e.isInFont||i.missingFile))if(g&&!b)s.fillText(v,w,A);else if(this.paintChar(v,w,A,m),b){const t=w+n*b.offset.x/r,e=A-n*b.offset.y/r;this.paintChar(b.fontChar,t,e,m)}_+=h?x*f-d*l:x*f+d*l,c&&s.restore()}h?e.y-=_:e.x+=_*c,s.restore(),this.compose()}showType3Text(t){const e=this.ctx,i=this.current,n=i.font,s=i.fontSize,r=i.fontDirection,a=n.vertical?1:-1,o=i.charSpacing,l=i.wordSpacing,c=i.textHScale*r,d=i.fontMatrix||We,h=t.length;let u,p,f,g;if(3!==i.textRenderingMode&&0!==s){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...i.textMatrix),e.translate(i.x,i.y),e.scale(c,r),u=0;u<h;++u){if(p=t[u],"number"==typeof p){g=a*p*s/1e3,this.ctx.translate(g,0),i.x+=g*c;continue}const r=(p.isSpace?l:0)+o,h=n.charProcOperatorList[p.operatorListId];h?(this.contentVisible&&(this.processingType3=p,this.save(),e.scale(s,s),e.transform(...d),this.executeOperatorList(h),this.restore()),f=Si.applyTransform([p.width,0],d)[0]*s+r,e.translate(f,0),i.x+=f*c):oi(`Type3 character "${p.operatorListId}" is not available.`)}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,i,n,s,r){this.ctx.rect(i,n,s-i,r-n),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if("TilingPattern"===t[0]){const i=t[1],n=this.baseTransform||tn(this.ctx),s={createCanvasGraphics:t=>new ts(t,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new qn(t,i,this.ctx,s,n)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,i){this.ctx.strokeStyle=this.current.strokeColor=Si.makeHexColor(t,e,i)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(t,e,i){this.ctx.fillStyle=this.current.fillColor=Si.makeHexColor(t,e,i),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=function(t){switch(t[0]){case"RadialAxial":return new Dn(t);case"Mesh":return new Nn(t);case"Dummy":return new Bn}throw new Error(`Unknown IR type: ${t[0]}`)}(this.getObject(t)),this.cachedPatterns.set(t,i)),e&&(i.matrix=e),i}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const i=this._getPattern(t);e.fillStyle=i.getPattern(e,this,en(e),Ln);const n=en(e);if(n){const{width:t,height:i}=e.canvas,[s,r,a,o]=Si.getAxialAlignedBoundingBox([0,0,t,i],n);this.ctx.fillRect(s,r,a-s,o-r)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){li("Should not call beginInlineImage")}beginImageData(){li("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=tn(this.ctx),e)){const t=e[2]-e[0],i=e[3]-e[1];this.ctx.rect(e[0],e[1],t,i),this.current.updateRectMinMax(tn(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||ai("TODO: Support non-isolated groups."),t.knockout&&oi("Knockout groups not supported.");const i=tn(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let n=Si.getAxialAlignedBoundingBox(t.bbox,tn(e));const s=[0,0,e.canvas.width,e.canvas.height];n=Si.intersect(n,s)||[0,0,0,0];const r=Math.floor(n[0]),a=Math.floor(n[1]),o=Math.max(Math.ceil(n[2])-r,1),l=Math.max(Math.ceil(n[3])-a,1);this.current.startNewPathAndClipBox([0,0,o,l]);let c="groupAt"+this.groupLevel;t.smask&&(c+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(c,o,l),h=d.context;h.translate(-r,-a),h.transform(...i),t.smask?this.smaskStack.push({canvas:d.canvas,context:h,offsetX:r,offsetY:a,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(r,a),e.save()),$n(e,h),this.ctx=h,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const t=tn(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...t);const i=Si.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],t);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(i)}}beginAnnotation(t,e,i,n,s){if(this.#Pe(),Xn(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const n=e[2]-e[0],r=e[3]-e[1];if(s&&this.annotationCanvasMap){(i=i.slice())[4]-=e[0],i[5]-=e[1],(e=e.slice())[0]=e[1]=0,e[2]=n,e[3]=r;const[s,a]=Si.singularValueDecompose2dScale(tn(this.ctx)),{viewportScale:o}=this,l=Math.ceil(n*this.outputScaleX*o),c=Math.ceil(r*this.outputScaleY*o);this.annotationCanvas=this.canvasFactory.create(l,c);const{canvas:d,context:h}=this.annotationCanvas;this.annotationCanvasMap.set(t,d),this.annotationCanvas.savedCtx=this.ctx,this.ctx=h,this.ctx.save(),this.ctx.setTransform(s,0,0,-a,0,r*a),Xn(this.ctx)}else Xn(this.ctx),this.ctx.rect(e[0],e[1],n,r),this.ctx.clip(),this.endPath()}this.current=new Vn(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...n)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#Re(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;(t=this.getObject(t.data,t)).count=e;const i=this.ctx,n=this.processingType3;if(n&&(void 0===n.compiled&&(n.compiled=function(t){const{width:e,height:i}=t;if(e>1e3||i>1e3)return null;const n=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),s=e+1;let r,a,o,l=new Uint8Array(s*(i+1));const c=e+7&-8;let d=new Uint8Array(c*i),h=0;for(const e of t.data){let t=128;for(;t>0;)d[h++]=e&t?0:255,t>>=1}let u=0;for(h=0,0!==d[h]&&(l[0]=1,++u),a=1;a<e;a++)d[h]!==d[h+1]&&(l[a]=d[h]?2:1,++u),h++;for(0!==d[h]&&(l[a]=2,++u),r=1;r<i;r++){h=r*c,o=r*s,d[h-c]!==d[h]&&(l[o]=d[h]?1:8,++u);let t=(d[h]?4:0)+(d[h-c]?8:0);for(a=1;a<e;a++)t=(t>>2)+(d[h+1]?4:0)+(d[h-c+1]?8:0),n[t]&&(l[o+a]=n[t],++u),h++;if(d[h-c]!==d[h]&&(l[o+a]=d[h]?2:4,++u),u>1e3)return null}for(h=c*(i-1),o=r*s,0!==d[h]&&(l[o]=8,++u),a=1;a<e;a++)d[h]!==d[h+1]&&(l[o+a]=d[h]?4:8,++u),h++;if(0!==d[h]&&(l[o+a]=4,++u),u>1e3)return null;const p=new Int32Array([0,s,-1,0,-s,0,0,0,1]),f=new Path2D;for(r=0;u&&r<=i;r++){let t=r*s;const i=t+e;for(;t<i&&!l[t];)t++;if(t===i)continue;f.moveTo(t%s,r);const n=t;let a=l[t];do{const e=p[a];do{t+=e}while(!l[t]);const i=l[t];5!==i&&10!==i?(a=i,l[t]=0):(a=i&51*a>>4,l[t]&=a>>2|a<<2),f.lineTo(t%s,t/s|0),l[t]||--u}while(n!==t);--r}return d=null,l=null,function(t){t.save(),t.scale(1/e,-1/i),t.translate(0,-i),t.fill(f),t.beginPath(),t.restore()}}(t)),n.compiled))return void n.compiled(i);const s=this._createMaskCanvas(t),r=s.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(r,s.offsetX,s.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i=0,n=0,s,r){if(!this.contentVisible)return;t=this.getObject(t.data,t);const a=this.ctx;a.save();const o=tn(a);a.transform(e,i,n,s,0,0);const l=this._createMaskCanvas(t);a.setTransform(1,0,0,1,l.offsetX-o[4],l.offsetY-o[5]);for(let t=0,c=r.length;t<c;t+=2){const c=Si.transform(o,[e,i,n,s,r[t],r[t+1]]),[d,h]=Si.applyTransform([0,0],c);a.drawImage(l.canvas,d,h)}a.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,i=this.current.fillColor,n=this.current.patternFill;for(const s of t){const{data:t,width:r,height:a,transform:o}=s,l=this.cachedCanvases.getCanvas("maskCanvas",r,a),c=l.context;c.save(),Wn(c,this.getObject(t,s)),c.globalCompositeOperation="source-in",c.fillStyle=n?i.getPattern(c,this,en(e),Mn):i,c.fillRect(0,0,r,a),c.restore(),e.save(),e.transform(...o),e.scale(1,-1),Un(e,l.canvas,0,0,r,a,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);e?this.paintInlineImageXObject(e):oi("Dependent image isn't ready yet")}paintImageXObjectRepeat(t,e,i,n){if(!this.contentVisible)return;const s=this.getObject(t);if(!s)return void oi("Dependent image isn't ready yet");const r=s.width,a=s.height,o=[];for(let t=0,s=n.length;t<s;t+=2)o.push({transform:[e,0,0,i,n[t],n[t+1]],x:0,y:0,w:r,h:a});this.paintInlineImageXObjectGroup(s,o)}applyTransferMapsToCanvas(t){return"none"!==this.current.transferMaps&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if("none"===this.current.transferMaps)return t.bitmap;const{bitmap:e,width:i,height:n}=t,s=this.cachedCanvases.getCanvas("inlineImage",i,n),r=s.context;return r.filter=this.current.transferMaps,r.drawImage(e,0,0),r.filter="none",s.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,i=t.height,n=this.ctx;if(this.save(),!Ve){const{filter:t}=n;"none"!==t&&""!==t&&(n.filter="none")}let s;if(n.scale(1/e,-1/i),t.bitmap)s=this.applyTransferMapsToBitmap(t);else if("function"==typeof HTMLElement&&t instanceof HTMLElement||!t.data)s=t;else{const n=this.cachedCanvases.getCanvas("inlineImage",e,i).context;Gn(n,t),s=this.applyTransferMapsToCanvas(n)}const r=this._scaleImage(s,en(n));n.imageSmoothingEnabled=Kn(tn(n),t.interpolate),Un(n,r.img,0,0,r.paintWidth,r.paintHeight,0,-i,e,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const i=this.ctx;let n;if(t.bitmap)n=t.bitmap;else{const e=t.width,i=t.height,s=this.cachedCanvases.getCanvas("inlineImage",e,i).context;Gn(s,t),n=this.applyTransferMapsToCanvas(s)}for(const t of e)i.save(),i.transform(...t.transform),i.scale(1,-1),Un(i,n,t.x,t.y,t.w,t.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){"OC"===t?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const i=this.ctx;this.pendingClip&&(e||(this.pendingClip===Zn?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=tn(this.ctx);if(0===t[1]&&0===t[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),n=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,n)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){const{lineWidth:t}=this.current,{a:e,b:i,c:n,d:s}=this.ctx.getTransform();let r,a;if(0===i&&0===n){const i=Math.abs(e),n=Math.abs(s);if(i===n)if(0===t)r=a=1/i;else{const e=i*t;r=a=e<1?1/e:1}else if(0===t)r=1/i,a=1/n;else{const e=i*t,s=n*t;r=e<1?1/e:1,a=s<1?1/s:1}}else{const o=Math.abs(e*s-i*n),l=Math.hypot(e,i),c=Math.hypot(n,s);if(0===t)r=c/o,a=l/o;else{const e=t*o;r=c>e?c/e:1,a=l>e?l/e:1}}this._cachedScaleForStroking[0]=r,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:i}=this.current,[n,s]=this.getScaleForStroking();if(e.lineWidth=i||1,1===n&&1===s)return void e.stroke();const r=e.getLineDash();if(t&&e.save(),e.scale(n,s),r.length>0){const t=Math.max(n,s);e.setLineDash(r.map((e=>e/t))),e.lineDashOffset/=t}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const t in ei)void 0!==ts.prototype[t]&&(ts.prototype[ei[t]]=ts.prototype[t]);class es{static#De=null;static#Fe="";static get workerPort(){return this.#De}static set workerPort(t){if(!("undefined"!=typeof Worker&&t instanceof Worker)&&null!==t)throw new Error("Invalid `workerPort` type.");this.#De=t}static get workerSrc(){return this.#Fe}static set workerSrc(t){if("string"!=typeof t)throw new Error("Invalid `workerSrc` type.");this.#Fe=t}}function is(t){switch(t instanceof Error||"object"==typeof t&&null!==t||li('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),t.name){case"AbortException":return new yi(t.message);case"MissingPDFException":return new mi(t.message);case"PasswordException":return new pi(t.message,t.code);case"UnexpectedResponseException":return new vi(t.message,t.status);case"UnknownErrorException":return new fi(t.message,t.details);default:return new fi(t.message,t.toString())}}class ns{constructor(t,e,i){this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=t=>{const e=t.data;if(e.targetName!==this.sourceName)return;if(e.stream)return void this.#Oe(e);if(e.callback){const t=e.callbackId,i=this.callbackCapabilities[t];if(!i)throw new Error(`Cannot resolve callback ${t}`);if(delete this.callbackCapabilities[t],1===e.callback)i.resolve(e.data);else{if(2!==e.callback)throw new Error("Unexpected callback case");i.reject(is(e.reason))}return}const n=this.actionHandler[e.action];if(!n)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const t=this.sourceName,s=e.sourceName;new Promise((function(t){t(n(e.data))})).then((function(n){i.postMessage({sourceName:t,targetName:s,callback:1,callbackId:e.callbackId,data:n})}),(function(n){i.postMessage({sourceName:t,targetName:s,callback:2,callbackId:e.callbackId,reason:is(n)})}))}else e.streamId?this.#Ne(e):n(e.data)},i.addEventListener("message",this._onComObjOnMessage)}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const n=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[n]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:n,data:e},i)}catch(t){s.reject(t)}return s.promise}sendWithStream(t,e,i,n){const s=this.streamId++,r=this.sourceName,a=this.targetName,o=this.comObj;return new ReadableStream({start:i=>{const l=Promise.withResolvers();return this.streamControllers[s]={controller:i,startCall:l,pullCall:null,cancelCall:null,isClosed:!1},o.postMessage({sourceName:r,targetName:a,action:t,streamId:s,data:e,desiredSize:i.desiredSize},n),l.promise},pull:t=>{const e=Promise.withResolvers();return this.streamControllers[s].pullCall=e,o.postMessage({sourceName:r,targetName:a,stream:6,streamId:s,desiredSize:t.desiredSize}),e.promise},cancel:t=>{ci(t instanceof Error,"cancel must have a valid reason");const e=Promise.withResolvers();return this.streamControllers[s].cancelCall=e,this.streamControllers[s].isClosed=!0,o.postMessage({sourceName:r,targetName:a,stream:1,streamId:s,reason:is(t)}),e.promise}},i)}#Ne(t){const e=t.streamId,i=this.sourceName,n=t.sourceName,s=this.comObj,r=this,a=this.actionHandler[t.action],o={enqueue(t,r=1,a){if(this.isCancelled)return;const o=this.desiredSize;this.desiredSize-=r,o>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:i,targetName:n,stream:4,streamId:e,chunk:t},a)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:n,stream:3,streamId:e}),delete r.streamSinks[e])},error(t){ci(t instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:n,stream:5,streamId:e,reason:is(t)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};o.sinkCapability.resolve(),o.ready=o.sinkCapability.promise,this.streamSinks[e]=o,new Promise((function(e){e(a(t.data,o))})).then((function(){s.postMessage({sourceName:i,targetName:n,stream:8,streamId:e,success:!0})}),(function(t){s.postMessage({sourceName:i,targetName:n,stream:8,streamId:e,reason:is(t)})}))}#Oe(t){const e=t.streamId,i=this.sourceName,n=t.sourceName,s=this.comObj,r=this.streamControllers[e],a=this.streamSinks[e];switch(t.stream){case 8:t.success?r.startCall.resolve():r.startCall.reject(is(t.reason));break;case 7:t.success?r.pullCall.resolve():r.pullCall.reject(is(t.reason));break;case 6:if(!a){s.postMessage({sourceName:i,targetName:n,stream:7,streamId:e,success:!0});break}a.desiredSize<=0&&t.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=t.desiredSize,new Promise((function(t){t(a.onPull?.())})).then((function(){s.postMessage({sourceName:i,targetName:n,stream:7,streamId:e,success:!0})}),(function(t){s.postMessage({sourceName:i,targetName:n,stream:7,streamId:e,reason:is(t)})}));break;case 4:if(ci(r,"enqueue should have stream controller"),r.isClosed)break;r.controller.enqueue(t.chunk);break;case 3:if(ci(r,"close should have stream controller"),r.isClosed)break;r.isClosed=!0,r.controller.close(),this.#Be(r,e);break;case 5:ci(r,"error should have stream controller"),r.controller.error(is(t.reason)),this.#Be(r,e);break;case 2:t.success?r.cancelCall.resolve():r.cancelCall.reject(is(t.reason)),this.#Be(r,e);break;case 1:if(!a)break;new Promise((function(e){e(a.onCancel?.(is(t.reason)))})).then((function(){s.postMessage({sourceName:i,targetName:n,stream:2,streamId:e,success:!0})}),(function(t){s.postMessage({sourceName:i,targetName:n,stream:2,streamId:e,reason:is(t)})})),a.sinkCapability.reject(is(t.reason)),a.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#Be(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}class ss{#qe;#He;constructor({parsedData:t,rawData:e}){this.#qe=t,this.#He=e}getRaw(){return this.#He}get(t){return this.#qe.get(t)??null}getAll(){return Ai(this.#qe)}has(t){return this.#qe.has(t)}}const rs=Symbol("INTERNAL");class as{#ze=!1;#je=!1;#Ue=!1;#Ve=!0;constructor(t,{name:e,intent:i,usage:n}){this.#ze=!!(2&t),this.#je=!!(4&t),this.name=e,this.intent=i,this.usage=n}get visible(){if(this.#Ue)return this.#Ve;if(!this.#Ve)return!1;const{print:t,view:e}=this.usage;return this.#ze?"OFF"!==e?.viewState:!this.#je||"OFF"!==t?.printState}_setVisible(t,e,i=!1){t!==rs&&li("Internal method `_setVisible` called."),this.#Ue=i,this.#Ve=e}}class os{#Ge=null;#We=new Map;#$e=null;#Xe=null;constructor(t,e=2){if(this.renderingIntent=e,this.name=null,this.creator=null,null!==t){this.name=t.name,this.creator=t.creator,this.#Xe=t.order;for(const i of t.groups)this.#We.set(i.id,new as(e,i));if("OFF"===t.baseState)for(const t of this.#We.values())t._setVisible(rs,!1);for(const e of t.on)this.#We.get(e)._setVisible(rs,!0);for(const e of t.off)this.#We.get(e)._setVisible(rs,!1);this.#$e=this.getHash()}}#Ke(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let n=1;n<e;n++){const e=t[n];let s;if(Array.isArray(e))s=this.#Ke(e);else{if(!this.#We.has(e))return oi(`Optional content group not found: ${e}`),!0;s=this.#We.get(e).visible}switch(i){case"And":if(!s)return!1;break;case"Or":if(s)return!0;break;case"Not":return!s;default:return!0}}return"And"===i}isVisible(t){if(0===this.#We.size)return!0;if(!t)return ai("Optional content group not defined."),!0;if("OCG"===t.type)return this.#We.has(t.id)?this.#We.get(t.id).visible:(oi(`Optional content group not found: ${t.id}`),!0);if("OCMD"===t.type){if(t.expression)return this.#Ke(t.expression);if(!t.policy||"AnyOn"===t.policy){for(const e of t.ids){if(!this.#We.has(e))return oi(`Optional content group not found: ${e}`),!0;if(this.#We.get(e).visible)return!0}return!1}if("AllOn"===t.policy){for(const e of t.ids){if(!this.#We.has(e))return oi(`Optional content group not found: ${e}`),!0;if(!this.#We.get(e).visible)return!1}return!0}if("AnyOff"===t.policy){for(const e of t.ids){if(!this.#We.has(e))return oi(`Optional content group not found: ${e}`),!0;if(!this.#We.get(e).visible)return!0}return!1}if("AllOff"===t.policy){for(const e of t.ids){if(!this.#We.has(e))return oi(`Optional content group not found: ${e}`),!0;if(this.#We.get(e).visible)return!1}return!0}return oi(`Unknown optional content policy ${t.policy}.`),!0}return oi(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0){const i=this.#We.get(t);i?(i._setVisible(rs,!!e,!0),this.#Ge=null):oi(`Optional content group not found: ${t}`)}setOCGState({state:t,preserveRB:e}){let i;for(const e of t){switch(e){case"ON":case"OFF":case"Toggle":i=e;continue}const t=this.#We.get(e);if(t)switch(i){case"ON":t._setVisible(rs,!0);break;case"OFF":t._setVisible(rs,!1);break;case"Toggle":t._setVisible(rs,!t.visible)}}this.#Ge=null}get hasInitialVisibility(){return null===this.#$e||this.getHash()===this.#$e}getOrder(){return this.#We.size?this.#Xe?this.#Xe.slice():[...this.#We.keys()]:null}getGroups(){return this.#We.size>0?Ai(this.#We):null}getGroup(t){return this.#We.get(t)||null}getHash(){if(null!==this.#Ge)return this.#Ge;const t=new yn;for(const[e,i]of this.#We)t.update(`${e}:${i.visible}`);return this.#Ge=t.hexdigest()}}class ls{constructor(t,{disableRange:e=!1,disableStream:i=!1}){ci(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:n,initialData:s,progressiveDone:r,contentDispositionFilename:a}=t;if(this._queuedChunks=[],this._progressiveDone=r,this._contentDispositionFilename=a,s?.length>0){const t=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(t)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!e,this._contentLength=n,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener(((t,e)=>{this._onReceiveData({begin:t,chunk:e})})),t.addProgressListener(((t,e)=>{this._onProgress({loaded:t,total:e})})),t.addProgressiveReadListener((t=>{this._onReceiveData({chunk:t})})),t.addProgressiveDoneListener((()=>{this._onProgressiveDone()})),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const i=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;void 0===t?this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i):ci(this._rangeReaders.some((function(e){return e._begin===t&&(e._enqueue(i),!0)})),"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){void 0===t.total?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){ci(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new cs(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new ds(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}}class cs{constructor(t,e,i=!1,n=null){this._stream=t,this._done=i||!1,this._filename=Vi(n)?n:null,this._queuedChunks=e||[],this._loaded=0;for(const t of this._queuedChunks)this._loaded+=t.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class ds{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(0===this._requests.length)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function hs({getResponseHeader:t,isHttp:e,rangeChunkSize:i,disableRange:n}){const s={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(t("Content-Length"),10);return Number.isInteger(r)?(s.suggestedLength=r,r<=2*i||n||!e||"bytes"!==t("Accept-Ranges")||"identity"!==(t("Content-Encoding")||"identity")||(s.allowRangeRequests=!0),s):s}function us(t){const e=t("Content-Disposition");if(e){let t=function(t){let e=!0,i=n("filename\\*","i").exec(t);if(i){i=i[1];let t=a(i);return t=unescape(t),t=o(t),t=l(t),r(t)}if(i=function(t){const e=[];let i;const s=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(i=s.exec(t));){let[,t,n,s]=i;if(t=parseInt(t,10),t in e){if(0===t)break}else e[t]=[n,s]}const r=[];for(let t=0;t<e.length&&t in e;++t){let[i,n]=e[t];n=a(n),i&&(n=unescape(n),0===t&&(n=o(n))),r.push(n)}return r.join("")}(t),i)return r(l(i));if(i=n("filename","i").exec(t),i){i=i[1];let t=a(i);return t=l(t),r(t)}function n(t,e){return new RegExp("(?:^|;)\\s*"+t+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',e)}function s(t,i){if(t){if(!/^[\x00-\xFF]+$/.test(i))return i;try{const n=new TextDecoder(t,{fatal:!0}),s=wi(i);i=n.decode(s),e=!1}catch{}}return i}function r(t){return e&&/[\x80-\xff]/.test(t)&&(t=s("utf-8",t),e&&(t=s("iso-8859-1",t))),t}function a(t){if(t.startsWith('"')){const e=t.slice(1).split('\\"');for(let t=0;t<e.length;++t){const i=e[t].indexOf('"');-1!==i&&(e[t]=e[t].slice(0,i),e.length=t+1),e[t]=e[t].replaceAll(/\\(.)/g,"$1")}t=e.join('"')}return t}function o(t){const e=t.indexOf("'");return-1===e?t:s(t.slice(0,e),t.slice(e+1).replace(/^[^']*'/,""))}function l(t){return!t.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(t)?t:t.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(function(t,e,i,n){if("q"===i||"Q"===i)return s(e,n=(n=n.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,(function(t,e){return String.fromCharCode(parseInt(e,16))})));try{n=atob(n)}catch{}return s(e,n)}))}return""}(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Vi(t))return t}return null}function ps(t,e){return 404===t||0===t&&e.startsWith("file:")?new mi('Missing PDF "'+e+'".'):new vi(`Unexpected server response (${t}) while retrieving PDF "${e}".`,t)}function fs(t){return 200===t||206===t}function gs(t,e,i){return{method:"GET",headers:t,signal:i.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function ms(t){const e=new Headers;for(const i in t){const n=t[i];void 0!==n&&e.append(i,n)}return e}function vs(t){return t instanceof Uint8Array?t.buffer:t instanceof ArrayBuffer?t:(oi(`getArrayBuffer - unexpected data format: ${t}`),new Uint8Array(t).buffer)}class bs{constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return ci(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new ys(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new _s(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class ys{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._headers=ms(this._stream.httpHeaders);const i=e.url;fetch(i,gs(this._headers,this._withCredentials,this._abortController)).then((t=>{if(!fs(t.status))throw ps(t.status,i);this._reader=t.body.getReader(),this._headersCapability.resolve();const e=e=>t.headers.get(e),{allowRangeRequests:n,suggestedLength:s}=hs({getResponseHeader:e,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=n,this._contentLength=s||this._contentLength,this._filename=us(e),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new yi("Streaming is disabled."))})).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:vs(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class _s{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;const n=t.source;this._withCredentials=n.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!n.disableStream,this._abortController=new AbortController,this._headers=ms(this._stream.httpHeaders),this._headers.append("Range",`bytes=${e}-${i-1}`);const s=n.url;fetch(s,gs(this._headers,this._withCredentials,this._abortController)).then((t=>{if(!fs(t.status))throw ps(t.status,s);this._readCapability.resolve(),this._reader=t.body.getReader()})).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:vs(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class ws{constructor(t,e={}){this.url=t,this.isHttp=/^https?:/i.test(t),this.httpHeaders=this.isHttp&&e.httpHeaders||Object.create(null),this.withCredentials=e.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(t,e,i){const n={begin:t,end:e};for(const t in i)n[t]=i[t];return this.request(n)}requestFull(t){return this.request(t)}request(t){const e=new XMLHttpRequest,i=this.currXhrId++,n=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const t in this.httpHeaders){const i=this.httpHeaders[t];void 0!==i&&e.setRequestHeader(t,i)}return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),n.expectedStatus=206):n.expectedStatus=200,e.responseType="arraybuffer",t.onError&&(e.onerror=function(i){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),n.onHeadersReceived=t.onHeadersReceived,n.onDone=t.onDone,n.onError=t.onError,n.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){const i=this.pendingRequests[t];i&&i.onProgress?.(e)}onStateChange(t,e){const i=this.pendingRequests[t];if(!i)return;const n=i.xhr;if(n.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),4!==n.readyState)return;if(!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],0===n.status&&this.isHttp)return void i.onError?.(n.status);const s=n.status||200;if((200!==s||206!==i.expectedStatus)&&s!==i.expectedStatus)return void i.onError?.(n.status);const r=function(t){const e=t.response;return"string"!=typeof e?e:wi(e).buffer}(n);if(206===s){const t=n.getResponseHeader("Content-Range"),e=/bytes (\d+)-(\d+)\/(\d+)/.exec(t);i.onDone({begin:parseInt(e[1],10),chunk:r})}else r?i.onDone({begin:0,chunk:r}):i.onError?.(n.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class As{constructor(t){this._source=t,this._manager=new ws(t.url,{httpHeaders:t.httpHeaders,withCredentials:t.withCredentials}),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return ci(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new xs(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const i=new Es(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class xs{constructor(t,e){this._manager=t;const i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=t.requestFull(i),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t),i=t=>e.getResponseHeader(t),{allowRangeRequests:n,suggestedLength:s}=hs({getResponseHeader:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});n&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=us(i),this._isRangeSupported&&this._manager.abortRequest(t),this._headersReceivedCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=ps(t,this._url),this._headersReceivedCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersReceivedCapability.reject(t);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Es{constructor(t,e,i){this._manager=t;const n={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._requestId=t.requestRange(e,i,n),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError=ps(t,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Ss=/^[a-z][a-z0-9\-+.]+:/i;function Ts(t,e,i){return"http:"===t.protocol?Cn.get("http").request(t,{headers:e},i):Cn.get("https").request(t,{headers:e},i)}class Cs{constructor(t){this.source=t,this.url=function(t){if(Ss.test(t))return new URL(t);const e=Cn.get("url");return new URL(e.pathToFileURL(t))}(t.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return ci(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new Ps(this):new Is(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=this.isFsUrl?new Rs(this,t,e):new Ls(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class ks{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return null===t?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",(()=>{this._readCapability.resolve()})),t.on("end",(()=>{t.destroy(),this._done=!0,this._readCapability.resolve()})),t.on("error",(t=>{this._error(t)})),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new yi("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Ms{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const e=t.source;this._isStreamingSupported=!e.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return null===t?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",(()=>{this._readCapability.resolve()})),t.on("end",(()=>{t.destroy(),this._done=!0,this._readCapability.resolve()})),t.on("error",(t=>{this._error(t)})),this._storedError&&this._readableStream.destroy(this._storedError)}}class Is extends ks{constructor(t){super(t),this._request=Ts(this._url,t.httpHeaders,(e=>{if(404===e.statusCode){const t=new mi(`Missing PDF "${this._url}".`);return this._storedError=t,void this._headersCapability.reject(t)}this._headersCapability.resolve(),this._setReadableStream(e);const i=t=>this._readableStream.headers[t.toLowerCase()],{allowRangeRequests:n,suggestedLength:s}=hs({getResponseHeader:i,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=n,this._contentLength=s||this._contentLength,this._filename=us(i)})),this._request.on("error",(t=>{this._storedError=t,this._headersCapability.reject(t)})),this._request.end()}}class Ls extends Ms{constructor(t,e,i){super(t),this._httpHeaders={};for(const e in t.httpHeaders){const i=t.httpHeaders[e];void 0!==i&&(this._httpHeaders[e]=i)}this._httpHeaders.Range=`bytes=${e}-${i-1}`,this._request=Ts(this._url,this._httpHeaders,(t=>{if(404!==t.statusCode)this._setReadableStream(t);else{const t=new mi(`Missing PDF "${this._url}".`);this._storedError=t}})),this._request.on("error",(t=>{this._storedError=t})),this._request.end()}}class Ps extends ks{constructor(t){super(t);const e=Cn.get("fs");e.promises.lstat(this._url).then((t=>{this._contentLength=t.size,this._setReadableStream(e.createReadStream(this._url)),this._headersCapability.resolve()}),(t=>{"ENOENT"===t.code&&(t=new mi(`Missing PDF "${this._url}".`)),this._storedError=t,this._headersCapability.reject(t)}))}}class Rs extends Ms{constructor(t,e,i){super(t);const n=Cn.get("fs");this._setReadableStream(n.createReadStream(this._url,{start:e,end:i-1}))}}const Ds=30;class Fs{#Ye=Promise.withResolvers();#ut=null;#Qe=!1;#Je=!!globalThis.FontInspector?.enabled;#Ze=null;#ti=null;#ei=0;#ii=0;#ni=null;#si=null;#ri=0;#ai=0;#oi=Object.create(null);#li=[];#ci=null;#di=[];#hi=new WeakMap;#ui=null;static#pi=new Map;static#fi=new Map;static#gi=null;static#mi=new Set;constructor({textContentSource:t,container:e,viewport:i}){if(t instanceof ReadableStream)this.#ci=t;else{if("object"!=typeof t)throw new Error('No "textContentSource" parameter specified.');this.#ci=new ReadableStream({start(e){e.enqueue(t),e.close()}})}this.#ut=this.#si=e,this.#ai=i.scale*(globalThis.devicePixelRatio||1),this.#ri=i.rotation,this.#ti={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:null};const{pageWidth:n,pageHeight:s,pageX:r,pageY:a}=i.rawDims;this.#ui=[1,0,0,-1,-r,a+s],this.#ii=n,this.#ei=s,Fs.#vi(),nn(e,i),this.#Ye.promise.catch((()=>{})).then((()=>{Fs.#mi.delete(this),this.#ti=null,this.#oi=null}))}render(){const t=()=>{this.#ni.read().then((({value:e,done:i})=>{i?this.#Ye.resolve():(this.#Ze??=e.lang,Object.assign(this.#oi,e.styles),this.#bi(e.items),t())}),this.#Ye.reject)};return this.#ni=this.#ci.getReader(),Fs.#mi.add(this),t(),this.#Ye.promise}update({viewport:t,onBefore:e=null}){const i=t.scale*(globalThis.devicePixelRatio||1),n=t.rotation;if(n!==this.#ri&&(e?.(),this.#ri=n,nn(this.#si,{rotation:n})),i!==this.#ai){e?.(),this.#ai=i;const t={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:Fs.#yi(this.#Ze)};for(const e of this.#di)t.properties=this.#hi.get(e),t.div=e,this.#_i(t)}}cancel(){const t=new yi("TextLayer task cancelled.");this.#ni?.cancel(t).catch((()=>{})),this.#ni=null,this.#Ye.reject(t)}get textDivs(){return this.#di}get textContentItemsStr(){return this.#li}#bi(t){if(this.#Qe)return;this.#ti.ctx??=Fs.#yi(this.#Ze);const e=this.#di,i=this.#li;for(const n of t){if(e.length>1e5)return oi("Ignoring additional textDivs for performance reasons."),void(this.#Qe=!0);if(void 0!==n.str)i.push(n.str),this.#wi(n);else if("beginMarkedContentProps"===n.type||"beginMarkedContent"===n.type){const t=this.#ut;this.#ut=document.createElement("span"),this.#ut.classList.add("markedContent"),null!==n.id&&this.#ut.setAttribute("id",`${n.id}`),t.append(this.#ut)}else"endMarkedContent"===n.type&&(this.#ut=this.#ut.parentNode)}}#wi(t){const e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:""!==t.str,hasEOL:t.hasEOL,fontSize:0};this.#di.push(e);const n=Si.transform(this.#ui,t.transform);let s=Math.atan2(n[1],n[0]);const r=this.#oi[t.fontName];r.vertical&&(s+=Math.PI/2);const a=this.#Je&&r.fontSubstitution||r.fontFamily,o=Math.hypot(n[2],n[3]),l=o*Fs.#Ai(a,this.#Ze);let c,d;0===s?(c=n[4],d=n[5]-l):(c=n[4]+l*Math.sin(s),d=n[5]-l*Math.cos(s));const h="calc(var(--scale-factor)*",u=e.style;this.#ut===this.#si?(u.left=`${(100*c/this.#ii).toFixed(2)}%`,u.top=`${(100*d/this.#ei).toFixed(2)}%`):(u.left=`${h}${c.toFixed(2)}px)`,u.top=`${h}${d.toFixed(2)}px)`),u.fontSize=`${h}${(Fs.#gi*o).toFixed(2)}px)`,u.fontFamily=a,i.fontSize=o,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#Je&&(e.dataset.fontName=r.fontSubstitutionLoadedName||t.fontName),0!==s&&(i.angle=s*(180/Math.PI));let p=!1;if(t.str.length>1)p=!0;else if(" "!==t.str&&t.transform[0]!==t.transform[3]){const e=Math.abs(t.transform[0]),i=Math.abs(t.transform[3]);e!==i&&Math.max(e,i)/Math.min(e,i)>1.5&&(p=!0)}if(p&&(i.canvasWidth=r.vertical?t.height:t.width),this.#hi.set(e,i),this.#ti.div=e,this.#ti.properties=i,this.#_i(this.#ti),i.hasText&&this.#ut.append(e),i.hasEOL){const t=document.createElement("br");t.setAttribute("role","presentation"),this.#ut.append(t)}}#_i(t){const{div:e,properties:i,ctx:n,prevFontSize:s,prevFontFamily:r}=t,{style:a}=e;let o="";if(Fs.#gi>1&&(o=`scale(${1/Fs.#gi})`),0!==i.canvasWidth&&i.hasText){const{fontFamily:l}=a,{canvasWidth:c,fontSize:d}=i;s===d&&r===l||(n.font=`${d*this.#ai}px ${l}`,t.prevFontSize=d,t.prevFontFamily=l);const{width:h}=n.measureText(e.textContent);h>0&&(o=`scaleX(${c*this.#ai/h}) ${o}`)}0!==i.angle&&(o=`rotate(${i.angle}deg) ${o}`),o.length>0&&(a.transform=o)}static cleanup(){if(!(this.#mi.size>0)){this.#pi.clear();for(const{canvas:t}of this.#fi.values())t.remove();this.#fi.clear()}}static#yi(t=null){let e=this.#fi.get(t||="");if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#fi.set(t,e)}return e}static#vi(){if(null!==this.#gi)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#gi=t.getBoundingClientRect().height,t.remove()}static#Ai(t,e){const i=this.#pi.get(t);if(i)return i;const n=this.#yi(e),s=n.font;n.canvas.width=n.canvas.height=Ds,n.font=`30px ${t}`;const r=n.measureText("");let a=r.fontBoundingBoxAscent,o=Math.abs(r.fontBoundingBoxDescent);if(a){const e=a/(a+o);return this.#pi.set(t,e),n.canvas.width=n.canvas.height=0,n.font=s,e}n.strokeStyle="red",n.clearRect(0,0,Ds,Ds),n.strokeText("g",0,0);let l=n.getImageData(0,0,Ds,Ds).data;o=0;for(let t=l.length-1-3;t>=0;t-=4)if(l[t]>0){o=Math.ceil(t/4/Ds);break}n.clearRect(0,0,Ds,Ds),n.strokeText("A",0,Ds),l=n.getImageData(0,0,Ds,Ds).data,a=0;for(let t=0,e=l.length;t<e;t+=4)if(l[t]>0){a=Ds-Math.floor(t/4/Ds);break}n.canvas.width=n.canvas.height=0,n.font=s;const c=a?a/(a+o):.8;return this.#pi.set(t,c),c}}class Os{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};return function t(i){if(!i)return;let n=null;const s=i.name;if("#text"===s)n=i.value;else{if(!Os.shouldBuildText(s))return;i?.attributes?.textContent?n=i.attributes.textContent:i.value&&(n=i.value)}if(null!==n&&e.push({str:n}),i.children)for(const e of i.children)t(e)}(t),i}static shouldBuildText(t){return!("textarea"===t||"input"===t||"option"===t||"select"===t)}}const Ns=65536,Bs=Ve?class extends Li{_createCanvas(t,e){return Cn.get("canvas").createCanvas(t,e)}}:class extends Li{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}={}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}},qs=Ve?class extends Pi{_fetchData(t,e){return kn(t).then((t=>({cMapData:t,compressionType:e})))}}:Bi,Hs=Ve?class extends Ii{}:class extends Ii{#xi;#Ei;#Si;#Ti;#Ci;#ki;#y=0;constructor({docId:t,ownerDocument:e=globalThis.document}={}){super(),this.#Ti=t,this.#Ci=e}get#w(){return this.#Ei||=new Map}get#Mi(){return this.#ki||=new Map}get#Ii(){if(!this.#Si){const t=this.#Ci.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const i=this.#Ci.createElementNS(Fi,"svg");i.setAttribute("width",0),i.setAttribute("height",0),this.#Si=this.#Ci.createElementNS(Fi,"defs"),t.append(i),i.append(this.#Si),this.#Ci.body.append(t)}return this.#Si}#Li(t){if(1===t.length){const e=t[0],i=new Array(256);for(let t=0;t<256;t++)i[t]=e[t]/255;const n=i.join(",");return[n,n,n]}const[e,i,n]=t,s=new Array(256),r=new Array(256),a=new Array(256);for(let t=0;t<256;t++)s[t]=e[t]/255,r[t]=i[t]/255,a[t]=n[t]/255;return[s.join(","),r.join(","),a.join(",")]}#Pi(t){if(void 0===this.#xi){this.#xi="";const t=this.#Ci.URL;t!==this.#Ci.baseURI&&(Ui(t)?oi('#createUrl: ignore "data:"-URL for performance reasons.'):this.#xi=t.split("#",1)[0])}return`url(${this.#xi}#${t})`}addFilter(t){if(!t)return"none";let e=this.#w.get(t);if(e)return e;const[i,n,s]=this.#Li(t),r=1===t.length?i:`${i}${n}${s}`;if(e=this.#w.get(r),e)return this.#w.set(t,e),e;const a=`g_${this.#Ti}_transfer_map_${this.#y++}`,o=this.#Pi(a);this.#w.set(t,o),this.#w.set(r,o);const l=this.#Ri(a);return this.#Di(i,n,s,l),o}addHCMFilter(t,e){const i=`${t}-${e}`,n="base";let s=this.#Mi.get(n);if(s?.key===i)return s.url;if(s?(s.filter?.remove(),s.key=i,s.url="none",s.filter=null):(s={key:i,url:"none",filter:null},this.#Mi.set(n,s)),!t||!e)return s.url;const r=this.#Fi(t);t=Si.makeHexColor(...r);const a=this.#Fi(e);if(e=Si.makeHexColor(...a),this.#Ii.style.color="","#000000"===t&&"#ffffff"===e||t===e)return s.url;const o=new Array(256);for(let t=0;t<=255;t++){const e=t/255;o[t]=e<=.03928?e/12.92:((e+.055)/1.055)**2.4}const l=o.join(","),c=`g_${this.#Ti}_hcm_filter`,d=s.filter=this.#Ri(c);this.#Di(l,l,l,d),this.#Oi(d);const h=(t,e)=>{const i=r[t]/255,n=a[t]/255,s=new Array(e+1);for(let t=0;t<=e;t++)s[t]=i+t/e*(n-i);return s.join(",")};return this.#Di(h(0,5),h(1,5),h(2,5),d),s.url=this.#Pi(c),s.url}addAlphaFilter(t){let e=this.#w.get(t);if(e)return e;const[i]=this.#Li([t]),n=`alpha_${i}`;if(e=this.#w.get(n),e)return this.#w.set(t,e),e;const s=`g_${this.#Ti}_alpha_map_${this.#y++}`,r=this.#Pi(s);this.#w.set(t,r),this.#w.set(n,r);const a=this.#Ri(s);return this.#Ni(i,a),r}addLuminosityFilter(t){let e,i,n=this.#w.get(t||"luminosity");if(n)return n;if(t?([e]=this.#Li([t]),i=`luminosity_${e}`):i="luminosity",n=this.#w.get(i),n)return this.#w.set(t,n),n;const s=`g_${this.#Ti}_luminosity_map_${this.#y++}`,r=this.#Pi(s);this.#w.set(t,r),this.#w.set(i,r);const a=this.#Ri(s);return this.#Bi(a),t&&this.#Ni(e,a),r}addHighlightHCMFilter(t,e,i,n,s){const r=`${e}-${i}-${n}-${s}`;let a=this.#Mi.get(t);if(a?.key===r)return a.url;if(a?(a.filter?.remove(),a.key=r,a.url="none",a.filter=null):(a={key:r,url:"none",filter:null},this.#Mi.set(t,a)),!e||!i)return a.url;const[o,l]=[e,i].map(this.#Fi.bind(this));let c=Math.round(.2126*o[0]+.7152*o[1]+.0722*o[2]),d=Math.round(.2126*l[0]+.7152*l[1]+.0722*l[2]),[h,u]=[n,s].map(this.#Fi.bind(this));d<c&&([c,d,h,u]=[d,c,u,h]),this.#Ii.style.color="";const p=(t,e,i)=>{const n=new Array(256),s=(d-c)/i,r=t/255,a=(e-t)/(255*i);let o=0;for(let t=0;t<=i;t++){const e=Math.round(c+t*s),i=r+t*a;for(let t=o;t<=e;t++)n[t]=i;o=e+1}for(let t=o;t<256;t++)n[t]=n[o-1];return n.join(",")},f=`g_${this.#Ti}_hcm_${t}_filter`,g=a.filter=this.#Ri(f);return this.#Oi(g),this.#Di(p(h[0],u[0],5),p(h[1],u[1],5),p(h[2],u[2],5),g),a.url=this.#Pi(f),a.url}destroy(t=!1){t&&0!==this.#Mi.size||(this.#Si&&(this.#Si.parentNode.parentNode.remove(),this.#Si=null),this.#Ei&&(this.#Ei.clear(),this.#Ei=null),this.#y=0)}#Bi(t){const e=this.#Ci.createElementNS(Fi,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#Oi(t){const e=this.#Ci.createElementNS(Fi,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#Ri(t){const e=this.#Ci.createElementNS(Fi,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#Ii.append(e),e}#qi(t,e,i){const n=this.#Ci.createElementNS(Fi,e);n.setAttribute("type","discrete"),n.setAttribute("tableValues",i),t.append(n)}#Di(t,e,i,n){const s=this.#Ci.createElementNS(Fi,"feComponentTransfer");n.append(s),this.#qi(s,"feFuncR",t),this.#qi(s,"feFuncG",e),this.#qi(s,"feFuncB",i)}#Ni(t,e){const i=this.#Ci.createElementNS(Fi,"feComponentTransfer");e.append(i),this.#qi(i,"feFuncA",t)}#Fi(t){return this.#Ii.style.color=t,Zi(getComputedStyle(this.#Ii).getPropertyValue("color"))}},zs=Ve?class extends Ri{_fetchData(t){return kn(t)}}:qi;function js(t={}){"string"==typeof t||t instanceof URL?t={url:t}:(t instanceof ArrayBuffer||ArrayBuffer.isView(t))&&(t={data:t});const e=new Vs,{docId:i}=e,n=t.url?function(t){if(t instanceof URL)return t.href;try{return new URL(t,window.location).href}catch{if(Ve&&"string"==typeof t)return t}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}(t.url):null,s=t.data?function(t){if(Ve&&"undefined"!=typeof Buffer&&t instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength)return t;if("string"==typeof t)return wi(t);if(t instanceof ArrayBuffer||ArrayBuffer.isView(t)||"object"==typeof t&&!isNaN(t?.length))return new Uint8Array(t);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}(t.data):null,r=t.httpHeaders||null,a=!0===t.withCredentials,o=t.password??null,l=t.range instanceof Gs?t.range:null,c=Number.isInteger(t.rangeChunkSize)&&t.rangeChunkSize>0?t.rangeChunkSize:Ns;let d=t.worker instanceof Ks?t.worker:null;const h=t.verbosity,u="string"!=typeof t.docBaseUrl||Ui(t.docBaseUrl)?null:t.docBaseUrl,p="string"==typeof t.cMapUrl?t.cMapUrl:null,f=!1!==t.cMapPacked,g=t.CMapReaderFactory||qs,m="string"==typeof t.standardFontDataUrl?t.standardFontDataUrl:null,v=t.StandardFontDataFactory||zs,b=!0!==t.stopAtErrors,y=Number.isInteger(t.maxImageSize)&&t.maxImageSize>-1?t.maxImageSize:-1,_=!1!==t.isEvalSupported,w="boolean"==typeof t.isOffscreenCanvasSupported?t.isOffscreenCanvasSupported:!Ve,A=Number.isInteger(t.canvasMaxAreaInBytes)?t.canvasMaxAreaInBytes:-1,x="boolean"==typeof t.disableFontFace?t.disableFontFace:Ve,E=!0===t.fontExtraProperties,S=!0===t.enableXfa,T=t.ownerDocument||globalThis.document,C=!0===t.disableRange,k=!0===t.disableStream,M=!0===t.disableAutoFetch,I=!0===t.pdfBug,L=!0===t.enableHWA,P=l?l.length:t.length??NaN,R="boolean"==typeof t.useSystemFonts?t.useSystemFonts:!Ve&&!x,D="boolean"==typeof t.useWorkerFetch?t.useWorkerFetch:g===Bi&&v===qi&&p&&m&&Xi(p,document.baseURI)&&Xi(m,document.baseURI),F=t.canvasFactory||new Bs({ownerDocument:T,enableHWA:L}),O=t.filterFactory||new Hs({docId:i,ownerDocument:T});si(h);const N={canvasFactory:F,filterFactory:O};if(D||(N.cMapReaderFactory=new g({baseUrl:p,isCompressed:f}),N.standardFontDataFactory=new v({baseUrl:m})),!d){const t={verbosity:h,port:es.workerPort};d=t.port?Ks.fromPort(t):new Ks(t),e._worker=d}const B={docId:i,apiVersion:"4.6.82",data:s,password:o,disableAutoFetch:M,rangeChunkSize:c,length:P,docBaseUrl:u,enableXfa:S,evaluatorOptions:{maxImageSize:y,disableFontFace:x,ignoreErrors:b,isEvalSupported:_,isOffscreenCanvasSupported:w,canvasMaxAreaInBytes:A,fontExtraProperties:E,useSystemFonts:R,cMapUrl:D?p:null,standardFontDataUrl:D?m:null}},q={disableFontFace:x,fontExtraProperties:E,ownerDocument:T,pdfBug:I,styleElement:null,loadingParams:{disableAutoFetch:M,enableXfa:S}};return d.promise.then((function(){if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const t=d.messageHandler.sendWithPromise("GetDocRequest",B,s?[s.buffer]:null);let o;if(l)o=new ls(l,{disableRange:C,disableStream:k});else if(!s){if(!n)throw new Error("getDocument - no `url` parameter provided.");h={url:n,length:P,httpHeaders:r,withCredentials:a,rangeChunkSize:c,disableRange:C,disableStream:k},o=Ve?"undefined"!=typeof fetch&&"undefined"!=typeof Response&&"body"in Response.prototype&&Xi(h.url)?new bs(h):new Cs(h):Xi(h.url)?new bs(h):new As(h)}var h;return t.then((t=>{if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const n=new ns(i,t,d.port),s=new Ys(n,e,o,q,N);e._transport=s,n.send("Ready",null)}))})).catch(e._capability.reject),e}function Us(t){return"object"==typeof t&&Number.isInteger(t?.num)&&t.num>=0&&Number.isInteger(t?.gen)&&t.gen>=0}class Vs{static#Ti=0;constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId="d"+Vs.#Ti++,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await(this._transport?.destroy())}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}class Gs{constructor(t,e,i=!1,n=null){this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=n,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const i of this._rangeListeners)i(t,e)}onDataProgress(t,e){this._readyCapability.promise.then((()=>{for(const i of this._progressListeners)i(t,e)}))}onDataProgressiveRead(t){this._readyCapability.promise.then((()=>{for(const e of this._progressiveReadListeners)e(t)}))}onDataProgressiveDone(){this._readyCapability.promise.then((()=>{for(const t of this._progressiveDoneListeners)t()}))}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){li("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class Ws{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return hi(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class $s{#Hi=null;#zi=!1;constructor(t,e,i,n=!1){this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=n?new $i:null,this._pdfBug=n,this.commonObjs=i.commonObjs,this.objs=new Js,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:n=0,dontFlip:s=!1}={}){return new zi({viewBox:this.view,scale:t,rotation:e,offsetX:i,offsetY:n,dontFlip:s})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return hi(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,viewport:e,intent:i="display",annotationMode:n=Xe.ENABLE,transform:s=null,background:r=null,optionalContentConfigPromise:a=null,annotationCanvasMap:o=null,pageColors:l=null,printAnnotationStorage:c=null,isEditing:d=!1}){this._stats?.time("Overall");const h=this._transport.getRenderingIntent(i,n,c,d),{renderingIntent:u,cacheKey:p}=h;this.#zi=!1,this.#ji(),a||=this._transport.getOptionalContentConfig(u);let f=this._intentStates.get(p);f||(f=Object.create(null),this._intentStates.set(p,f)),f.streamReaderCancelTimeout&&(clearTimeout(f.streamReaderCancelTimeout),f.streamReaderCancelTimeout=null);const g=!!(4&u);f.displayReadyCapability||(f.displayReadyCapability=Promise.withResolvers(),f.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(h));const m=t=>{f.renderTasks.delete(v),(this._maybeCleanupAfterRender||g)&&(this.#zi=!0),this.#Ui(!g),t?(v.capability.reject(t),this._abortOperatorList({intentState:f,reason:t instanceof Error?t:new Error(t)})):v.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},v=new tr({callback:m,params:{canvasContext:t,viewport:e,transform:s,background:r},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:o,operatorList:f.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!g,pdfBug:this._pdfBug,pageColors:l});(f.renderTasks||=new Set).add(v);const b=v.task;return Promise.all([f.displayReadyCapability.promise,a]).then((([t,e])=>{if(this.destroyed)m();else{if(this._stats?.time("Rendering"),!(e.renderingIntent&u))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");v.initializeGraphics({transparency:t,optionalContentConfig:e}),v.operatorListChanged()}})).catch(m),b}getOperatorList({intent:t="display",annotationMode:e=Xe.ENABLE,printAnnotationStorage:i=null,isEditing:n=!1}={}){const s=this._transport.getRenderingIntent(t,e,i,n,!0);let r,a=this._intentStates.get(s.cacheKey);return a||(a=Object.create(null),this._intentStates.set(s.cacheKey,a)),a.opListReadCapability||(r=Object.create(null),r.operatorListChanged=function(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(r))},a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||=new Set).add(r),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(s)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===t,disableNormalization:!0===e},{highWaterMark:100,size:t=>t.items.length})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then((t=>Os.textContent(t)));const e=this.streamTextContent(t);return new Promise((function(t,i){const n=e.getReader(),s={items:[],styles:Object.create(null),lang:null};!function e(){n.read().then((function({value:i,done:n}){n?t(s):(s.lang??=i.lang,Object.assign(s.styles,i.styles),s.items.push(...i.items),e())}),i)}()}))}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),this.#zi=!1,this.#ji(),Promise.all(t)}cleanup(t=!1){this.#zi=!0;const e=this.#Ui(!1);return t&&e&&(this._stats&&=new $i),e}#Ui(t=!1){if(this.#ji(),!this.#zi||this.destroyed)return!1;if(t)return this.#Hi=setTimeout((()=>{this.#Hi=null,this.#Ui(!1)}),5e3),!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#zi=!1,!0}#ji(){this.#Hi&&(clearTimeout(this.#Hi),this.#Hi=null)}_startRenderPage(t,e){const i=this._intentStates.get(e);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let i=0,n=t.length;i<n;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const t of e.renderTasks)t.operatorListChanged();t.lastChunk&&this.#Ui(!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i,modifiedIds:n}){const{map:s,transfer:r}=i,a=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:s,modifiedIds:n},r).getReader(),o=this._intentStates.get(e);o.streamReader=a;const l=()=>{a.read().then((({value:t,done:e})=>{e?o.streamReader=null:this._transport.destroyed||(this._renderPageChunk(t,o),l())}),(t=>{if(o.streamReader=null,!this._transport.destroyed){if(o.operatorList){o.operatorList.lastChunk=!0;for(const t of o.renderTasks)t.operatorListChanged();this.#Ui(!0)}if(o.displayReadyCapability)o.displayReadyCapability.reject(t);else{if(!o.opListReadCapability)throw t;o.opListReadCapability.reject(t)}}}))};l()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof ji){let i=100;return e.extraDelay>0&&e.extraDelay<1e3&&(i+=e.extraDelay),void(t.streamReaderCancelTimeout=setTimeout((()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})}),i))}}if(t.streamReader.cancel(new yi(e.message)).catch((()=>{})),t.streamReader=null,!this._transport.destroyed){for(const[e,i]of this._intentStates)if(i===t){this._intentStates.delete(e);break}this.cleanup()}}}get stats(){return this._stats}}class Xs{#Vi=new Set;#Gi=Promise.resolve();postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};this.#Gi.then((()=>{for(const t of this.#Vi)t.call(this,i)}))}addEventListener(t,e){this.#Vi.add(e)}removeEventListener(t,e){this.#Vi.delete(e)}terminate(){this.#Vi.clear()}}class Ks{static#Wi=0;static#$i=!1;static#Xi;static{Ve&&(this.#$i=!0,es.workerSrc||="./pdf.worker.mjs"),this._isSameOrigin=(t,e)=>{let i;try{if(i=new URL(t),!i.origin||"null"===i.origin)return!1}catch{return!1}const n=new URL(e,i);return i.origin===n.origin},this._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}}constructor({name:t=null,port:e=null,verbosity:i=ri()}={}){if(this.name=t,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if(Ks.#Xi?.has(e))throw new Error("Cannot use more than one PDFWorker per port.");return(Ks.#Xi||=new WeakMap).set(e,this),void this._initializeFromPort(e)}this._initialize()}get promise(){return Ve?Promise.all([Cn.promise,this._readyCapability.promise]):this._readyCapability.promise}#Ki(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new ns("main","worker",t),this._messageHandler.on("ready",(function(){})),this.#Ki()}_initialize(){if(Ks.#$i||Ks.#Yi)return void this._setupFakeWorker();let{workerSrc:t}=Ks;try{Ks._isSameOrigin(window.location.href,t)||(t=Ks._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),i=new ns("main","worker",e),n=()=>{s.abort(),i.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},s=new AbortController;e.addEventListener("error",(()=>{this._webWorker||n()}),{signal:s.signal}),i.on("test",(t=>{s.abort(),!this.destroyed&&t?(this._messageHandler=i,this._port=e,this._webWorker=e,this.#Ki()):n()})),i.on("ready",(t=>{if(s.abort(),this.destroyed)n();else try{r()}catch{this._setupFakeWorker()}}));const r=()=>{const t=new Uint8Array;i.send("test",t,[t.buffer])};return void r()}catch{ai("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){Ks.#$i||(oi("Setting up fake worker."),Ks.#$i=!0),Ks._setupFakeWorkerGlobal.then((t=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const e=new Xs;this._port=e;const i="fake"+Ks.#Wi++,n=new ns(i+"_worker",i,e);t.setup(n,e),this._messageHandler=new ns(i,i+"_worker",e),this.#Ki()})).catch((t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))}))}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),Ks.#Xi?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){if(!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const e=this.#Xi?.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Ks(t)}static get workerSrc(){if(es.workerSrc)return es.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get#Yi(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){return hi(this,"_setupFakeWorkerGlobal",(async()=>this.#Yi?this.#Yi:(await import(this.workerSrc)).WorkerMessageHandler)())}}class Ys{#Qi=new Map;#Ji=new Map;#Zi=new Map;#tn=new Map;#en=null;constructor(t,e,i,n,s){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new Js,this.fontLoader=new xn({ownerDocument:n.ownerDocument,styleElement:n.styleElement}),this.loadingParams=n.loadingParams,this._params=n,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#in(t,e=null){const i=this.#Qi.get(t);if(i)return i;const n=this.messageHandler.sendWithPromise(t,e);return this.#Qi.set(t,n),n}get annotationStorage(){return hi(this,"annotationStorage",new wn)}getRenderingIntent(t,e=Xe.ENABLE,i=null,n=!1,s=!1){let r=2,a=_n;switch(t){case"any":r=1;break;case"display":break;case"print":r=4;break;default:oi(`getRenderingIntent - invalid intent: ${t}`)}const o=4&r&&i instanceof An?i:this.annotationStorage;switch(e){case Xe.DISABLE:r+=64;break;case Xe.ENABLE:break;case Xe.ENABLE_FORMS:r+=16;break;case Xe.ENABLE_STORAGE:r+=32,a=o.serializable;break;default:oi(`getRenderingIntent - invalid annotationMode: ${e}`)}n&&(r+=128),s&&(r+=256);const{ids:l,hash:c}=o.modifiedIds;return{renderingIntent:r,cacheKey:[r,a.hash,c].join("_"),annotationStorageSerializable:a,modifiedIds:l}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#en?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const e of this.#Ji.values())t.push(e._destroy());this.#Ji.clear(),this.#Zi.clear(),this.#tn.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then((()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#Qi.clear(),this.filterFactory.destroy(),Fs.cleanup(),this._networkStream?.cancelAllRequests(new yi("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()}),this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",((t,e)=>{ci(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=t=>{this._lastProgress={loaded:t.loaded,total:t.total}},e.onPull=()=>{this._fullReader.read().then((function({value:t,done:i}){i?e.close():(ci(t instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),e.enqueue(new Uint8Array(t),1,[t]))})).catch((t=>{e.error(t)}))},e.onCancel=t=>{this._fullReader.cancel(t),e.ready.catch((t=>{if(!this.destroyed)throw t}))}})),t.on("ReaderHeadersReady",(t=>{const i=Promise.withResolvers(),n=this._fullReader;return n.headersReady.then((()=>{n.isStreamingSupported&&n.isRangeSupported||(this._lastProgress&&e.onProgress?.(this._lastProgress),n.onProgress=t=>{e.onProgress?.({loaded:t.loaded,total:t.total})}),i.resolve({isStreamingSupported:n.isStreamingSupported,isRangeSupported:n.isRangeSupported,contentLength:n.contentLength})}),i.reject),i.promise})),t.on("GetRangeReader",((t,e)=>{ci(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(t.begin,t.end);i?(e.onPull=()=>{i.read().then((function({value:t,done:i}){i?e.close():(ci(t instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),e.enqueue(new Uint8Array(t),1,[t]))})).catch((t=>{e.error(t)}))},e.onCancel=t=>{i.cancel(t),e.ready.catch((t=>{if(!this.destroyed)throw t}))}):e.close()})),t.on("GetDoc",(({pdfInfo:t})=>{this._numPages=t.numPages,this._htmlForXfa=t.htmlForXfa,delete t.htmlForXfa,e._capability.resolve(new Ws(t,this))})),t.on("DocException",(function(t){let i;switch(t.name){case"PasswordException":i=new pi(t.message,t.code);break;case"InvalidPDFException":i=new gi(t.message);break;case"MissingPDFException":i=new mi(t.message);break;case"UnexpectedResponseException":i=new vi(t.message,t.status);break;case"UnknownErrorException":i=new fi(t.message,t.details);break;default:li("DocException - expected a valid Error.")}e._capability.reject(i)})),t.on("PasswordRequest",(t=>{if(this.#en=Promise.withResolvers(),e.onPassword){const i=t=>{t instanceof Error?this.#en.reject(t):this.#en.resolve({password:t})};try{e.onPassword(i,t.code)}catch(t){this.#en.reject(t)}}else this.#en.reject(new pi(t.message,t.code));return this.#en.promise})),t.on("DataLoaded",(t=>{e.onProgress?.({loaded:t.length,total:t.length}),this.downloadInfoCapability.resolve(t)})),t.on("StartRenderPage",(t=>{this.destroyed||this.#Ji.get(t.pageIndex)._startRenderPage(t.transparency,t.cacheKey)})),t.on("commonobj",(([e,i,n])=>{if(this.destroyed)return null;if(this.commonObjs.has(e))return null;switch(i){case"Font":const{disableFontFace:s,fontExtraProperties:r,pdfBug:a}=this._params;if("error"in n){const t=n.error;oi(`Error during font loading: ${t}`),this.commonObjs.resolve(e,t);break}const o=a&&globalThis.FontInspector?.enabled?(t,e)=>globalThis.FontInspector.fontAdded(t,e):null,l=new En(n,{disableFontFace:s,inspectFont:o});this.fontLoader.bind(l).catch((()=>t.sendWithPromise("FontFallback",{id:e}))).finally((()=>{!r&&l.data&&(l.data=null),this.commonObjs.resolve(e,l)}));break;case"CopyLocalImage":const{imageRef:c}=n;ci(c,"The imageRef must be defined.");for(const t of this.#Ji.values())for(const[,i]of t.objs)if(i?.ref===c)return i.dataLen?(this.commonObjs.resolve(e,structuredClone(i)),i.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(e,n);break;default:throw new Error(`Got unknown common object type ${i}`)}return null})),t.on("obj",(([t,e,i,n])=>{if(this.destroyed)return;const s=this.#Ji.get(e);if(!s.objs.has(t))if(0!==s._intentStates.size)switch(i){case"Image":s.objs.resolve(t,n),n?.dataLen>1e7&&(s._maybeCleanupAfterRender=!0);break;case"Pattern":s.objs.resolve(t,n);break;default:throw new Error(`Got unknown object type ${i}`)}else n?.bitmap?.close()})),t.on("DocProgress",(t=>{this.destroyed||e.onProgress?.({loaded:t.loaded,total:t.total})})),t.on("FetchBuiltInCMap",(t=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(t):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.")))),t.on("FetchStandardFontData",(t=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(t):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter."))))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&oi("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally((()=>{this.annotationStorage.resetModified()}))}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=this.#Zi.get(e);if(i)return i;const n=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then((i=>{if(this.destroyed)throw new Error("Transport destroyed");i.refStr&&this.#tn.set(i.refStr,t);const n=new $s(e,i,this,this._params.pdfBug);return this.#Ji.set(e,n),n}));return this.#Zi.set(e,n),n}getPageIndex(t){return Us(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#in("GetFieldObjects")}hasJSActions(){return this.#in("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return"string"!=typeof t?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#in("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#in("GetOptionalContentConfig").then((e=>new os(e,t)))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#Qi.get(t);if(e)return e;const i=this.messageHandler.sendWithPromise(t,null).then((t=>({info:t[0],metadata:t[1]?new ss(t[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null})));return this.#Qi.set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of this.#Ji.values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#Qi.clear(),this.filterFactory.destroy(!0),Fs.cleanup()}}cachedPageNumber(t){if(!Us(t))return null;const e=0===t.gen?`${t.num}R`:`${t.num}R${t.gen}`;return this.#tn.get(e)??null}}const Qs=Symbol("INITIAL_DATA");class Js{#nn=Object.create(null);#sn(t){return this.#nn[t]||={...Promise.withResolvers(),data:Qs}}get(t,e=null){if(e){const i=this.#sn(t);return i.promise.then((()=>e(i.data))),null}const i=this.#nn[t];if(!i||i.data===Qs)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const e=this.#nn[t];return!!e&&e.data!==Qs}resolve(t,e=null){const i=this.#sn(t);i.data=e,i.resolve()}clear(){for(const t in this.#nn){const{data:e}=this.#nn[t];e?.bitmap?.close()}this.#nn=Object.create(null)}*[Symbol.iterator](){for(const t in this.#nn){const{data:e}=this.#nn[t];e!==Qs&&(yield[t,e])}}}class Zs{#rn=null;constructor(t){this.#rn=t,this.onContinue=null}get promise(){return this.#rn.capability.promise}cancel(t=0){this.#rn.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#rn.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#rn;return t.form||t.canvas&&e?.size>0}}class tr{#an=null;static#on=new WeakSet;constructor({callback:t,params:e,objs:i,commonObjs:n,annotationCanvasMap:s,operatorList:r,pageIndex:a,canvasFactory:o,filterFactory:l,useRequestAnimationFrame:c=!1,pdfBug:d=!1,pageColors:h=null}){this.callback=t,this.params=e,this.objs=i,this.commonObjs=n,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=r,this._pageIndex=a,this.canvasFactory=o,this.filterFactory=l,this._pdfBug=d,this.pageColors=h,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===c&&"undefined"!=typeof window,this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Zs(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch((function(){}))}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(tr.#on.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");tr.#on.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:n,transform:s,background:r}=this.params;this.gfx=new ts(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:s,viewport:n,transparency:t,background:r}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#an&&(window.cancelAnimationFrame(this.#an),this.#an=null),tr.#on.delete(this._canvas),this.callback(t||new ji(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){this.graphicsReady?(this.stepper?.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||=this._continueBound}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#an=window.requestAnimationFrame((()=>{this.#an=null,this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),tr.#on.delete(this._canvas),this.callback())))}}const er="4.6.82",ir="9b541910f";function nr(t){return Math.floor(255*Math.max(0,Math.min(1,t))).toString(16).padStart(2,"0")}function sr(t){return Math.max(0,Math.min(255,255*t))}class rr{static CMYK_G([t,e,i,n]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+n)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return[t=sr(t),t,t]}static G_HTML([t]){const e=nr(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(sr)}static RGB_HTML(t){return`#${t.map(nr).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,n]){return["RGB",1-Math.min(1,t+n),1-Math.min(1,i+n),1-Math.min(1,e+n)]}static CMYK_rgb([t,e,i,n]){return[sr(1-Math.min(1,t+n)),sr(1-Math.min(1,i+n)),sr(1-Math.min(1,e+n))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){const n=1-t,s=1-e,r=1-i;return["CMYK",n,s,r,Math.min(n,s,r)]}}class ar{static setupStorage(t,e,i,n,s){const r=n.getValue(e,{value:null});switch(i.name){case"textarea":if(null!==r.value&&(t.textContent=r.value),"print"===s)break;t.addEventListener("input",(t=>{n.setValue(e,{value:t.target.value})}));break;case"input":if("radio"===i.attributes.type||"checkbox"===i.attributes.type){if(r.value===i.attributes.xfaOn?t.setAttribute("checked",!0):r.value===i.attributes.xfaOff&&t.removeAttribute("checked"),"print"===s)break;t.addEventListener("change",(t=>{n.setValue(e,{value:t.target.checked?t.target.getAttribute("xfaOn"):t.target.getAttribute("xfaOff")})}))}else{if(null!==r.value&&t.setAttribute("value",r.value),"print"===s)break;t.addEventListener("input",(t=>{n.setValue(e,{value:t.target.value})}))}break;case"select":if(null!==r.value){t.setAttribute("value",r.value);for(const t of i.children)t.attributes.value===r.value?t.attributes.selected=!0:t.attributes.hasOwnProperty("selected")&&delete t.attributes.selected}t.addEventListener("input",(t=>{const i=t.target.options,s=-1===i.selectedIndex?"":i[i.selectedIndex].value;n.setValue(e,{value:s})}))}}static setAttributes({html:t,element:e,storage:i=null,intent:n,linkService:s}){const{attributes:r}=e,a=t instanceof HTMLAnchorElement;"radio"===r.type&&(r.name=`${r.name}-${n}`);for(const[e,i]of Object.entries(r))if(null!=i)switch(e){case"class":i.length&&t.setAttribute(e,i.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",i);break;case"style":Object.assign(t.style,i);break;case"textContent":t.textContent=i;break;default:(!a||"href"!==e&&"newWindow"!==e)&&t.setAttribute(e,i)}a&&s.addLinkAttributes(t,r.href,r.newWindow),i&&r.dataId&&this.setupStorage(t,r.dataId,e,i)}static render(t){const e=t.annotationStorage,i=t.linkService,n=t.xfaHtml,s=t.intent||"display",r=document.createElement(n.name);n.attributes&&this.setAttributes({html:r,element:n,intent:s,linkService:i});const a="richText"!==s,o=t.div;if(o.append(r),t.viewport){const e=`matrix(${t.viewport.transform.join(",")})`;o.style.transform=e}a&&o.setAttribute("class","xfaLayer xfaFont");const l=[];if(0===n.children.length){if(n.value){const t=document.createTextNode(n.value);r.append(t),a&&Os.shouldBuildText(n.name)&&l.push(t)}return{textDivs:l}}const c=[[n,-1,r]];for(;c.length>0;){const[t,n,r]=c.at(-1);if(n+1===t.children.length){c.pop();continue}const o=t.children[++c.at(-1)[1]];if(null===o)continue;const{name:d}=o;if("#text"===d){const t=document.createTextNode(o.value);l.push(t),r.append(t);continue}const h=o?.attributes?.xmlns?document.createElementNS(o.attributes.xmlns,d):document.createElement(d);if(r.append(h),o.attributes&&this.setAttributes({html:h,element:o,storage:e,intent:s,linkService:i}),o.children?.length>0)c.push([o,-1,h]);else if(o.value){const t=document.createTextNode(o.value);a&&Os.shouldBuildText(d)&&l.push(t),h.append(t)}}for(const t of o.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))t.setAttribute("readOnly",!0);return{textDivs:l}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const or=1e3,lr=new WeakSet;function cr(t){return{width:t[2]-t[0],height:t[3]-t[1]}}class dr{static create(t){switch(t.data.annotationType){case 2:return new ur(t);case 1:return new pr(t);case 20:switch(t.data.fieldType){case"Tx":return new gr(t);case"Btn":return t.data.radioButton?new br(t):t.data.checkBox?new vr(t):new yr(t);case"Ch":return new _r(t);case"Sig":return new mr(t)}return new fr(t);case 16:return new wr(t);case 3:return new xr(t);case 4:return new Er(t);case 5:return new Sr(t);case 6:return new Tr(t);case 8:return new Cr(t);case 14:return new Mr(t);case 15:return new Ir(t);case 7:return new kr(t);case 9:return new Lr(t);case 10:return new Pr(t);case 11:return new Rr(t);case 12:return new Dr(t);case 13:return new Fr(t);case 17:return new Or(t);default:return new hr(t)}}}class hr{#ln=null;#cn=!1;#dn=null;constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:n=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(i)),n&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:i}){return!!(t?.str||e?.str||i?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return hr._hasPopupData(this.data)}updateEdited(t){if(!this.container)return;this.#ln||={rect:this.data.rect.slice(0)};const{rect:e}=t;e&&this.#hn(e),this.#dn?.popup.updateEdited(t)}resetEdited(){this.#ln&&(this.#hn(this.#ln.rect),this.#dn?.popup.resetEdited(),this.#ln=null)}#hn(t){const{container:{style:e},data:{rect:i,rotation:n},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:r,pageX:a,pageY:o}}}}=this;i?.splice(0,4,...t);const{width:l,height:c}=cr(t);e.left=100*(t[0]-a)/s+"%",e.top=100*(r-t[3]+o)/r+"%",0===n?(e.width=100*l/s+"%",e.height=100*c/r+"%"):this.setRotation(n)}_createContainer(t){const{data:e,parent:{page:i,viewport:n}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",e.id),this instanceof fr||(s.tabIndex=or);const{style:r}=s;if(r.zIndex=this.parent.zIndex++,e.popupRef&&s.setAttribute("aria-haspopup","dialog"),e.alternativeText&&(s.title=e.alternativeText),e.noRotate&&s.classList.add("norotate"),!e.rect||this instanceof wr){const{rotation:t}=e;return e.hasOwnCanvas||0===t||this.setRotation(t,s),s}const{width:a,height:o}=cr(e.rect);if(!t&&e.borderStyle.width>0){r.borderWidth=`${e.borderStyle.width}px`;const t=e.borderStyle.horizontalCornerRadius,i=e.borderStyle.verticalCornerRadius;if(t>0||i>0){const e=`calc(${t}px * var(--scale-factor)) / calc(${i}px * var(--scale-factor))`;r.borderRadius=e}else if(this instanceof br){const t=`calc(${a}px * var(--scale-factor)) / calc(${o}px * var(--scale-factor))`;r.borderRadius=t}switch(e.borderStyle.style){case 1:r.borderStyle="solid";break;case 2:r.borderStyle="dashed";break;case 3:oi("Unimplemented border style: beveled");break;case 4:oi("Unimplemented border style: inset");break;case 5:r.borderBottomStyle="solid"}const n=e.borderColor||null;n?(this.#cn=!0,r.borderColor=Si.makeHexColor(0|n[0],0|n[1],0|n[2])):r.borderWidth=0}const l=Si.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:c,pageHeight:d,pageX:h,pageY:u}=n.rawDims;r.left=100*(l[0]-h)/c+"%",r.top=100*(l[1]-u)/d+"%";const{rotation:p}=e;return e.hasOwnCanvas||0===p?(r.width=100*a/c+"%",r.height=100*o/d+"%"):this.setRotation(p,s),s}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:n}=this.parent.viewport.rawDims,{width:s,height:r}=cr(this.data.rect);let a,o;t%180==0?(a=100*s/i,o=100*r/n):(a=100*r/i,o=100*s/n),e.style.width=`${a}%`,e.style.height=`${o}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(t,e,i)=>{const n=i.detail[t],s=n[0],r=n.slice(1);i.target.style[e]=rr[`${s}_HTML`](r),this.annotationStorage.setValue(this.data.id,{[e]:rr[`${s}_rgb`](r)})};return hi(this,"_commonActions",{display:t=>{const{display:e}=t.detail,i=e%2==1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:1===e||2===e})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:e}=t.detail;this.container.style.visibility=e?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:e,noView:e})},focus:t=>{setTimeout((()=>t.target.focus({preventScroll:!1})),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:t=>{const e=t.detail.rotation;this.setRotation(e),this.annotationStorage.setValue(this.data.id,{rotation:e})}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const n of Object.keys(e.detail)){const s=t[n]||i[n];s?.(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[n,s]of Object.entries(e)){const r=i[n];r&&(r({detail:{[n]:s},target:t}),delete e[n])}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,i,n,s]=this.data.rect.map((t=>Math.fround(t)));if(8===t.length){const[r,a,o,l]=t.subarray(2,6);if(n===r&&s===a&&e===o&&i===l)return}const{style:r}=this.container;let a;if(this.#cn){const{borderColor:t,borderWidth:e}=r;r.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${t}" stroke-width="${e}">`],this.container.classList.add("hasBorder")}const o=n-e,l=s-i,{svgFactory:c}=this,d=c.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);const h=c.createElement("defs");d.append(h);const u=c.createElement("clipPath"),p=`clippath_${this.data.id}`;u.setAttribute("id",p),u.setAttribute("clipPathUnits","objectBoundingBox"),h.append(u);for(let i=2,n=t.length;i<n;i+=8){const n=t[i],r=t[i+1],d=t[i+2],h=t[i+3],p=c.createElement("rect"),f=(d-e)/o,g=(s-r)/l,m=(n-d)/o,v=(r-h)/l;p.setAttribute("x",f),p.setAttribute("y",g),p.setAttribute("width",m),p.setAttribute("height",v),u.append(p),a?.push(`<rect vector-effect="non-scaling-stroke" x="${f}" y="${g}" width="${m}" height="${v}"/>`)}this.#cn&&(a.push("</g></svg>')"),r.backgroundImage=a.join("")),this.container.append(d),this.container.style.clipPath=`url(#${p})`}_createPopup(){const{container:t,data:e}=this;t.setAttribute("aria-haspopup","dialog");const i=this.#dn=new wr({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]});this.parent.div.append(i.render())}render(){li("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const i=[];if(this._fieldObjects){const n=this._fieldObjects[t];if(n)for(const{page:t,id:s,exportValues:r}of n){if(-1===t)continue;if(s===e)continue;const n="string"==typeof r?r:null,a=document.querySelector(`[data-element-id="${s}"]`);!a||lr.has(a)?i.push({id:s,exportValue:n,domElement:a}):oi(`_getElementsByName - element not allowed: ${s}`)}return i}for(const n of document.getElementsByName(t)){const{exportValue:t}=n,s=n.getAttribute("data-element-id");s!==e&&lr.has(n)&&i.push({id:s,exportValue:t,domElement:n})}return i}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",(()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})}))}}class ur extends hr{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let n=!1;return t.url?(e.addLinkAttributes(i,t.url,t.newWindow),n=!0):t.action?(this._bindNamedAction(i,t.action),n=!0):t.attachment?(this.#un(i,t.attachment,t.attachmentDest),n=!0):t.setOCGState?(this.#pn(i,t.setOCGState),n=!0):t.dest?(this._bindLink(i,t.dest),n=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),n=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),n=!0):this.isTooltipOnly&&!n&&(this._bindLink(i,""),n=!0)),this.container.classList.add("linkAnnotation"),n&&this.container.append(i),this.container}#fn(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||""===e)&&this.#fn()}_bindNamedAction(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),this.#fn()}#un(t,e,i=null){t.href=this.linkService.getAnchorUrl(""),e.description&&(t.title=e.description),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,i),!1),this.#fn()}#pn(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),this.#fn()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const n of Object.keys(e.actions)){const s=i.get(n);s&&(t[s]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:n}}),!1))}t.onclick||(t.onclick=()=>!1),this.#fn()}_bindResetFormAction(t,e){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),this.#fn(),!this._fieldObjects)return oi('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(i||(t.onclick=()=>!1));t.onclick=()=>{i?.();const{fields:t,refs:n,include:s}=e,r=[];if(0!==t.length||0!==n.length){const e=new Set(n);for(const i of t){const t=this._fieldObjects[i]||[];for(const{id:i}of t)e.add(i)}for(const t of Object.values(this._fieldObjects))for(const i of t)e.has(i.id)===s&&r.push(i)}else for(const t of Object.values(this._fieldObjects))r.push(...t);const a=this.annotationStorage,o=[];for(const t of r){const{id:e}=t;switch(o.push(e),t.type){case"text":{const i=t.defaultValue||"";a.setValue(e,{value:i});break}case"checkbox":case"radiobutton":{const i=t.defaultValue===t.exportValues;a.setValue(e,{value:i});break}case"combobox":case"listbox":{const i=t.defaultValue||"";a.setValue(e,{value:i});break}default:continue}const i=document.querySelector(`[data-element-id="${e}"]`);i&&(lr.has(i)?i.dispatchEvent(new Event("resetform")):oi(`_bindResetFormAction - element not allowed: ${e}`))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:o,name:"ResetForm"}}),!1}}}class pr extends hr{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class fr extends hr{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&("CANVAS"===t.previousSibling?.nodeName&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return xi.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,n,s){i.includes("mouse")?t.addEventListener(i,(t=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:s(t),shift:t.shiftKey,modifier:this._getKeyModifier(t)}})})):t.addEventListener(i,(t=>{if("blur"===i){if(!e.focused||!t.relatedTarget)return;e.focused=!1}else if("focus"===i){if(e.focused)return;e.focused=!0}s&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:s(t)}})}))}_setEventListeners(t,e,i,n){for(const[s,r]of i)("Action"===r||this.data.actions?.[r])&&("Focus"!==r&&"Blur"!==r||(e||={focused:!1}),this._setEventListener(t,e,s,r,n),"Focus"!==r||this.data.actions?.Blur?"Blur"!==r||this.data.actions?.Focus||this._setEventListener(t,e,"focus","Focus",null):this._setEventListener(t,e,"blur","Blur",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=null===e?"transparent":Si.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const{fontColor:e}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||9,n=t.style;let s;const r=t=>Math.round(10*t)/10;if(this.data.multiLine){const t=Math.abs(this.data.rect[3]-this.data.rect[1]-2),e=t/(Math.round(t/($e*i))||1);s=Math.min(i,r(e/$e))}else{const t=Math.abs(this.data.rect[3]-this.data.rect[1]-2);s=Math.min(i,r(t/$e))}n.fontSize=`calc(${s}px * var(--scale-factor))`,n.color=Si.makeHexColor(e[0],e[1],e[2]),null!==this.data.textAlignment&&(n.textAlign=["left","center","right"][this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class gr extends fr{constructor(t){super(t,{isRenderable:t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue})}setPropertyOnSiblings(t,e,i,n){const s=this.annotationStorage;for(const r of this._getElementsByName(t.name,t.id))r.domElement&&(r.domElement[e]=i),s.setValue(r.id,{[n]:i})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const n=t.getValue(e,{value:this.data.fieldValue});let s=n.value||"";const r=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;r&&s.length>r&&(s=s.slice(0,r));let a=n.formattedValue||this.data.textContent?.join("\n")||null;a&&this.data.comb&&(a=a.replaceAll(/\s+/g,""));const o={userValue:s,formattedValue:a,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=a??s,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",a??s),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),lr.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=or,this._setRequired(i,this.data.required),r&&(i.maxLength=r),i.addEventListener("input",(n=>{t.setValue(e,{value:n.target.value}),this.setPropertyOnSiblings(i,"value",n.target.value,"value"),o.formattedValue=null})),i.addEventListener("resetform",(t=>{const e=this.data.defaultFieldValue??"";i.value=o.userValue=e,o.formattedValue=null}));let l=t=>{const{formattedValue:e}=o;null!=e&&(t.target.value=e),t.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",(t=>{if(o.focused)return;const{target:e}=t;o.userValue&&(e.value=o.userValue),o.lastCommittedValue=e.value,o.commitKey=1,this.data.actions?.Focus||(o.focused=!0)})),i.addEventListener("updatefromsandbox",(i=>{this.showElementAndHideCanvas(i.target);const n={value(i){o.userValue=i.detail.value??"",t.setValue(e,{value:o.userValue.toString()}),i.target.value=o.userValue},formattedValue(i){const{formattedValue:n}=i.detail;o.formattedValue=n,null!=n&&i.target!==document.activeElement&&(i.target.value=n),t.setValue(e,{formattedValue:n})},selRange(t){t.target.setSelectionRange(...t.detail.selRange)},charLimit:i=>{const{charLimit:n}=i.detail,{target:s}=i;if(0===n)return void s.removeAttribute("maxLength");s.setAttribute("maxLength",n);let r=o.userValue;!r||r.length<=n||(r=r.slice(0,n),s.value=o.userValue=r,t.setValue(e,{value:r}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:r,willCommit:!0,commitKey:1,selStart:s.selectionStart,selEnd:s.selectionEnd}}))}};this._dispatchEventFromSandbox(n,i)})),i.addEventListener("keydown",(t=>{o.commitKey=1;let i=-1;if("Escape"===t.key?i=0:"Enter"!==t.key||this.data.multiLine?"Tab"===t.key&&(o.commitKey=3):i=2,-1===i)return;const{value:n}=t.target;o.lastCommittedValue!==n&&(o.lastCommittedValue=n,o.userValue=n,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:n,willCommit:!0,commitKey:i,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}}))}));const n=l;l=null,i.addEventListener("blur",(t=>{if(!o.focused||!t.relatedTarget)return;this.data.actions?.Blur||(o.focused=!1);const{value:i}=t.target;o.userValue=i,o.lastCommittedValue!==i&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:i,willCommit:!0,commitKey:o.commitKey,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}}),n(t)})),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",(t=>{o.lastCommittedValue=null;const{data:i,target:n}=t,{value:s,selectionStart:r,selectionEnd:a}=n;let l=r,c=a;switch(t.inputType){case"deleteWordBackward":{const t=s.substring(0,r).match(/\w*[^\w]*$/);t&&(l-=t[0].length);break}case"deleteWordForward":{const t=s.substring(r).match(/^[^\w]*\w*/);t&&(c+=t[0].length);break}case"deleteContentBackward":r===a&&(l-=1);break;case"deleteContentForward":r===a&&(c+=1)}t.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:s,change:i||"",willCommit:!1,selStart:l,selEnd:c}})})),this._setEventListeners(i,o,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(t=>t.target.value))}if(l&&i.addEventListener("blur",l),this.data.comb){const t=(this.data.rect[2]-this.data.rect[0])/r;i.classList.add("comb"),i.style.letterSpacing=`calc(${t}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class mr extends fr{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class vr extends fr{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let n=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;"string"==typeof n&&(n="Off"!==n,t.setValue(i,{value:n})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return lr.add(s),s.setAttribute("data-element-id",i),s.disabled=e.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=e.fieldName,n&&s.setAttribute("checked",!0),s.setAttribute("exportValue",e.exportValue),s.tabIndex=or,s.addEventListener("change",(n=>{const{name:s,checked:r}=n.target;for(const n of this._getElementsByName(s,i)){const i=r&&n.exportValue===e.exportValue;n.domElement&&(n.domElement.checked=i),t.setValue(n.id,{value:i})}t.setValue(i,{value:r})})),s.addEventListener("resetform",(t=>{const i=e.defaultFieldValue||"Off";t.target.checked=i===e.exportValue})),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",(e=>{const n={value(e){e.target.checked="Off"!==e.detail.value,t.setValue(i,{value:e.target.checked})}};this._dispatchEventFromSandbox(n,e)})),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(t=>t.target.checked))),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class br extends fr{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let n=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if("string"==typeof n&&(n=n!==e.buttonValue,t.setValue(i,{value:n})),n)for(const n of this._getElementsByName(e.fieldName,i))t.setValue(n.id,{value:!1});const s=document.createElement("input");if(lr.add(s),s.setAttribute("data-element-id",i),s.disabled=e.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=e.fieldName,n&&s.setAttribute("checked",!0),s.tabIndex=or,s.addEventListener("change",(e=>{const{name:n,checked:s}=e.target;for(const e of this._getElementsByName(n,i))t.setValue(e.id,{value:!1});t.setValue(i,{value:s})})),s.addEventListener("resetform",(t=>{const i=e.defaultFieldValue;t.target.checked=null!=i&&i===e.buttonValue})),this.enableScripting&&this.hasJSActions){const n=e.buttonValue;s.addEventListener("updatefromsandbox",(e=>{const s={value:e=>{const s=n===e.detail.value;for(const n of this._getElementsByName(e.target.name)){const e=s&&n.id===i;n.domElement&&(n.domElement.checked=e),t.setValue(n.id,{value:e})}}};this._dispatchEventFromSandbox(s,e)})),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(t=>t.target.checked))}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class yr extends ur{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",(t=>{this._dispatchEventFromSandbox({},t)}))),t}}class _r extends fr{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),n=document.createElement("select");lr.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,this._setRequired(n,this.data.required),n.name=this.data.fieldName,n.tabIndex=or;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(n.size=this.data.options.length,this.data.multiSelect&&(n.multiple=!0)),n.addEventListener("resetform",(t=>{const e=this.data.defaultFieldValue;for(const t of n.options)t.selected=t.value===e}));for(const t of this.data.options){const e=document.createElement("option");e.textContent=t.displayValue,e.value=t.exportValue,i.value.includes(t.exportValue)&&(e.setAttribute("selected",!0),s=!1),n.append(e)}let r=null;if(s){const t=document.createElement("option");t.value=" ",t.setAttribute("hidden",!0),t.setAttribute("selected",!0),n.prepend(t),r=()=>{t.remove(),n.removeEventListener("input",r),r=null},n.addEventListener("input",r)}const a=t=>{const e=t?"value":"textContent",{options:i,multiple:s}=n;return s?Array.prototype.filter.call(i,(t=>t.selected)).map((t=>t[e])):-1===i.selectedIndex?null:i[i.selectedIndex][e]};let o=a(!1);const l=t=>{const e=t.target.options;return Array.prototype.map.call(e,(t=>({displayValue:t.textContent,exportValue:t.value})))};return this.enableScripting&&this.hasJSActions?(n.addEventListener("updatefromsandbox",(i=>{const s={value(i){r?.();const s=i.detail.value,l=new Set(Array.isArray(s)?s:[s]);for(const t of n.options)t.selected=l.has(t.value);t.setValue(e,{value:a(!0)}),o=a(!1)},multipleSelection(t){n.multiple=!0},remove(i){const s=n.options,r=i.detail.remove;s[r].selected=!1,n.remove(r),s.length>0&&-1===Array.prototype.findIndex.call(s,(t=>t.selected))&&(s[0].selected=!0),t.setValue(e,{value:a(!0),items:l(i)}),o=a(!1)},clear(i){for(;0!==n.length;)n.remove(0);t.setValue(e,{value:null,items:[]}),o=a(!1)},insert(i){const{index:s,displayValue:r,exportValue:c}=i.detail.insert,d=n.children[s],h=document.createElement("option");h.textContent=r,h.value=c,d?d.before(h):n.append(h),t.setValue(e,{value:a(!0),items:l(i)}),o=a(!1)},items(i){const{items:s}=i.detail;for(;0!==n.length;)n.remove(0);for(const t of s){const{displayValue:e,exportValue:i}=t,s=document.createElement("option");s.textContent=e,s.value=i,n.append(s)}n.options.length>0&&(n.options[0].selected=!0),t.setValue(e,{value:a(!0),items:l(i)}),o=a(!1)},indices(i){const n=new Set(i.detail.indices);for(const t of i.target.options)t.selected=n.has(t.index);t.setValue(e,{value:a(!0)}),o=a(!1)},editable(t){t.target.disabled=!t.detail.editable}};this._dispatchEventFromSandbox(s,i)})),n.addEventListener("input",(i=>{const n=a(!0),s=a(!1);t.setValue(e,{value:n}),i.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:o,change:s,changeEx:n,willCommit:!1,commitKey:1,keyDown:!1}})})),this._setEventListeners(n,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],(t=>t.target.value))):n.addEventListener("input",(function(i){t.setValue(e,{value:a(!0)})})),this.data.combo&&this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class wr extends hr{constructor(t){const{data:e,elements:i}=t;super(t,{isRenderable:hr._hasPopupData(e)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new Ar({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const i of this.elements)i.popup=t,e.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",e.map((t=>`${Mi}${t}`)).join(",")),this.container}}class Ar{#gn=this.#mn.bind(this);#vn=this.#bn.bind(this);#yn=this.#_n.bind(this);#wn=this.#An.bind(this);#xn=null;#ut=null;#En=null;#Sn=null;#Tn=null;#Cn=null;#kn=null;#Mn=!1;#In=null;#T=null;#Ln=null;#Pn=null;#Rn=null;#ln=null;#Dn=!1;constructor({container:t,color:e,elements:i,titleObj:n,modificationDate:s,contentsObj:r,richText:a,parent:o,rect:l,parentRect:c,open:d}){this.#ut=t,this.#Rn=n,this.#En=r,this.#Pn=a,this.#Cn=o,this.#xn=e,this.#Ln=l,this.#kn=c,this.#Tn=i,this.#Sn=Qi.toDateObject(s),this.trigger=i.flatMap((t=>t.getElementsToTriggerPopup()));for(const t of this.trigger)t.addEventListener("click",this.#wn),t.addEventListener("mouseenter",this.#yn),t.addEventListener("mouseleave",this.#vn),t.classList.add("popupTriggerArea");for(const t of i)t.container?.addEventListener("keydown",this.#gn);this.#ut.hidden=!0,d&&this.#An()}render(){if(this.#In)return;const t=this.#In=document.createElement("div");if(t.className="popup",this.#xn){const e=t.style.outlineColor=Si.makeHexColor(...this.#xn);if(CSS.supports("background-color","color-mix(in srgb, red 30%, white)"))t.style.backgroundColor=`color-mix(in srgb, ${e} 30%, white)`;else{const e=.7;t.style.backgroundColor=Si.makeHexColor(...this.#xn.map((t=>Math.floor(e*(255-t)+t))))}}const e=document.createElement("span");e.className="header";const i=document.createElement("h1");if(e.append(i),({dir:i.dir,str:i.textContent}=this.#Rn),t.append(e),this.#Sn){const t=document.createElement("span");t.classList.add("popupDate"),t.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),t.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#Sn.valueOf()})),e.append(t)}const n=this.#Fn;if(n)ar.render({xfaHtml:n,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const e=this._formatContents(this.#En);t.append(e)}this.#ut.append(t)}get#Fn(){const t=this.#Pn,e=this.#En;return!t?.str||e?.str&&e.str!==t.str?null:this.#Pn.html||null}get#On(){return this.#Fn?.attributes?.style?.fontSize||0}get#Nn(){return this.#Fn?.attributes?.style?.color||null}#Bn(t){const e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},n={style:{color:this.#Nn,fontSize:this.#On?`calc(${this.#On}px * var(--scale-factor))`:""}};for(const i of t.split("\n"))e.push({name:"span",value:i,attributes:n});return i}_formatContents({str:t,dir:e}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=e;const n=t.split(/(?:\r\n?|\n)/);for(let t=0,e=n.length;t<e;++t){const s=n[t];i.append(document.createTextNode(s)),t<e-1&&i.append(document.createElement("br"))}return i}#mn(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||("Enter"===t.key||"Escape"===t.key&&this.#Mn)&&this.#An()}updateEdited({rect:t,popupContent:e}){this.#ln||={contentsObj:this.#En,richText:this.#Pn},t&&(this.#T=null),e&&(this.#Pn=this.#Bn(e),this.#En=null),this.#In?.remove(),this.#In=null}resetEdited(){this.#ln&&(({contentsObj:this.#En,richText:this.#Pn}=this.#ln),this.#ln=null,this.#In?.remove(),this.#In=null,this.#T=null)}#qn(){if(null!==this.#T)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:n,pageY:s}}}=this.#Cn;let r=!!this.#kn,a=r?this.#kn:this.#Ln;for(const t of this.#Tn)if(!a||null!==Si.intersect(t.data.rect,a)){a=t.data.rect,r=!0;break}const o=Si.normalizeRect([a[0],t[3]-a[1]+t[1],a[2],t[3]-a[3]+t[1]]),l=r?a[2]-a[0]+5:0,c=o[0]+l,d=o[1];this.#T=[100*(c-n)/e,100*(d-s)/i];const{style:h}=this.#ut;h.left=`${this.#T[0]}%`,h.top=`${this.#T[1]}%`}#An(){this.#Mn=!this.#Mn,this.#Mn?(this.#_n(),this.#ut.addEventListener("click",this.#wn),this.#ut.addEventListener("keydown",this.#gn)):(this.#bn(),this.#ut.removeEventListener("click",this.#wn),this.#ut.removeEventListener("keydown",this.#gn))}#_n(){this.#In||this.render(),this.isVisible?this.#Mn&&this.#ut.classList.add("focused"):(this.#qn(),this.#ut.hidden=!1,this.#ut.style.zIndex=parseInt(this.#ut.style.zIndex)+1e3)}#bn(){this.#ut.classList.remove("focused"),!this.#Mn&&this.isVisible&&(this.#ut.hidden=!0,this.#ut.style.zIndex=parseInt(this.#ut.style.zIndex)-1e3)}forceHide(){this.#Dn=this.isVisible,this.#Dn&&(this.#ut.hidden=!0)}maybeShow(){this.#Dn&&(this.#In||this.#_n(),this.#Dn=!1,this.#ut.hidden=!1)}get isVisible(){return!1===this.#ut.hidden}}class xr extends hr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Ke.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class Er extends hr{#Hn=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:e,height:i}=cr(t.rect),n=this.svgFactory.create(e,i,!0),s=this.#Hn=this.svgFactory.createElement("svg:line");return s.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),s.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),s.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),s.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),s.setAttribute("stroke-width",t.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),n.append(s),this.container.append(n),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#Hn}addHighlightArea(){this.container.classList.add("highlightArea")}}class Sr extends hr{#zn=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:e,height:i}=cr(t.rect),n=this.svgFactory.create(e,i,!0),s=t.borderStyle.width,r=this.#zn=this.svgFactory.createElement("svg:rect");return r.setAttribute("x",s/2),r.setAttribute("y",s/2),r.setAttribute("width",e-s),r.setAttribute("height",i-s),r.setAttribute("stroke-width",s||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),n.append(r),this.container.append(n),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#zn}addHighlightArea(){this.container.classList.add("highlightArea")}}class Tr extends hr{#jn=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:e,height:i}=cr(t.rect),n=this.svgFactory.create(e,i,!0),s=t.borderStyle.width,r=this.#jn=this.svgFactory.createElement("svg:ellipse");return r.setAttribute("cx",e/2),r.setAttribute("cy",i/2),r.setAttribute("rx",e/2-s/2),r.setAttribute("ry",i/2-s/2),r.setAttribute("stroke-width",s||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),n.append(r),this.container.append(n),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#jn}addHighlightArea(){this.container.classList.add("highlightArea")}}class Cr extends hr{#Un=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:i,popupRef:n}}=this;if(!e)return this.container;const{width:s,height:r}=cr(t),a=this.svgFactory.create(s,r,!0);let o=[];for(let i=0,n=e.length;i<n;i+=2){const n=e[i]-t[0],s=t[3]-e[i+1];o.push(`${n},${s}`)}o=o.join(" ");const l=this.#Un=this.svgFactory.createElement(this.svgElementName);return l.setAttribute("points",o),l.setAttribute("stroke-width",i.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!n&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#Un}addHighlightArea(){this.container.classList.add("highlightArea")}}class kr extends Cr{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Mr extends hr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Ir extends hr{#Vn=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=Ke.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,inkLists:e,borderStyle:i,popupRef:n}}=this,{width:s,height:r}=cr(t),a=this.svgFactory.create(s,r,!0);for(const s of e){let e=[];for(let i=0,n=s.length;i<n;i+=2){const n=s[i]-t[0],r=t[3]-s[i+1];e.push(`${n},${r}`)}e=e.join(" ");const r=this.svgFactory.createElement(this.svgElementName);this.#Vn.push(r),r.setAttribute("points",e),r.setAttribute("stroke-width",i.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),!n&&this.hasPopupData&&this._createPopup(),a.append(r)}return this.container.append(a),this.container}getElementsToTriggerPopup(){return this.#Vn}addHighlightArea(){this.container.classList.add("highlightArea")}}class Lr extends hr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class Pr extends hr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Rr extends hr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Dr extends hr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Fr extends hr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Or extends hr{#Gn=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let i;e.hasAppearance||0===e.fillAlpha?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(100*e.fillAlpha)}%);`)),i.addEventListener("dblclick",this.#Wn.bind(this)),this.#Gn=i;const{isMac:n}=xi.platform;return t.addEventListener("keydown",(t=>{"Enter"===t.key&&(n?t.metaKey:t.ctrlKey)&&this.#Wn()})),!e.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return this.#Gn}addHighlightArea(){this.container.classList.add("highlightArea")}#Wn(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class Nr{#$n=null;#Xn=null;#Kn=new Map;constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:n,page:s,viewport:r}){this.div=t,this.#$n=e,this.#Xn=i,this.page=s,this.viewport=r,this.zIndex=0,this._annotationEditorUIManager=n}hasEditableAnnotations(){return this.#Kn.size>0}#Yn(t,e){const i=t.firstChild||t;i.id=`${Mi}${e}`,this.div.append(t),this.#$n?.moveElementInDOM(this.div,t,i,!1)}async render(t){const{annotations:e}=t,i=this.div;nn(i,this.viewport);const n=new Map,s={data:null,layer:i,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:!1!==t.renderForms,svgFactory:new Hi,annotationStorage:t.annotationStorage||new wn,enableScripting:!0===t.enableScripting,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const t of e){if(t.noHTML)continue;const e=16===t.annotationType;if(e){const e=n.get(t.id);if(!e)continue;s.elements=e}else{const{width:e,height:i}=cr(t.rect);if(e<=0||i<=0)continue}s.data=t;const i=dr.create(s);if(!i.isRenderable)continue;if(!e&&t.popupRef){const e=n.get(t.popupRef);e?e.push(i):n.set(t.popupRef,[i])}const r=i.render();t.hidden&&(r.style.visibility="hidden"),this.#Yn(r,t.id),i._isEditable&&(this.#Kn.set(i.data.id,i),this._annotationEditorUIManager?.renderAnnotationElement(i))}this.#Qn()}update({viewport:t}){const e=this.div;this.viewport=t,nn(e,{rotation:t.rotation}),this.#Qn(),e.hidden=!1}#Qn(){if(!this.#Xn)return;const t=this.div;for(const[e,i]of this.#Xn){const n=t.querySelector(`[data-annotation-id="${e}"]`);if(!n)continue;i.className="annotationContent";const{firstChild:s}=n;s?"CANVAS"===s.nodeName?s.replaceWith(i):s.classList.contains("annotationContent")?s.after(i):s.before(i):n.append(i)}this.#Xn.clear()}getEditableAnnotations(){return Array.from(this.#Kn.values())}getEditableAnnotation(t){return this.#Kn.get(t)}}const Br=/\r\n?|\n/g;class qr extends fn{#xn;#Jn="";#Zn=`${this.id}-editor`;#ts=null;#On;#es=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=qr.prototype,e=t=>t.isEmpty(),i=un.TRANSLATE_SMALL,n=un.TRANSLATE_BIG;return hi(this,"_keyboardManager",new dn([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-n,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[n,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-n],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,n],checker:e}]]))}static _type="freetext";static _editorType=Ke.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.#xn=t.color||qr._defaultColor||fn._defaultLineColor,this.#On=t.fontSize||qr._defaultFontSize}static initialize(t,e){fn.initialize(t,e,{strings:["pdfjs-free-text-default-content"]});const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case Ye.FREETEXT_SIZE:qr._defaultFontSize=e;break;case Ye.FREETEXT_COLOR:qr._defaultColor=e}}updateParams(t,e){switch(t){case Ye.FREETEXT_SIZE:this.#is(e);break;case Ye.FREETEXT_COLOR:this.#ns(e)}}static get defaultPropertiesToUpdate(){return[[Ye.FREETEXT_SIZE,qr._defaultFontSize],[Ye.FREETEXT_COLOR,qr._defaultColor||fn._defaultLineColor]]}get propertiesToUpdate(){return[[Ye.FREETEXT_SIZE,this.#On],[Ye.FREETEXT_COLOR,this.#xn]]}#is(t){const e=t=>{this.editorDiv.style.fontSize=`calc(${t}px * var(--scale-factor))`,this.translate(0,-(t-this.#On)*this.parentScale),this.#On=t,this.#ss()},i=this.#On;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ye.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#ns(t){const e=t=>{this.#xn=this.editorDiv.style.color=t},i=this.#xn;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ye.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-qr._internalPadding*t,-(qr._internalPadding+this.#On)*t]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Ke.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#ts=new AbortController;const t=this._uiManager.combinedSignal(this.#ts);this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#Zn),this._isDraggable=!0,this.#ts?.abort(),this.#ts=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#rs(){const t=[];this.editorDiv.normalize();for(const e of this.editorDiv.childNodes)t.push(qr.#as(e));return t.join("\n")}#ss(){const[t,e]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:t,div:e}=this,n=e.style.display,s=e.classList.contains("hidden");e.classList.remove("hidden"),e.style.display="hidden",t.div.append(this.div),i=e.getBoundingClientRect(),e.remove(),e.style.display=n,e.classList.toggle("hidden",s)}this.rotation%180==this.parentRotation%180?(this.width=i.width/t,this.height=i.height/e):(this.width=i.height/t,this.height=i.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#Jn,e=this.#Jn=this.#rs().trimEnd();if(t===e)return;const i=t=>{this.#Jn=t,t?(this.#os(),this._uiManager.rebuild(this),this.#ss()):this.remove()};this.addCommands({cmd:()=>{i(e)},undo:()=>{i(t)},mustExec:!1}),this.#ss()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&"Enter"===t.key&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){qr._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,e;this.width&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#Zn),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),fn._l10nPromise.get("pdfjs-free-text-default-content").then((t=>this.editorDiv?.setAttribute("default-content",t))),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#On}px * var(--scale-factor))`,i.color=this.#xn,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),an(this,this.div,["dblclick","keydown"]),this.width){const[i,n]=this.parentDimensions;if(this.annotationElementId){const{position:s}=this.#es;let[r,a]=this.getInitialTranslation();[r,a]=this.pageTranslationToScreen(r,a);const[o,l]=this.pageDimensions,[c,d]=this.pageTranslation;let h,u;switch(this.rotation){case 0:h=t+(s[0]-c)/o,u=e+this.height-(s[1]-d)/l;break;case 90:h=t+(s[0]-c)/o,u=e-(s[1]-d)/l,[r,a]=[a,-r];break;case 180:h=t-this.width+(s[0]-c)/o,u=e-(s[1]-d)/l,[r,a]=[-r,-a];break;case 270:h=t+(s[0]-c-this.height*l)/o,u=e+(s[1]-d-this.width*o)/l,[r,a]=[-a,r]}this.setAt(h*i,u*n,r,a)}else this.setAt(t*i,e*n,this.width*i,this.height*n);this.#os(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#as(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Br,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:i}=e;if(1===i.length&&"text/plain"===i[0])return;t.preventDefault();const n=qr.#ls(e.getData("text")||"").replaceAll(Br,"\n");if(!n)return;const s=window.getSelection();if(!s.rangeCount)return;this.editorDiv.normalize(),s.deleteFromDocument();const r=s.getRangeAt(0);if(!n.includes("\n"))return r.insertNode(document.createTextNode(n)),this.editorDiv.normalize(),void s.collapseToStart();const{startContainer:a,startOffset:o}=r,l=[],c=[];if(a.nodeType===Node.TEXT_NODE){const t=a.parentElement;if(c.push(a.nodeValue.slice(o).replaceAll(Br,"")),t!==this.editorDiv){let e=l;for(const i of this.editorDiv.childNodes)i!==t?e.push(qr.#as(i)):e=c}l.push(a.nodeValue.slice(0,o).replaceAll(Br,""))}else if(a===this.editorDiv){let t=l,e=0;for(const i of this.editorDiv.childNodes)e++===o&&(t=c),t.push(qr.#as(i))}this.#Jn=`${l.join("\n")}${n}${c.join("\n")}`,this.#os();const d=new Range;let h=l.reduce(((t,e)=>t+e.length),0);for(const{firstChild:t}of this.editorDiv.childNodes)if(t.nodeType===Node.TEXT_NODE){const e=t.nodeValue.length;if(h<=e){d.setStart(t,h),d.setEnd(t,h);break}h-=e}s.removeAllRanges(),s.addRange(d)}#os(){if(this.editorDiv.replaceChildren(),this.#Jn)for(const t of this.#Jn.split("\n")){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#cs(){return this.#Jn.replaceAll(" "," ")}static#ls(t){return t.replaceAll(" "," ")}get contentDiv(){return this.editorDiv}static deserialize(t,e,i){let n=null;if(t instanceof xr){const{data:{defaultAppearanceData:{fontSize:e,fontColor:i},rect:s,rotation:r,id:a},textContent:o,textPosition:l,parent:{page:{pageNumber:c}}}=t;if(!o||0===o.length)return null;n=t={annotationType:Ke.FREETEXT,color:Array.from(i),fontSize:e,value:o.join("\n"),position:l,pageIndex:c-1,rect:s.slice(0),rotation:r,id:a,deleted:!1}}const s=super.deserialize(t,e,i);return s.#On=t.fontSize,s.#xn=Si.makeHexColor(...t.color),s.#Jn=qr.#ls(t.value),s.annotationElementId=t.id||null,s.#es=n,s}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const e=qr._internalPadding*this.parentScale,i=this.getRect(e,e),n=fn._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#xn),s={annotationType:Ke.FREETEXT,color:n,fontSize:this.#On,value:this.#cs(),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?s:this.annotationElementId&&!this.#ds(s)?null:(s.id=this.annotationElementId,s)}#ds(t){const{value:e,fontSize:i,color:n,pageIndex:s}=this.#es;return this._hasBeenMoved||t.value!==e||t.fontSize!==i||t.color.some(((t,e)=>t!==n[e]))||t.pageIndex!==s}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(this.deleted)return e;const{style:i}=e;i.fontSize=`calc(${this.#On}px * var(--scale-factor))`,i.color=this.#xn,e.replaceChildren();for(const t of this.#Jn.split("\n")){const i=document.createElement("div");i.append(t?document.createTextNode(t):document.createElement("br")),e.append(i)}const n=qr._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(n,n),popupContent:this.#Jn}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class Hr{#hs;#us=[];#ps=[];constructor(t,e=0,i=0,n=!0){let s=1/0,r=-1/0,a=1/0,o=-1/0;const l=10**-4;for(const{x:i,y:n,width:c,height:d}of t){const t=Math.floor((i-e)/l)*l,h=Math.ceil((i+c+e)/l)*l,u=Math.floor((n-e)/l)*l,p=Math.ceil((n+d+e)/l)*l,f=[t,u,p,!0],g=[h,u,p,!1];this.#us.push(f,g),s=Math.min(s,t),r=Math.max(r,h),a=Math.min(a,u),o=Math.max(o,p)}const c=r-s+2*i,d=o-a+2*i,h=s-i,u=a-i,p=this.#us.at(n?-1:-2),f=[p[0],p[2]];for(const t of this.#us){const[e,i,n]=t;t[0]=(e-h)/c,t[1]=(i-u)/d,t[2]=(n-u)/d}this.#hs={x:h,y:u,width:c,height:d,lastPoint:f}}getOutlines(){this.#us.sort(((t,e)=>t[0]-e[0]||t[1]-e[1]||t[2]-e[2]));const t=[];for(const e of this.#us)e[3]?(t.push(...this.#fs(e)),this.#gs(e)):(this.#ms(e),t.push(...this.#fs(e)));return this.#vs(t)}#vs(t){const e=[],i=new Set;for(const i of t){const[t,n,s]=i;e.push([t,n,i],[t,s,i])}e.sort(((t,e)=>t[1]-e[1]||t[0]-e[0]));for(let t=0,n=e.length;t<n;t+=2){const n=e[t][2],s=e[t+1][2];n.push(s),s.push(n),i.add(n),i.add(s)}const n=[];let s;for(;i.size>0;){const t=i.values().next().value;let[e,r,a,o,l]=t;i.delete(t);let c=e,d=r;for(s=[e,a],n.push(s);;){let t;if(i.has(o))t=o;else{if(!i.has(l))break;t=l}i.delete(t),[e,r,a,o,l]=t,c!==e&&(s.push(c,d,e,d===r?r:a),c=e),d=d===r?a:r}s.push(c,d)}return new jr(n,this.#hs)}#bs(t){const e=this.#ps;let i=0,n=e.length-1;for(;i<=n;){const s=i+n>>1,r=e[s][0];if(r===t)return s;r<t?i=s+1:n=s-1}return n+1}#gs([,t,e]){const i=this.#bs(t);this.#ps.splice(i,0,[t,e])}#ms([,t,e]){const i=this.#bs(t);for(let n=i;n<this.#ps.length;n++){const[i,s]=this.#ps[n];if(i!==t)break;if(i===t&&s===e)return void this.#ps.splice(n,1)}for(let n=i-1;n>=0;n--){const[i,s]=this.#ps[n];if(i!==t)break;if(i===t&&s===e)return void this.#ps.splice(n,1)}}#fs(t){const[e,i,n]=t,s=[[e,i,n]],r=this.#bs(n);for(let t=0;t<r;t++){const[i,n]=this.#ps[t];for(let t=0,r=s.length;t<r;t++){const[,a,o]=s[t];if(!(n<=a||o<=i))if(a>=i)if(o>n)s[t][1]=n;else{if(1===r)return[];s.splice(t,1),t--,r--}else s[t][2]=i,o>n&&s.push([e,n,o])}}return s}}class zr{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(t,e){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof Vr}}class jr extends zr{#hs;#ys;constructor(t,e){super(),this.#ys=t,this.#hs=e}toSVGPath(){const t=[];for(const e of this.#ys){let[i,n]=e;t.push(`M${i} ${n}`);for(let s=2;s<e.length;s+=2){const r=e[s],a=e[s+1];r===i?(t.push(`V${a}`),n=a):a===n&&(t.push(`H${r}`),i=r)}t.push("Z")}return t.join(" ")}serialize([t,e,i,n],s){const r=[],a=i-t,o=n-e;for(const e of this.#ys){const i=new Array(e.length);for(let s=0;s<e.length;s+=2)i[s]=t+e[s]*a,i[s+1]=n-e[s+1]*o;r.push(i)}return r}get box(){return this.#hs}}class Ur{#hs;#_s=[];#ws;#As;#xs=[];#Es=new Float64Array(18);#Ss;#Ts;#Cs;#ks;#Ms;#Is;#Ls=[];static#Ps=8;static#Rs=2;static#Ds=Ur.#Ps+Ur.#Rs;constructor({x:t,y:e},i,n,s,r,a=0){this.#hs=i,this.#Is=s*n,this.#As=r,this.#Es.set([NaN,NaN,NaN,NaN,t,e],6),this.#ws=a,this.#ks=Ur.#Ps*n,this.#Cs=Ur.#Ds*n,this.#Ms=n,this.#Ls.push(t,e)}get free(){return!0}isEmpty(){return isNaN(this.#Es[8])}#Fs(){const t=this.#Es.subarray(4,6),e=this.#Es.subarray(16,18),[i,n,s,r]=this.#hs;return[(this.#Ss+(t[0]-e[0])/2-i)/s,(this.#Ts+(t[1]-e[1])/2-n)/r,(this.#Ss+(e[0]-t[0])/2-i)/s,(this.#Ts+(e[1]-t[1])/2-n)/r]}add({x:t,y:e}){this.#Ss=t,this.#Ts=e;const[i,n,s,r]=this.#hs;let[a,o,l,c]=this.#Es.subarray(8,12);const d=t-l,h=e-c,u=Math.hypot(d,h);if(u<this.#Cs)return!1;const p=u-this.#ks,f=p/u,g=f*d,m=f*h;let v=a,b=o;a=l,o=c,l+=g,c+=m,this.#Ls?.push(t,e);const y=g/p,_=-m/p*this.#Is,w=y*this.#Is;return this.#Es.set(this.#Es.subarray(2,8),0),this.#Es.set([l+_,c+w],4),this.#Es.set(this.#Es.subarray(14,18),12),this.#Es.set([l-_,c-w],16),isNaN(this.#Es[6])?(0===this.#xs.length&&(this.#Es.set([a+_,o+w],2),this.#xs.push(NaN,NaN,NaN,NaN,(a+_-i)/s,(o+w-n)/r),this.#Es.set([a-_,o-w],14),this.#_s.push(NaN,NaN,NaN,NaN,(a-_-i)/s,(o-w-n)/r)),this.#Es.set([v,b,a,o,l,c],6),!this.isEmpty()):(this.#Es.set([v,b,a,o,l,c],6),Math.abs(Math.atan2(b-o,v-a)-Math.atan2(m,g))<Math.PI/2?([a,o,l,c]=this.#Es.subarray(2,6),this.#xs.push(NaN,NaN,NaN,NaN,((a+l)/2-i)/s,((o+c)/2-n)/r),[a,o,v,b]=this.#Es.subarray(14,18),this.#_s.push(NaN,NaN,NaN,NaN,((v+a)/2-i)/s,((b+o)/2-n)/r),!0):([v,b,a,o,l,c]=this.#Es.subarray(0,6),this.#xs.push(((v+5*a)/6-i)/s,((b+5*o)/6-n)/r,((5*a+l)/6-i)/s,((5*o+c)/6-n)/r,((a+l)/2-i)/s,((o+c)/2-n)/r),[l,c,a,o,v,b]=this.#Es.subarray(12,18),this.#_s.push(((v+5*a)/6-i)/s,((b+5*o)/6-n)/r,((5*a+l)/6-i)/s,((5*o+c)/6-n)/r,((a+l)/2-i)/s,((o+c)/2-n)/r),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#xs,e=this.#_s,i=this.#Es.subarray(4,6),n=this.#Es.subarray(16,18),[s,r,a,o]=this.#hs,[l,c,d,h]=this.#Fs();if(isNaN(this.#Es[6])&&!this.isEmpty())return`M${(this.#Es[2]-s)/a} ${(this.#Es[3]-r)/o} L${(this.#Es[4]-s)/a} ${(this.#Es[5]-r)/o} L${l} ${c} L${d} ${h} L${(this.#Es[16]-s)/a} ${(this.#Es[17]-r)/o} L${(this.#Es[14]-s)/a} ${(this.#Es[15]-r)/o} Z`;const u=[];u.push(`M${t[4]} ${t[5]}`);for(let e=6;e<t.length;e+=6)isNaN(t[e])?u.push(`L${t[e+4]} ${t[e+5]}`):u.push(`C${t[e]} ${t[e+1]} ${t[e+2]} ${t[e+3]} ${t[e+4]} ${t[e+5]}`);u.push(`L${(i[0]-s)/a} ${(i[1]-r)/o} L${l} ${c} L${d} ${h} L${(n[0]-s)/a} ${(n[1]-r)/o}`);for(let t=e.length-6;t>=6;t-=6)isNaN(e[t])?u.push(`L${e[t+4]} ${e[t+5]}`):u.push(`C${e[t]} ${e[t+1]} ${e[t+2]} ${e[t+3]} ${e[t+4]} ${e[t+5]}`);return u.push(`L${e[4]} ${e[5]} Z`),u.join(" ")}getOutlines(){const t=this.#xs,e=this.#_s,i=this.#Es,n=i.subarray(4,6),s=i.subarray(16,18),[r,a,o,l]=this.#hs,c=new Float64Array((this.#Ls?.length??0)+2);for(let t=0,e=c.length-2;t<e;t+=2)c[t]=(this.#Ls[t]-r)/o,c[t+1]=(this.#Ls[t+1]-a)/l;c[c.length-2]=(this.#Ss-r)/o,c[c.length-1]=(this.#Ts-a)/l;const[d,h,u,p]=this.#Fs();if(isNaN(i[6])&&!this.isEmpty()){const t=new Float64Array(36);return t.set([NaN,NaN,NaN,NaN,(i[2]-r)/o,(i[3]-a)/l,NaN,NaN,NaN,NaN,(i[4]-r)/o,(i[5]-a)/l,NaN,NaN,NaN,NaN,d,h,NaN,NaN,NaN,NaN,u,p,NaN,NaN,NaN,NaN,(i[16]-r)/o,(i[17]-a)/l,NaN,NaN,NaN,NaN,(i[14]-r)/o,(i[15]-a)/l],0),new Vr(t,c,this.#hs,this.#Ms,this.#ws,this.#As)}const f=new Float64Array(this.#xs.length+24+this.#_s.length);let g=t.length;for(let e=0;e<g;e+=2)isNaN(t[e])?f[e]=f[e+1]=NaN:(f[e]=t[e],f[e+1]=t[e+1]);f.set([NaN,NaN,NaN,NaN,(n[0]-r)/o,(n[1]-a)/l,NaN,NaN,NaN,NaN,d,h,NaN,NaN,NaN,NaN,u,p,NaN,NaN,NaN,NaN,(s[0]-r)/o,(s[1]-a)/l],g),g+=24;for(let t=e.length-6;t>=6;t-=6)for(let i=0;i<6;i+=2)isNaN(e[t+i])?(f[g]=f[g+1]=NaN,g+=2):(f[g]=e[t+i],f[g+1]=e[t+i+1],g+=2);return f.set([NaN,NaN,NaN,NaN,e[4],e[5]],g),new Vr(f,c,this.#hs,this.#Ms,this.#ws,this.#As)}}class Vr extends zr{#hs;#Os=null;#ws;#As;#Ls;#Ms;#Ns;constructor(t,e,i,n,s,r){super(),this.#Ns=t,this.#Ls=e,this.#hs=i,this.#Ms=n,this.#ws=s,this.#As=r,this.#Bs(r);const{x:a,y:o,width:l,height:c}=this.#Os;for(let e=0,i=t.length;e<i;e+=2)t[e]=(t[e]-a)/l,t[e+1]=(t[e+1]-o)/c;for(let t=0,i=e.length;t<i;t+=2)e[t]=(e[t]-a)/l,e[t+1]=(e[t+1]-o)/c}toSVGPath(){const t=[`M${this.#Ns[4]} ${this.#Ns[5]}`];for(let e=6,i=this.#Ns.length;e<i;e+=6)isNaN(this.#Ns[e])?t.push(`L${this.#Ns[e+4]} ${this.#Ns[e+5]}`):t.push(`C${this.#Ns[e]} ${this.#Ns[e+1]} ${this.#Ns[e+2]} ${this.#Ns[e+3]} ${this.#Ns[e+4]} ${this.#Ns[e+5]}`);return t.push("Z"),t.join(" ")}serialize([t,e,i,n],s){const r=i-t,a=n-e;let o,l;switch(s){case 0:o=this.#qs(this.#Ns,t,n,r,-a),l=this.#qs(this.#Ls,t,n,r,-a);break;case 90:o=this.#Hs(this.#Ns,t,e,r,a),l=this.#Hs(this.#Ls,t,e,r,a);break;case 180:o=this.#qs(this.#Ns,i,e,-r,a),l=this.#qs(this.#Ls,i,e,-r,a);break;case 270:o=this.#Hs(this.#Ns,i,n,-r,-a),l=this.#Hs(this.#Ls,i,n,-r,-a)}return{outline:Array.from(o),points:[Array.from(l)]}}#qs(t,e,i,n,s){const r=new Float64Array(t.length);for(let a=0,o=t.length;a<o;a+=2)r[a]=e+t[a]*n,r[a+1]=i+t[a+1]*s;return r}#Hs(t,e,i,n,s){const r=new Float64Array(t.length);for(let a=0,o=t.length;a<o;a+=2)r[a]=e+t[a+1]*n,r[a+1]=i+t[a]*s;return r}#Bs(t){const e=this.#Ns;let i=e[4],n=e[5],s=i,r=n,a=i,o=n,l=i,c=n;const d=t?Math.max:Math.min;for(let t=6,h=e.length;t<h;t+=6){if(isNaN(e[t]))s=Math.min(s,e[t+4]),r=Math.min(r,e[t+5]),a=Math.max(a,e[t+4]),o=Math.max(o,e[t+5]),c<e[t+5]?(l=e[t+4],c=e[t+5]):c===e[t+5]&&(l=d(l,e[t+4]));else{const h=Si.bezierBoundingBox(i,n,...e.slice(t,t+6));s=Math.min(s,h[0]),r=Math.min(r,h[1]),a=Math.max(a,h[2]),o=Math.max(o,h[3]),c<h[3]?(l=h[2],c=h[3]):c===h[3]&&(l=d(l,h[2]))}i=e[t+4],n=e[t+5]}const h=s-this.#ws,u=r-this.#ws,p=a-s+2*this.#ws,f=o-r+2*this.#ws;this.#Os={x:h,y:u,width:p,height:f,lastPoint:[l,c]}}get box(){return this.#Os}getNewOutline(t,e){const{x:i,y:n,width:s,height:r}=this.#Os,[a,o,l,c]=this.#hs,d=s*l,h=r*c,u=i*l+a,p=n*c+o,f=new Ur({x:this.#Ls[0]*d+u,y:this.#Ls[1]*h+p},this.#hs,this.#Ms,t,this.#As,e??this.#ws);for(let t=2;t<this.#Ls.length;t+=2)f.add({x:this.#Ls[t]*d+u,y:this.#Ls[t+1]*h+p});return f.getOutlines()}}class Gr{#gn=this.#mn.bind(this);#zs=this.#c.bind(this);#js=null;#Us=null;#Vs;#Gs=null;#Ws=!1;#$s=!1;#r=null;#Xs;#g=null;#Ks;static get _keyboardManager(){return hi(this,"_keyboardManager",new dn([[["Escape","mac+Escape"],Gr.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Gr.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Gr.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Gr.prototype._moveToPrevious],[["Home","mac+Home"],Gr.prototype._moveToBeginning],[["End","mac+End"],Gr.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#$s=!1,this.#Ks=Ye.HIGHLIGHT_COLOR,this.#r=t):(this.#$s=!0,this.#Ks=Ye.HIGHLIGHT_DEFAULT_COLOR),this.#g=t?._uiManager||e,this.#Xs=this.#g._eventBus,this.#Vs=t?.color||this.#g?.highlightColors.values().next().value||"#FFFF98"}renderButton(){const t=this.#js=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=this.#g._signal;t.addEventListener("click",this.#Ys.bind(this),{signal:e}),t.addEventListener("keydown",this.#gn,{signal:e});const i=this.#Us=document.createElement("span");return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=this.#Vs,t.append(i),t}renderMainDropdown(){const t=this.#Gs=this.#Qs();return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}#Qs(){const t=document.createElement("div"),e=this.#g._signal;t.addEventListener("contextmenu",Ki,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,n]of this.#g.highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",n),s.title=i,s.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${i}`);const r=document.createElement("span");s.append(r),r.className="swatch",r.style.backgroundColor=n,s.setAttribute("aria-selected",n===this.#Vs),s.addEventListener("click",this.#Js.bind(this,n),{signal:e}),t.append(s)}return t.addEventListener("keydown",this.#gn,{signal:e}),t}#Js(t,e){e.stopPropagation(),this.#Xs.dispatch("switchannotationeditorparams",{source:this,type:this.#Ks,value:t})}_colorSelectFromKeyboard(t){if(t.target===this.#js)return void this.#Ys(t);const e=t.target.getAttribute("data-color");e&&this.#Js(e,t)}_moveToNext(t){this.#Zs?t.target!==this.#js?t.target.nextSibling?.focus():this.#Gs.firstChild?.focus():this.#Ys(t)}_moveToPrevious(t){t.target!==this.#Gs?.firstChild&&t.target!==this.#js?(this.#Zs||this.#Ys(t),t.target.previousSibling?.focus()):this.#Zs&&this._hideDropdownFromKeyboard()}_moveToBeginning(t){this.#Zs?this.#Gs.firstChild?.focus():this.#Ys(t)}_moveToEnd(t){this.#Zs?this.#Gs.lastChild?.focus():this.#Ys(t)}#mn(t){Gr._keyboardManager.exec(this,t)}#Ys(t){if(this.#Zs)return void this.hideDropdown();if(this.#Ws=0===t.detail,window.addEventListener("pointerdown",this.#zs,{signal:this.#g._signal}),this.#Gs)return void this.#Gs.classList.remove("hidden");const e=this.#Gs=this.#Qs();this.#js.append(e)}#c(t){this.#Gs?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#Gs?.classList.add("hidden"),window.removeEventListener("pointerdown",this.#zs)}get#Zs(){return this.#Gs&&!this.#Gs.classList.contains("hidden")}_hideDropdownFromKeyboard(){this.#$s||(this.#Zs?(this.hideDropdown(),this.#js.focus({preventScroll:!0,focusVisible:this.#Ws})):this.#r?.unselect())}updateColor(t){if(this.#Us&&(this.#Us.style.backgroundColor=t),!this.#Gs)return;const e=this.#g.highlightColors.values();for(const i of this.#Gs.children)i.setAttribute("aria-selected",e.next().value===t)}destroy(){this.#js?.remove(),this.#js=null,this.#Us=null,this.#Gs?.remove(),this.#Gs=null}}class Wr extends fn{#tr=null;#er=0;#ir;#nr=null;#s=null;#sr=null;#rr=null;#ar=0;#or=null;#lr=null;#y=null;#cr=!1;#dr=null;#hr;#ur=null;#pr="";#Is;#fr="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _l10nPromise;static _type="highlight";static _editorType=Ke.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=Wr.prototype;return hi(this,"_keyboardManager",new dn([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||Wr._defaultColor,this.#Is=t.thickness||Wr._defaultThickness,this.#hr=t.opacity||Wr._defaultOpacity,this.#ir=t.boxes||null,this.#fr=t.methodOfCreation||"",this.#pr=t.text||"",this._isDraggable=!1,t.highlightId>-1?(this.#cr=!0,this.#gr(t),this.#mr()):(this.#tr=t.anchorNode,this.#er=t.anchorOffset,this.#rr=t.focusNode,this.#ar=t.focusOffset,this.#vr(),this.#mr(),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:this.#cr?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#Is,methodOfCreation:this.#fr}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#vr(){const t=new Hr(this.#ir,.001);this.#lr=t.getOutlines(),({x:this.x,y:this.y,width:this.width,height:this.height}=this.#lr.box);const e=new Hr(this.#ir,.0025,.001,"ltr"===this._uiManager.direction);this.#sr=e.getOutlines();const{lastPoint:i}=this.#sr.box;this.#dr=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]}#gr({highlightOutlines:t,highlightId:e,clipPathId:i}){if(this.#lr=t,this.#sr=t.getNewOutline(this.#Is/2+1.5,.0025),e>=0)this.#y=e,this.#nr=i,this.parent.drawLayer.finalizeLine(e,t),this.#ur=this.parent.drawLayer.highlightOutline(this.#sr);else if(this.parent){const e=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(this.#y,t),this.parent.drawLayer.updateBox(this.#y,Wr.#br(this.#lr.box,(e-this.rotation+360)%360)),this.parent.drawLayer.updateLine(this.#ur,this.#sr),this.parent.drawLayer.updateBox(this.#ur,Wr.#br(this.#sr.box,e))}const{x:n,y:s,width:r,height:a}=t.box;switch(this.rotation){case 0:this.x=n,this.y=s,this.width=r,this.height=a;break;case 90:{const[t,e]=this.parentDimensions;this.x=s,this.y=1-n,this.width=r*e/t,this.height=a*t/e;break}case 180:this.x=1-n,this.y=1-s,this.width=r,this.height=a;break;case 270:{const[t,e]=this.parentDimensions;this.x=1-s,this.y=n,this.width=r*e/t,this.height=a*t/e;break}}const{lastPoint:o}=this.#sr.box;this.#dr=[(o[0]-n)/r,(o[1]-s)/a]}static initialize(t,e){fn.initialize(t,e),Wr._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case Ye.HIGHLIGHT_DEFAULT_COLOR:Wr._defaultColor=e;break;case Ye.HIGHLIGHT_THICKNESS:Wr._defaultThickness=e}}translateInPage(t,e){}get toolbarPosition(){return this.#dr}updateParams(t,e){switch(t){case Ye.HIGHLIGHT_COLOR:this.#ns(e);break;case Ye.HIGHLIGHT_THICKNESS:this.#yr(e)}}static get defaultPropertiesToUpdate(){return[[Ye.HIGHLIGHT_DEFAULT_COLOR,Wr._defaultColor],[Ye.HIGHLIGHT_THICKNESS,Wr._defaultThickness]]}get propertiesToUpdate(){return[[Ye.HIGHLIGHT_COLOR,this.color||Wr._defaultColor],[Ye.HIGHLIGHT_THICKNESS,this.#Is||Wr._defaultThickness],[Ye.HIGHLIGHT_FREE,this.#cr]]}#ns(t){const e=t=>{this.color=t,this.parent?.drawLayer.changeColor(this.#y,t),this.#s?.updateColor(t)},i=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ye.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)}#yr(t){const e=this.#Is,i=t=>{this.#Is=t,this.#_r(t)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ye.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(this.#s=new Gr({editor:this}),t.addColorPicker(this.#s)),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#wr())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#wr())}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){this.#Ar(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.#mr(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#Ar():t&&(this.#mr(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#_r(t){if(!this.#cr)return;this.#gr({highlightOutlines:this.#lr.getNewOutline(t/2)}),this.fixAndSetPosition();const[e,i]=this.parentDimensions;this.setDims(this.width*e,this.height*i)}#Ar(){null!==this.#y&&this.parent&&(this.parent.drawLayer.remove(this.#y),this.#y=null,this.parent.drawLayer.remove(this.#ur),this.#ur=null)}#mr(t=this.parent){null===this.#y&&(({id:this.#y,clipPathId:this.#nr}=t.drawLayer.highlight(this.#lr,this.color,this.#hr)),this.#ur=t.drawLayer.highlightOutline(this.#sr),this.#or&&(this.#or.style.clipPath=this.#nr))}static#br({x:t,y:e,width:i,height:n},s){switch(s){case 90:return{x:1-e-n,y:t,width:n,height:i};case 180:return{x:1-t-i,y:1-e-n,width:i,height:n};case 270:return{x:e,y:1-t-i,width:n,height:i}}return{x:t,y:e,width:i,height:n}}rotate(t){const{drawLayer:e}=this.parent;let i;this.#cr?(t=(t-this.rotation+360)%360,i=Wr.#br(this.#lr.box,t)):i=Wr.#br(this,t),e.rotate(this.#y,t),e.rotate(this.#ur,t),e.updateBox(this.#y,i),e.updateBox(this.#ur,Wr.#br(this.#sr.box,t))}render(){if(this.div)return this.div;const t=super.render();this.#pr&&(t.setAttribute("aria-label",this.#pr),t.setAttribute("role","mark")),this.#cr?t.classList.add("free"):this.div.addEventListener("keydown",this.#xr.bind(this),{signal:this._uiManager._signal});const e=this.#or=document.createElement("div");t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#nr;const[i,n]=this.parentDimensions;return this.setDims(this.width*i,this.height*n),an(this,this.#or,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.parent.drawLayer.addClass(this.#ur,"hovered")}pointerleave(){this.parent.drawLayer.removeClass(this.#ur,"hovered")}#xr(t){Wr._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#Er(!0);break;case 1:case 3:this.#Er(!1)}}#Er(t){if(!this.#tr)return;const e=window.getSelection();t?e.setPosition(this.#tr,this.#er):e.setPosition(this.#rr,this.#ar)}select(){super.select(),this.#ur&&(this.parent?.drawLayer.removeClass(this.#ur,"hovered"),this.parent?.drawLayer.addClass(this.#ur,"selected"))}unselect(){super.unselect(),this.#ur&&(this.parent?.drawLayer.removeClass(this.#ur,"selected"),this.#cr||this.#Er(!1))}get _mustFixPosition(){return!this.#cr}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.show(this.#y,t),this.parent.drawLayer.show(this.#ur,t))}#wr(){return this.#cr?this.rotation:0}#Sr(){if(this.#cr)return null;const[t,e]=this.pageDimensions,[i,n]=this.pageTranslation,s=this.#ir,r=new Float32Array(8*s.length);let a=0;for(const{x:o,y:l,width:c,height:d}of s){const s=o*t+i,h=(1-l-d)*e+n;r[a]=r[a+4]=s,r[a+1]=r[a+3]=h,r[a+2]=r[a+6]=s+c*t,r[a+5]=r[a+7]=h+d*e,a+=8}return r}#Tr(t){return this.#lr.serialize(t,this.#wr())}static startHighlighting(t,e,{target:i,x:n,y:s}){const{x:r,y:a,width:o,height:l}=i.getBoundingClientRect(),c=new AbortController,d=t.combinedSignal(c),h=e=>{c.abort(),this.#Cr(t,e)};window.addEventListener("blur",h,{signal:d}),window.addEventListener("pointerup",h,{signal:d}),window.addEventListener("pointerdown",(t=>{t.preventDefault(),t.stopPropagation()}),{capture:!0,passive:!1,signal:d}),window.addEventListener("contextmenu",Ki,{signal:d}),i.addEventListener("pointermove",this.#kr.bind(this,t),{signal:d}),this._freeHighlight=new Ur({x:n,y:s},[r,a,o,l],t.scale,this._defaultThickness/2,e,.001),({id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0))}static#kr(t,e){this._freeHighlight.add(e)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)}static#Cr(t,e){this._freeHighlight.isEmpty()?t.drawLayer.removeFreeHighlight(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static deserialize(t,e,i){const n=super.deserialize(t,e,i),{rect:[s,r,a,o],color:l,quadPoints:c}=t;n.color=Si.makeHexColor(...l),n.#hr=t.opacity;const[d,h]=n.pageDimensions;n.width=(a-s)/d,n.height=(o-r)/h;const u=n.#ir=[];for(let t=0;t<c.length;t+=8)u.push({x:(c[4]-a)/d,y:(o-(1-c[t+5]))/h,width:(c[t+2]-c[t])/d,height:(c[t+5]-c[t+1])/h});return n.#vr(),n}serialize(t=!1){if(this.isEmpty()||t)return null;const e=this.getRect(0,0),i=fn._colorManager.convert(this.color);return{annotationType:Ke.HIGHLIGHT,color:i,opacity:this.#hr,thickness:this.#Is,quadPoints:this.#Sr(),outlines:this.#Tr(e),pageIndex:this.pageIndex,rect:e,rotation:this.#wr(),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}}class $r extends fn{#Mr=0;#Ir=0;#Lr=null;#Pr=new Path2D;#Rr=!1;#Dr=null;#Fr=!1;#Or=!1;#Nr=null;#Br=null;#qr=0;#Hr=0;#zr=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";static _editorType=Ke.INK;constructor(t){super({...t,name:"inkEditor"}),this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,e){fn.initialize(t,e)}static updateDefaultParams(t,e){switch(t){case Ye.INK_THICKNESS:$r._defaultThickness=e;break;case Ye.INK_COLOR:$r._defaultColor=e;break;case Ye.INK_OPACITY:$r._defaultOpacity=e/100}}updateParams(t,e){switch(t){case Ye.INK_THICKNESS:this.#yr(e);break;case Ye.INK_COLOR:this.#ns(e);break;case Ye.INK_OPACITY:this.#jr(e)}}static get defaultPropertiesToUpdate(){return[[Ye.INK_THICKNESS,$r._defaultThickness],[Ye.INK_COLOR,$r._defaultColor||fn._defaultLineColor],[Ye.INK_OPACITY,Math.round(100*$r._defaultOpacity)]]}get propertiesToUpdate(){return[[Ye.INK_THICKNESS,this.thickness||$r._defaultThickness],[Ye.INK_COLOR,this.color||$r._defaultColor||fn._defaultLineColor],[Ye.INK_OPACITY,Math.round(100*(this.opacity??$r._defaultOpacity))]]}#yr(t){const e=t=>{this.thickness=t,this.#Ur()},i=this.thickness;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ye.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#ns(t){const e=t=>{this.color=t,this.#Vr()},i=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ye.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#jr(t){const e=t=>{this.opacity=t,this.#Vr()};t/=100;const i=this.opacity;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ye.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.canvas||(this.#Gr(),this.#Wr()),this.isAttachedToDOM||(this.parent.add(this),this.#$r()),this.#Ur()))}remove(){null!==this.canvas&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#Lr&&(clearTimeout(this.#Lr),this.#Lr=null),this.#Nr?.disconnect(),this.#Nr=null,super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&null===t&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,e]=this.parentDimensions,i=this.width*t,n=this.height*e;this.setDimensions(i,n)}enableEditMode(){this.#Rr||null===this.canvas||(super.enableEditMode(),this._isDraggable=!1,this.#Xr())}disableEditMode(){this.isInEditMode()&&null!==this.canvas&&(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.#Kr())}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}#Yr(){const{parentRotation:t,parentDimensions:[e,i]}=this;switch(t){case 90:return[0,i,i,e];case 180:return[e,i,e,i];case 270:return[e,0,i,e];default:return[0,0,e,i]}}#Qr(){const{ctx:t,color:e,opacity:i,thickness:n,parentScale:s,scaleFactor:r}=this;t.lineWidth=n*s/r,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${e}${function(t){return Math.round(Math.min(255,Math.max(1,255*t))).toString(16).padStart(2,"0")}(i)}`}#Jr(t,e){this.canvas.addEventListener("contextmenu",Ki,{signal:this._uiManager._signal}),this.#Kr(),this.#Dr=new AbortController;const i=this._uiManager.combinedSignal(this.#Dr);this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:i}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:i}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:i}),this.isEditing=!0,this.#Or||(this.#Or=!0,this.#$r(),this.thickness||=$r._defaultThickness,this.color||=$r._defaultColor||fn._defaultLineColor,this.opacity??=$r._defaultOpacity),this.currentPath.push([t,e]),this.#Fr=!1,this.#Qr(),this.#zr=()=>{this.#Zr(),this.#zr&&window.requestAnimationFrame(this.#zr)},window.requestAnimationFrame(this.#zr)}#ta(t,e){const[i,n]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===i&&e===n)return;const s=this.currentPath;let r=this.#Pr;if(s.push([t,e]),this.#Fr=!0,s.length<=2)return r.moveTo(...s[0]),void r.lineTo(t,e);3===s.length&&(this.#Pr=r=new Path2D,r.moveTo(...s[0])),this.#ea(r,...s.at(-3),...s.at(-2),t,e)}#ia(){if(0===this.currentPath.length)return;const t=this.currentPath.at(-1);this.#Pr.lineTo(...t)}#na(t,e){let i;if(this.#zr=null,t=Math.min(Math.max(t,0),this.canvas.width),e=Math.min(Math.max(e,0),this.canvas.height),this.#ta(t,e),this.#ia(),1!==this.currentPath.length)i=this.#sa();else{const n=[t,e];i=[[n,n.slice(),n.slice(),n]]}const n=this.#Pr,s=this.currentPath;this.currentPath=[],this.#Pr=new Path2D,this.addCommands({cmd:()=>{this.allRawPaths.push(s),this.paths.push(i),this.bezierPath2D.push(n),this._uiManager.rebuild(this)},undo:()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),0===this.paths.length?this.remove():(this.canvas||(this.#Gr(),this.#Wr()),this.#Ur())},mustExec:!0})}#Zr(){if(!this.#Fr)return;this.#Fr=!1;Math.ceil(this.thickness*this.parentScale);const t=this.currentPath.slice(-3),e=t.map((t=>t[0])),i=t.map((t=>t[1])),{ctx:n}=(Math.min(...e),Math.max(...e),Math.min(...i),Math.max(...i),this);n.save(),n.clearRect(0,0,this.canvas.width,this.canvas.height);for(const t of this.bezierPath2D)n.stroke(t);n.stroke(this.#Pr),n.restore()}#ea(t,e,i,n,s,r,a){const o=(e+n)/2,l=(i+s)/2,c=(n+r)/2,d=(s+a)/2;t.bezierCurveTo(o+2*(n-o)/3,l+2*(s-l)/3,c+2*(n-c)/3,d+2*(s-d)/3,c,d)}#sa(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const e=[];let i,[n,s]=t[0];for(i=1;i<t.length-2;i++){const[r,a]=t[i],[o,l]=t[i+1],c=(r+o)/2,d=(a+l)/2,h=[n+2*(r-n)/3,s+2*(a-s)/3],u=[c+2*(r-c)/3,d+2*(a-d)/3];e.push([[n,s],h,u,[c,d]]),[n,s]=[c,d]}const[r,a]=t[i],[o,l]=t[i+1],c=[n+2*(r-n)/3,s+2*(a-s)/3],d=[o+2*(r-o)/3,l+2*(a-l)/3];return e.push([[n,s],c,d,[o,l]]),e}#Vr(){if(this.isEmpty())return void this.#ra();this.#Qr();const{canvas:t,ctx:e}=this;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.width,t.height),this.#ra();for(const t of this.bezierPath2D)e.stroke(t)}commit(){this.#Rr||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#Rr=!0,this.div.classList.add("disabled"),this.#Ur(!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}#Xr(){if(this.#Br)return;this.#Br=new AbortController;const t=this._uiManager.combinedSignal(this.#Br);this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:t})}#Kr(){this.pointerdownAC?.abort(),this.pointerdownAC=null}canvasPointerdown(t){0===t.button&&this.isInEditMode()&&!this.#Rr&&(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),this.#Jr(t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),this.#ta(t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),this.#aa(t)}canvasPointerleave(t){this.#aa(t)}#aa(t){this.#Dr?.abort(),this.#Dr=null,this.#Xr(),this.#Lr&&clearTimeout(this.#Lr),this.#Lr=setTimeout((()=>{this.#Lr=null,this.canvas.removeEventListener("contextmenu",Ki)}),10),this.#na(t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#Gr(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#Wr(){this.#Nr=new ResizeObserver((t=>{const e=t[0].contentRect;e.width&&e.height&&this.setDimensions(e.width,e.height)})),this.#Nr.observe(this.div),this._uiManager._signal.addEventListener("abort",(()=>{this.#Nr?.disconnect(),this.#Nr=null}),{once:!0})}get isResizable(){return!this.isEmpty()&&this.#Rr}render(){if(this.div)return this.div;let t,e;this.width&&(t=this.x,e=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[i,n,s,r]=this.#Yr();if(this.setAt(i,n,0,0),this.setDims(s,r),this.#Gr(),this.width){const[i,n]=this.parentDimensions;this.setAspectRatio(this.width*i,this.height*n),this.setAt(t*i,e*n,this.width*i,this.height*n),this.#Or=!0,this.#$r(),this.setDims(this.width*i,this.height*n),this.#Vr(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#Wr(),this.div}#$r(){if(!this.#Or)return;const[t,e]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*e),this.#ra()}setDimensions(t,e){const i=Math.round(t),n=Math.round(e);if(this.#qr===i&&this.#Hr===n)return;this.#qr=i,this.#Hr=n,this.canvas.style.visibility="hidden";const[s,r]=this.parentDimensions;this.width=t/s,this.height=e/r,this.fixAndSetPosition(),this.#Rr&&this.#oa(t,e),this.#$r(),this.#Vr(),this.canvas.style.visibility="visible",this.fixDims()}#oa(t,e){const i=this.#la(),n=(t-i)/this.#Ir,s=(e-i)/this.#Mr;this.scaleFactor=Math.min(n,s)}#ra(){const t=this.#la()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)}static#ca(t){const e=new Path2D;for(let i=0,n=t.length;i<n;i++){const[n,s,r,a]=t[i];0===i&&e.moveTo(...n),e.bezierCurveTo(s[0],s[1],r[0],r[1],a[0],a[1])}return e}static#da(t,e,i){const[n,s,r,a]=e;switch(i){case 0:for(let e=0,i=t.length;e<i;e+=2)t[e]+=n,t[e+1]=a-t[e+1];break;case 90:for(let e=0,i=t.length;e<i;e+=2){const i=t[e];t[e]=t[e+1]+n,t[e+1]=i+s}break;case 180:for(let e=0,i=t.length;e<i;e+=2)t[e]=r-t[e],t[e+1]+=s;break;case 270:for(let e=0,i=t.length;e<i;e+=2){const i=t[e];t[e]=r-t[e+1],t[e+1]=a-i}break;default:throw new Error("Invalid rotation")}return t}static#ha(t,e,i){const[n,s,r,a]=e;switch(i){case 0:for(let e=0,i=t.length;e<i;e+=2)t[e]-=n,t[e+1]=a-t[e+1];break;case 90:for(let e=0,i=t.length;e<i;e+=2){const i=t[e];t[e]=t[e+1]-s,t[e+1]=i-n}break;case 180:for(let e=0,i=t.length;e<i;e+=2)t[e]=r-t[e],t[e+1]-=s;break;case 270:for(let e=0,i=t.length;e<i;e+=2){const i=t[e];t[e]=a-t[e+1],t[e+1]=r-i}break;default:throw new Error("Invalid rotation")}return t}#ua(t,e,i,n){const s=[],r=this.thickness/2,a=t*e+r,o=t*i+r;for(const e of this.paths){const i=[],r=[];for(let n=0,s=e.length;n<s;n++){const[l,c,d,h]=e[n];if(l[0]===h[0]&&l[1]===h[1]&&1===s){const e=t*l[0]+a,n=t*l[1]+o;i.push(e,n),r.push(e,n);break}const u=t*l[0]+a,p=t*l[1]+o,f=t*c[0]+a,g=t*c[1]+o,m=t*d[0]+a,v=t*d[1]+o,b=t*h[0]+a,y=t*h[1]+o;0===n&&(i.push(u,p),r.push(u,p)),i.push(f,g,m,v,b,y),r.push(f,g),n===s-1&&r.push(b,y)}s.push({bezier:$r.#da(i,n,this.rotation),points:$r.#da(r,n,this.rotation)})}return s}#pa(){let t=1/0,e=-1/0,i=1/0,n=-1/0;for(const s of this.paths)for(const[r,a,o,l]of s){const s=Si.bezierBoundingBox(...r,...a,...o,...l);t=Math.min(t,s[0]),i=Math.min(i,s[1]),e=Math.max(e,s[2]),n=Math.max(n,s[3])}return[t,i,e,n]}#la(){return this.#Rr?Math.ceil(this.thickness*this.parentScale):0}#Ur(t=!1){if(this.isEmpty())return;if(!this.#Rr)return void this.#Vr();const e=this.#pa(),i=this.#la();this.#Ir=Math.max(fn.MIN_SIZE,e[2]-e[0]),this.#Mr=Math.max(fn.MIN_SIZE,e[3]-e[1]);const n=Math.ceil(i+this.#Ir*this.scaleFactor),s=Math.ceil(i+this.#Mr*this.scaleFactor),[r,a]=this.parentDimensions;this.width=n/r,this.height=s/a,this.setAspectRatio(n,s);const o=this.translationX,l=this.translationY;this.translationX=-e[0],this.translationY=-e[1],this.#$r(),this.#Vr(),this.#qr=n,this.#Hr=s,this.setDims(n,s);const c=t?i/this.scaleFactor/2:0;this.translate(o-this.translationX-c,l-this.translationY-c)}static deserialize(t,e,i){if(t instanceof Ir)return null;const n=super.deserialize(t,e,i);n.thickness=t.thickness,n.color=Si.makeHexColor(...t.color),n.opacity=t.opacity;const[s,r]=n.pageDimensions,a=n.width*s,o=n.height*r,l=n.parentScale,c=t.thickness/2;n.#Rr=!0,n.#qr=Math.round(a),n.#Hr=Math.round(o);const{paths:d,rect:h,rotation:u}=t;for(let{bezier:t}of d){t=$r.#ha(t,h,u);const e=[];n.paths.push(e);let i=l*(t[0]-c),s=l*(t[1]-c);for(let n=2,r=t.length;n<r;n+=6){const r=l*(t[n]-c),a=l*(t[n+1]-c),o=l*(t[n+2]-c),d=l*(t[n+3]-c),h=l*(t[n+4]-c),u=l*(t[n+5]-c);e.push([[i,s],[r,a],[o,d],[h,u]]),i=h,s=u}const r=this.#ca(e);n.bezierPath2D.push(r)}const p=n.#pa();return n.#Ir=Math.max(fn.MIN_SIZE,p[2]-p[0]),n.#Mr=Math.max(fn.MIN_SIZE,p[3]-p[1]),n.#oa(a,o),n}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),e=fn._colorManager.convert(this.ctx.strokeStyle);return{annotationType:Ke.INK,color:e,thickness:this.thickness,opacity:this.opacity,paths:this.#ua(this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}class Xr extends fn{#fa=null;#ga=null;#ma=null;#va=null;#ba=null;#ya="";#_a=null;#Nr=null;#wa=null;#Aa=!1;#xa=!1;static _type="stamp";static _editorType=Ke.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#va=t.bitmapUrl,this.#ba=t.bitmapFile}static initialize(t,e){fn.initialize(t,e)}static get supportedTypes(){return hi(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map((t=>`image/${t}`)))}static get supportedTypesStr(){return hi(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,e){e.pasteEditor(Ke.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#Ea(t,e=!1){t?(this.#fa=t.bitmap,e||(this.#ga=t.id,this.#Aa=t.isSvg),t.file&&(this.#ya=t.file.name),this.#Gr()):this.remove()}#Sa(){if(this.#ma=null,this._uiManager.enableWaiting(!1),this.#_a){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#fa)return this._editToolbar.hide(),void this._uiManager.editAltText(this,!0);if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#fa){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:n,width:s,height:r}=t||this.copyCanvas(null,!0).imageData,a=await i.guess({name:"altText",request:{data:n,width:s,height:r,channels:n.length/(s*r)}});if(!a)throw new Error("No response from the AI service.");if(a.error)throw new Error("Error from the AI service.");if(a.cancel)return null;if(!a.output)throw new Error("No valid response from the AI service.");const o=a.output;return await this.setGuessedAltText(o),e&&!this.hasAltTextData()&&(this.altTextData={alt:o,decorative:!1}),o}#Ta(){if(this.#ga)return this._uiManager.enableWaiting(!0),void this._uiManager.imageManager.getFromId(this.#ga).then((t=>this.#Ea(t,!0))).finally((()=>this.#Sa()));if(this.#va){const t=this.#va;return this.#va=null,this._uiManager.enableWaiting(!0),void(this.#ma=this._uiManager.imageManager.getFromUrl(t).then((t=>this.#Ea(t))).finally((()=>this.#Sa())))}if(this.#ba){const t=this.#ba;return this.#ba=null,this._uiManager.enableWaiting(!0),void(this.#ma=this._uiManager.imageManager.getFromFile(t).then((t=>this.#Ea(t))).finally((()=>this.#Sa())))}const t=document.createElement("input");t.type="file",t.accept=Xr.supportedTypesStr;const e=this._uiManager._signal;this.#ma=new Promise((i=>{t.addEventListener("change",(async()=>{if(t.files&&0!==t.files.length){this._uiManager.enableWaiting(!0);const e=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#Ea(e)}else this.remove();i()}),{signal:e}),t.addEventListener("cancel",(()=>{this.remove(),i()}),{signal:e})})).finally((()=>this.#Sa())),t.click()}remove(){this.#ga&&(this.#fa=null,this._uiManager.imageManager.deleteId(this.#ga),this.#_a?.remove(),this.#_a=null,this.#Nr?.disconnect(),this.#Nr=null,this.#wa&&(clearTimeout(this.#wa),this.#wa=null)),super.remove()}rebuild(){this.parent?(super.rebuild(),null!==this.div&&(this.#ga&&null===this.#_a&&this.#Ta(),this.isAttachedToDOM||this.parent.add(this))):this.#ga&&this.#Ta()}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#ma||this.#fa||this.#va||this.#ba||this.#ga)}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;if(this.width&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),this.#fa?this.#Gr():this.#Ta(),this.width){const[i,n]=this.parentDimensions;this.setAt(t*i,e*n,this.width*i,this.height*n)}return this.div}#Gr(){const{div:t}=this;let{width:e,height:i}=this.#fa;const[n,s]=this.pageDimensions,r=.75;if(this.width)e=this.width*n,i=this.height*s;else if(e>r*n||i>r*s){const t=Math.min(r*n/e,r*s/i);e*=t,i*=t}const[a,o]=this.parentDimensions;this.setDims(e*a/n,i*o/s),this._uiManager.enableWaiting(!1);const l=this.#_a=document.createElement("canvas");t.append(l),this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow||(t.hidden=!1),this.#Ca(e,i),this.#Wr(),this.#xa||(this.parent.addUndoableEditor(this),this.#xa=!0),this._reportTelemetry({action:"inserted_image"}),this.#ya&&l.setAttribute("aria-label",this.#ya)}copyCanvas(t,e=!1){t||(t=224);const{width:i,height:n}=this.#fa,s=document.createElement("canvas");let r=this.#fa,a=i,o=n;if(i>t||n>t){const e=Math.min(t/i,t/n);a=Math.floor(i*e),o=Math.floor(n*e),this.#Aa||(r=this.#ka(a,o))}s.width=a,s.height=o;const l=s.getContext("2d");l.filter=this._uiManager.hcmFilter;let c="white",d="#cfcfd8";"none"!==this._uiManager.hcmFilter?d="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(c="#8f8f9d",d="#42414d");const h=15,u=new OffscreenCanvas(30,30),p=u.getContext("2d");if(p.fillStyle=c,p.fillRect(0,0,30,30),p.fillStyle=d,p.fillRect(0,0,h,h),p.fillRect(h,h,h,h),l.fillStyle=l.createPattern(u,"repeat"),l.fillRect(0,0,a,o),e){const t=new OffscreenCanvas(a,o),e=t.getContext("2d",{willReadFrequently:!0});e.drawImage(r,0,0,r.width,r.height,0,0,a,o);const i=e.getImageData(0,0,a,o).data;return l.drawImage(t,0,0),{canvas:s,imageData:{width:a,height:o,data:i}}}return l.drawImage(r,0,0,r.width,r.height,0,0,a,o),{canvas:s,imageData:null}}#Ma(t,e){const[i,n]=this.parentDimensions;this.width=t/i,this.height=e/n,this.setDims(t,e),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,null!==this.#wa&&clearTimeout(this.#wa),this.#wa=setTimeout((()=>{this.#wa=null,this.#Ca(t,e)}),200)}#ka(t,e){const{width:i,height:n}=this.#fa;let s=i,r=n,a=this.#fa;for(;s>2*t||r>2*e;){const i=s,n=r;s>2*t&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2)),r>2*e&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2));const o=new OffscreenCanvas(s,r);o.getContext("2d").drawImage(a,0,0,i,n,0,0,s,r),a=o.transferToImageBitmap()}return a}#Ca(t,e){t=Math.ceil(t),e=Math.ceil(e);const i=this.#_a;if(!i||i.width===t&&i.height===e)return;i.width=t,i.height=e;const n=this.#Aa?this.#fa:this.#ka(t,e),s=i.getContext("2d");s.filter=this._uiManager.hcmFilter,s.drawImage(n,0,0,n.width,n.height,0,0,t,e)}getImageForAltText(){return this.#_a}#Ia(t){if(t){if(this.#Aa){const t=this._uiManager.imageManager.getSvgUrl(this.#ga);if(t)return t}const t=document.createElement("canvas");return({width:t.width,height:t.height}=this.#fa),t.getContext("2d").drawImage(this.#fa,0,0),t.toDataURL()}if(this.#Aa){const[t,e]=this.pageDimensions,i=Math.round(this.width*t*Oi.PDF_TO_CSS_UNITS),n=Math.round(this.height*e*Oi.PDF_TO_CSS_UNITS),s=new OffscreenCanvas(i,n);return s.getContext("2d").drawImage(this.#fa,0,0,this.#fa.width,this.#fa.height,0,0,i,n),s.transferToImageBitmap()}return structuredClone(this.#fa)}#Wr(){this._uiManager._signal&&(this.#Nr=new ResizeObserver((t=>{const e=t[0].contentRect;e.width&&e.height&&this.#Ma(e.width,e.height)})),this.#Nr.observe(this.div),this._uiManager._signal.addEventListener("abort",(()=>{this.#Nr?.disconnect(),this.#Nr=null}),{once:!0}))}static deserialize(t,e,i){if(t instanceof Fr)return null;const n=super.deserialize(t,e,i),{rect:s,bitmapUrl:r,bitmapId:a,isSvg:o,accessibilityData:l}=t;a&&i.imageManager.isValidId(a)?n.#ga=a:n.#va=r,n.#Aa=o;const[c,d]=n.pageDimensions;return n.width=(s[2]-s[0])/c,n.height=(s[3]-s[1])/d,l&&(n.altTextData=l),n}serialize(t=!1,e=null){if(this.isEmpty())return null;const i={annotationType:Ke.STAMP,bitmapId:this.#ga,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#Aa,structTreeParentId:this._structTreeParentId};if(t)return i.bitmapUrl=this.#Ia(!0),i.accessibilityData=this.serializeAltText(!0),i;const{decorative:n,altText:s}=this.serializeAltText(!1);if(!n&&s&&(i.accessibilityData={type:"Figure",alt:s}),null===e)return i;e.stamps||=new Map;const r=this.#Aa?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(e.stamps.has(this.#ga)){if(this.#Aa){const t=e.stamps.get(this.#ga);r>t.area&&(t.area=r,t.serialized.bitmap.close(),t.serialized.bitmap=this.#Ia(!1))}}else e.stamps.set(this.#ga,{area:r,serialized:i}),i.bitmap=this.#Ia(!1);return i}}class Kr{#$n;#La=!1;#Pa=null;#Ra=null;#Da=null;#Fa=new Map;#Oa=!1;#Na=!1;#Ba=!1;#qa=null;#Ha=null;#g;static _initialized=!1;static#H=new Map([qr,$r,Xr,Wr].map((t=>[t._editorType,t])));constructor({uiManager:t,pageIndex:e,div:i,accessibilityManager:n,annotationLayer:s,drawLayer:r,textLayer:a,viewport:o,l10n:l}){const c=[...Kr.#H.values()];if(!Kr._initialized){Kr._initialized=!0;for(const e of c)e.initialize(l,t)}t.registerEditorTypes(c),this.#g=t,this.pageIndex=e,this.div=i,this.#$n=n,this.#Pa=s,this.viewport=o,this.#qa=a,this.drawLayer=r,this.#g.addLayer(this)}get isEmpty(){return 0===this.#Fa.size}get isInvisible(){return this.isEmpty&&this.#g.getMode()===Ke.NONE}updateToolbar(t){this.#g.updateToolbar(t)}updateMode(t=this.#g.getMode()){switch(this.#za(),t){case Ke.NONE:return this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),void this.disableClick();case Ke.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case Ke.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const i of Kr.#H.values())e.toggle(`${i._type}Editing`,t===i._editorType);this.div.hidden=!1}hasTextLayer(t){return t===this.#qa?.div}addInkEditorIfNeeded(t){if(this.#g.getMode()===Ke.INK){if(!t)for(const t of this.#Fa.values())if(t.isEmpty())return void t.setInBackground();this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}}setEditingState(t){this.#g.setEditingState(t)}addCommands(t){this.#g.addCommands(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#Pa?.div.classList.toggle("disabled",!t)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const e of this.#Fa.values())e.enableEditing(),e.show(!0),e.annotationElementId&&(this.#g.removeChangedExistingAnnotation(e),t.add(e.annotationElementId));if(!this.#Pa)return;const e=this.#Pa.getEditableAnnotations();for(const i of e){if(i.hide(),this.#g.isDeletedAnnotationElement(i.data.id))continue;if(t.has(i.data.id))continue;const e=this.deserialize(i);e&&(this.addOrRebuild(e),e.enableEditing())}}disable(){this.#Ba=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const i of this.#Fa.values())i.disableEditing(),i.annotationElementId&&(null===i.serialize()?(e.set(i.annotationElementId,i),this.getEditableAnnotation(i.annotationElementId)?.show(),i.remove()):t.set(i.annotationElementId,i));if(this.#Pa){const i=this.#Pa.getEditableAnnotations();for(const n of i){const{id:i}=n.data;if(this.#g.isDeletedAnnotationElement(i))continue;let s=e.get(i);s?(s.resetAnnotationElement(n),s.show(!1),n.show()):(s=t.get(i),s&&(this.#g.addChangedExistingAnnotation(s),s.renderAnnotationElement(n),s.show(!1)),n.show())}}this.#za(),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const t of Kr.#H.values())i.remove(`${t._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#Ba=!1}getEditableAnnotation(t){return this.#Pa?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#g.getActive()!==t&&this.#g.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#qa?.div&&!this.#Ha){this.#Ha=new AbortController;const t=this.#g.combinedSignal(this.#Ha);this.#qa.div.addEventListener("pointerdown",this.#ja.bind(this),{signal:t}),this.#qa.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#qa?.div&&this.#Ha&&(this.#Ha.abort(),this.#Ha=null,this.#qa.div.classList.remove("highlighting"))}#ja(t){this.#g.unselectAll();const{target:e}=t;if(e===this.#qa.div||e.classList.contains("endOfContent")&&this.#qa.div.contains(e)){const{isMac:e}=xi.platform;if(0!==t.button||t.ctrlKey&&e)return;this.#g.showAllEditors("highlight",!0,!0),this.#qa.div.classList.add("free"),this.toggleDrawing(),Wr.startHighlighting(this,"ltr"===this.#g.direction,t),this.#qa.div.addEventListener("pointerup",(()=>{this.#qa.div.classList.remove("free"),this.toggleDrawing(!0)}),{once:!0,signal:this.#g._signal}),t.preventDefault()}}enableClick(){if(this.#Ra)return;this.#Ra=new AbortController;const t=this.#g.combinedSignal(this.#Ra);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:t})}disableClick(){this.#Ra?.abort(),this.#Ra=null}attach(t){this.#Fa.set(t.id,t);const{annotationElementId:e}=t;e&&this.#g.isDeletedAnnotationElement(e)&&this.#g.removeDeletedAnnotationElement(t)}detach(t){this.#Fa.delete(t.id),this.#$n?.removePointerInTextLayer(t.contentDiv),!this.#Ba&&t.annotationElementId&&this.#g.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#g.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1,this.#Na||this.addInkEditorIfNeeded(!1)}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#g.addDeletedAnnotationElement(t.annotationElementId),fn.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(t.parent!==this||!t.isAttachedToDOM){if(this.changeParent(t),this.#g.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),this.#g.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#Da&&(t._focusEventsAllowed=!1,this.#Da=setTimeout((()=>{this.#Da=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",(()=>{t._focusEventsAllowed=!0}),{once:!0,signal:this.#g._signal}),e.focus())}),0)),t._structTreeParentId=this.#$n?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){this.addCommands({cmd:()=>t._uiManager.rebuild(t),undo:()=>{t.remove()},mustExec:!1})}getNextId(){return this.#g.getId()}get#Ua(){return Kr.#H.get(this.#g.getMode())}combinedSignal(t){return this.#g.combinedSignal(t)}#Va(t){const e=this.#Ua;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#Ua?.canCreateNewEmptyEditor()}pasteEditor(t,e){this.#g.updateToolbar(t),this.#g.updateMode(t);const{offsetX:i,offsetY:n}=this.#Ga(),s=this.getNextId(),r=this.#Va({parent:this,id:s,x:i,y:n,uiManager:this.#g,isCentered:!0,...e});r&&this.add(r)}deserialize(t){return Kr.#H.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#g)||null}createAndAddNewEditor(t,e,i={}){const n=this.getNextId(),s=this.#Va({parent:this,id:n,x:t.offsetX,y:t.offsetY,uiManager:this.#g,isCentered:e,...i});return s&&this.add(s),s}#Ga(){const{x:t,y:e,width:i,height:n}=this.div.getBoundingClientRect(),s=Math.max(0,t),r=Math.max(0,e),a=(s+Math.min(window.innerWidth,t+i))/2-t,o=(r+Math.min(window.innerHeight,e+n))/2-e,[l,c]=this.viewport.rotation%180==0?[a,o]:[o,a];return{offsetX:l,offsetY:c}}addNewEditor(){this.createAndAddNewEditor(this.#Ga(),!0)}setSelected(t){this.#g.setSelected(t)}toggleSelected(t){this.#g.toggleSelected(t)}isSelected(t){return this.#g.isSelected(t)}unselect(t){this.#g.unselect(t)}pointerup(t){const{isMac:e}=xi.platform;0!==t.button||t.ctrlKey&&e||t.target===this.div&&this.#Oa&&(this.#Oa=!1,this.#La?this.#g.getMode()!==Ke.STAMP?this.createAndAddNewEditor(t,!1):this.#g.unselectAll():this.#La=!0)}pointerdown(t){if(this.#g.getMode()===Ke.HIGHLIGHT&&this.enableTextSelection(),this.#Oa)return void(this.#Oa=!1);const{isMac:e}=xi.platform;if(0!==t.button||t.ctrlKey&&e)return;if(t.target!==this.div)return;this.#Oa=!0;const i=this.#g.getActive();this.#La=!i||i.isEmpty()}findNewParent(t,e,i){const n=this.#g.findParent(e,i);return null!==n&&n!==this&&(n.changeParent(t),!0)}destroy(){this.#g.getActive()?.parent===this&&(this.#g.commitOrRemove(),this.#g.setActiveEditor(null)),this.#Da&&(clearTimeout(this.#Da),this.#Da=null);for(const t of this.#Fa.values())this.#$n?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#Fa.clear(),this.#g.removeLayer(this)}#za(){this.#Na=!0;for(const t of this.#Fa.values())t.isEmpty()&&t.remove();this.#Na=!1}render({viewport:t}){this.viewport=t,nn(this.div,t);for(const t of this.#g.getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:t}){this.#g.commitOrRemove(),this.#za();const e=this.viewport.rotation,i=t.rotation;if(this.viewport=t,nn(this.div,{rotation:i}),e!==i)for(const t of this.#Fa.values())t.rotate(i);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#g.viewParameters.realScale}}class Yr{#Cn=null;#y=0;#Wa=new Map;#$a=new Map;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(this.#Cn){if(this.#Cn!==t){if(this.#Wa.size>0)for(const e of this.#Wa.values())e.remove(),t.append(e);this.#Cn=t}}else this.#Cn=t}static get _svgFactory(){return hi(this,"_svgFactory",new Hi)}static#Xa(t,{x:e=0,y:i=0,width:n=1,height:s=1}={}){const{style:r}=t;r.top=100*i+"%",r.left=100*e+"%",r.width=100*n+"%",r.height=100*s+"%"}#Ka(t){const e=Yr._svgFactory.create(1,1,!0);return this.#Cn.append(e),e.setAttribute("aria-hidden",!0),Yr.#Xa(e,t),e}#Ya(t,e){const i=Yr._svgFactory.createElement("clipPath");t.append(i);const n=`clip_${e}`;i.setAttribute("id",n),i.setAttribute("clipPathUnits","objectBoundingBox");const s=Yr._svgFactory.createElement("use");return i.append(s),s.setAttribute("href",`#${e}`),s.classList.add("clip"),n}highlight(t,e,i,n=!1){const s=this.#y++,r=this.#Ka(t.box);r.classList.add("highlight"),t.free&&r.classList.add("free");const a=Yr._svgFactory.createElement("defs");r.append(a);const o=Yr._svgFactory.createElement("path");a.append(o);const l=`path_p${this.pageIndex}_${s}`;o.setAttribute("id",l),o.setAttribute("d",t.toSVGPath()),n&&this.#$a.set(s,o);const c=this.#Ya(a,l),d=Yr._svgFactory.createElement("use");return r.append(d),r.setAttribute("fill",e),r.setAttribute("fill-opacity",i),d.setAttribute("href",`#${l}`),this.#Wa.set(s,r),{id:s,clipPathId:`url(#${c})`}}highlightOutline(t){const e=this.#y++,i=this.#Ka(t.box);i.classList.add("highlightOutline");const n=Yr._svgFactory.createElement("defs");i.append(n);const s=Yr._svgFactory.createElement("path");n.append(s);const r=`path_p${this.pageIndex}_${e}`;let a;if(s.setAttribute("id",r),s.setAttribute("d",t.toSVGPath()),s.setAttribute("vector-effect","non-scaling-stroke"),t.free){i.classList.add("free");const t=Yr._svgFactory.createElement("mask");n.append(t),a=`mask_p${this.pageIndex}_${e}`,t.setAttribute("id",a),t.setAttribute("maskUnits","objectBoundingBox");const s=Yr._svgFactory.createElement("rect");t.append(s),s.setAttribute("width","1"),s.setAttribute("height","1"),s.setAttribute("fill","white");const o=Yr._svgFactory.createElement("use");t.append(o),o.setAttribute("href",`#${r}`),o.setAttribute("stroke","none"),o.setAttribute("fill","black"),o.setAttribute("fill-rule","nonzero"),o.classList.add("mask")}const o=Yr._svgFactory.createElement("use");i.append(o),o.setAttribute("href",`#${r}`),a&&o.setAttribute("mask",`url(#${a})`);const l=o.cloneNode();return i.append(l),o.classList.add("mainOutline"),l.classList.add("secondaryOutline"),this.#Wa.set(e,i),e}finalizeLine(t,e){const i=this.#$a.get(t);this.#$a.delete(t),this.updateBox(t,e.box),i.setAttribute("d",e.toSVGPath())}updateLine(t,e){this.#Wa.get(t).firstChild.firstChild.setAttribute("d",e.toSVGPath())}removeFreeHighlight(t){this.remove(t),this.#$a.delete(t)}updatePath(t,e){this.#$a.get(t).setAttribute("d",e.toSVGPath())}updateBox(t,e){Yr.#Xa(this.#Wa.get(t),e)}show(t,e){this.#Wa.get(t).classList.toggle("hidden",!e)}rotate(t,e){this.#Wa.get(t).setAttribute("data-main-rotation",e)}changeColor(t,e){this.#Wa.get(t).setAttribute("fill",e)}changeOpacity(t,e){this.#Wa.get(t).setAttribute("fill-opacity",e)}addClass(t,e){this.#Wa.get(t).classList.add(e)}removeClass(t,e){this.#Wa.get(t).classList.remove(e)}remove(t){null!==this.#Cn&&(this.#Wa.get(t).remove(),this.#Wa.delete(t))}destroy(){this.#Cn=null;for(const t of this.#Wa.values())t.remove();this.#Wa.clear()}}function Qr(t){return Qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qr(t)}function Jr(){Jr=function(){return e};var t,e={},i=Object.prototype,n=i.hasOwnProperty,s=Object.defineProperty||function(t,e,i){t[e]=i.value},r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function c(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,i){return t[e]=i}}function d(t,e,i,n){var r=e&&e.prototype instanceof v?e:v,a=Object.create(r.prototype),o=new I(n||[]);return s(a,"_invoke",{value:T(t,i,o)}),a}function h(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}e.wrap=d;var u="suspendedStart",p="suspendedYield",f="executing",g="completed",m={};function v(){}function b(){}function y(){}var _={};c(_,a,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(L([])));A&&A!==i&&n.call(A,a)&&(_=A);var x=y.prototype=v.prototype=Object.create(_);function E(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function i(s,r,a,o){var l=h(t[s],t,r);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==Qr(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){i("next",t,a,o)}),(function(t){i("throw",t,a,o)})):e.resolve(d).then((function(t){c.value=t,a(c)}),(function(t){return i("throw",t,a,o)}))}o(l.arg)}var r;s(this,"_invoke",{value:function(t,n){function s(){return new e((function(e,s){i(t,n,e,s)}))}return r=r?r.then(s,s):s()}})}function T(e,i,n){var s=u;return function(r,a){if(s===f)throw Error("Generator is already running");if(s===g){if("throw"===r)throw a;return{value:t,done:!0}}for(n.method=r,n.arg=a;;){var o=n.delegate;if(o){var l=C(o,n);if(l){if(l===m)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(s===u)throw s=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);s=f;var c=h(e,i,n);if("normal"===c.type){if(s=n.done?g:p,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(s=g,n.method="throw",n.arg=c.arg)}}}function C(e,i){var n=i.method,s=e.iterator[n];if(s===t)return i.delegate=null,"throw"===n&&e.iterator.return&&(i.method="return",i.arg=t,C(e,i),"throw"===i.method)||"return"!==n&&(i.method="throw",i.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var r=h(s,e.iterator,i.arg);if("throw"===r.type)return i.method="throw",i.arg=r.arg,i.delegate=null,m;var a=r.arg;return a?a.done?(i[e.resultName]=a.value,i.next=e.nextLoc,"return"!==i.method&&(i.method="next",i.arg=t),i.delegate=null,m):a:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,m)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function L(e){if(e||""===e){var i=e[a];if(i)return i.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var s=-1,r=function i(){for(;++s<e.length;)if(n.call(e,s))return i.value=e[s],i.done=!1,i;return i.value=t,i.done=!0,i};return r.next=r}}throw new TypeError(Qr(e)+" is not iterable")}return b.prototype=y,s(x,"constructor",{value:y,configurable:!0}),s(y,"constructor",{value:b,configurable:!0}),b.displayName=c(y,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,c(t,l,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},E(S.prototype),c(S.prototype,o,(function(){return this})),e.AsyncIterator=S,e.async=function(t,i,n,s,r){void 0===r&&(r=Promise);var a=new S(d(t,i,n,s),r);return e.isGeneratorFunction(i)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(x),c(x,l,"Generator"),c(x,a,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),i=[];for(var n in e)i.push(n);return i.reverse(),function t(){for(;i.length;){var n=i.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=L,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(M),!e)for(var i in this)"t"===i.charAt(0)&&n.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var i=this;function s(n,s){return o.type="throw",o.arg=e,i.next=n,s&&(i.method="next",i.arg=t),!!s}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],o=a.completion;if("root"===a.tryLoc)return s("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return s(a.catchLoc,!0);if(this.prev<a.finallyLoc)return s(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return s(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return s(a.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i];if(s.tryLoc<=this.prev&&n.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var r=s;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=t,a.arg=e,r?(this.method="next",this.next=r.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),M(i),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var n=i.completion;if("throw"===n.type){var s=n.arg;M(i)}return s}}throw Error("illegal catch attempt")},delegateYield:function(e,i,n){return this.delegate={iterator:L(e),resultName:i,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function Zr(t,e,i,n,s,r,a){try{var o=t[r](a),l=o.value}catch(t){return void i(t)}o.done?e(l):Promise.resolve(l).then(n,s)}"undefined"!=typeof window&&"Worker"in window&&(Ue.GlobalWorkerOptions.workerPort=new Worker(new URL(i.p+i.u(332),i.b),{type:"module"}));var ta={renderedCss:!1};function ea(){var t;ta.renderedCss||((t=document.createElement("style")).textContent="\n/* Learnosity render PDF styles */\n.lt__renderPDF_pdf .pdf-viewer {\n    border: none;\n    width: 100%;\n    height: 650px;\n}\n",document.head.append(t),ta.renderedCss=!0),_.appInstance().on("item:load",(function(t){var e,i;e=D.itemReference(),(i=document.querySelector('.learnosity-item[data-reference="'.concat(e,'"]')).querySelectorAll(".lrn_widget .resource")).length&&i.forEach((function(t,e){var i=t.querySelector("a").getAttribute("href");if("pdf"===i.substring(i.length-3)){t.classList.add("sr-only"),function(t){return ia.apply(this,arguments)}(i).then((function(e){!function(e){if(!document.getElementById(e)){var n=document.createElement("div"),s=document.createElement("iframe");n.setAttribute("id",e),n.setAttribute("class","lt__renderPDF_pdf"),t.before(n),s.setAttribute("class","pdf-viewer"),s.setAttribute("src","".concat(i,"#sidebarViewOnLoad=0&_pagemode=none&_toolbar=0&view=FitH")),n.appendChild(s)}}(e)}))}}))}))}function ia(){var t;return t=Jr().mark((function t(e){var i,n,s,r,a;return Jr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=new TextEncoder,n=i.encode(e),t.next=4,crypto.subtle.digest("SHA-256",n);case 4:return s=t.sent,r=Array.from(new Uint8Array(s)),a=r.map((function(t){return t.toString(16).padStart(2,"0")})).join(""),t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)})),ia=function(){var e=this,i=arguments;return new Promise((function(n,s){var r=t.apply(e,i);function a(t){Zr(r,n,s,a,o,"next",t)}function o(t){Zr(r,n,s,a,o,"throw",t)}a(void 0)}))},ia.apply(this,arguments)}function na(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=Array(e);i<e;i++)n[i]=t[i];return n}var sa={class:"lrn__resetResponse",label:"Reset question",renderedCss:!1,types:["mcq"]};function ra(t,e){var i,n;t&&"string"==typeof t&&(sa.label=t),e&&Array.isArray(e)&&(sa.types=e),sa.renderedCss||(i=document.createElement("style"),n="\n/* Learnosity reset question styles */\n.lrn .lrn_btn.".concat(sa.class," {\n    margin-top: 1em;\n    margin-bottom: 0.5em;\n    clear: both;\n    display: block;\n}\n"),i.textContent=n,document.head.append(i),sa.renderedCss=!0),_.appInstance().on("item:load",(function(){!function(){var t,e,i=T.questions();try{var n,s=function(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(t){if("string"==typeof t)return na(t,e);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?na(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,s=function(){};return{s,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,o=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return a=t.done,t},e:function(t){o=!0,r=t},f:function(){try{a||null==i.return||i.return()}finally{if(o)throw r}}}}(i);try{for(s.s();!(n=s.n()).done;){var r=n.value;if(sa.types.includes("*")||sa.types.includes(r.type)){var a=r.response_id,o=document.getElementById(a),l=o.querySelector(".lrn_response"),c=o.querySelector(".".concat(sa.class));c||(l.append((t=void 0,e=void 0,t=document.createElement("button"),e=document.createElement("span"),t.classList.add("lds-btn","lds-btn-secondary","lrn_btn",sa.class),e.append(sa.label),t.append(e),t)),(c=o.querySelector(".".concat(sa.class))).addEventListener("click",aa))}}}catch(t){s.e(t)}finally{s.f()}}catch(t){C.A.error(t)}}()}))}function aa(t){var e=t.srcElement.closest(".lrn_widget").getAttribute("id");_.questionsApp().question(e).resetResponse()}var oa="ERROR",la={_initialised:!1,elTimerWrapper:null,forceRenderTimer:!1,renderedCss:!1};function ca(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:60;if(la._initialised)C.A.debug("Toggle timer already initialised, ignoring run();",oa);else{var i=document.querySelector(".lrn-sm");if(la.elTimerWrapper=document.querySelector(".lrn-timer-wrapper"),i&&la.elTimerWrapper){la.renderedCss||((t=document.createElement("style")).textContent="\n/* Learnosity toggle timer styles */\n.lrn.lrn-assess .lrn-region:not(.lrn-items-region) .lrn_btn.lt__timer-button {\n    font-size: inherit;\n}\n\n.lrn-assess .lrn_btn.lt__timer-button .timer {\n    padding: 8px;\n    height: 29px;\n    position: relative;\n    top: -4px;\n}\n\n.lrn.lrn-assess .lt__timer-wrapper.lt__timer-hide .lrn_btn.lt__timer-button .timer .clock:before {\n    padding-right: 0;\n}\n\n.lrn-timer-wrapper.lt__timer-hide .lt__timer-button .timer > *:not(.clock) {\n    display: none;\n}\n",document.head.append(t),la.renderedCss=!0),la._initialised=!0;var n=Array.from(la.elTimerWrapper.children),s=document.createElement("button");s.classList.add("lrn_btn","lt__timer-button"),s.setAttribute("type","button"),s.setAttribute("aria-label","".concat(la.elTimerWrapper.getAttribute("aria-label"),", click to toggle visibility of the timer.")),la.elTimerWrapper.innerHTML="",la.elTimerWrapper.appendChild(s),n.forEach((function(t){s.appendChild(t)})),s.addEventListener("click",(function(){da()})),_.appInstance().on("time:change",(function(){var t=w.timeRemaining();!la.forceRenderTimer&&"number"==typeof t&&t<=Number(e)&&la.elTimerWrapper.classList.contains("lt__timer-hide")&&(la.forceRenderTimer=!0,la.elTimerWrapper.classList.remove("lt__timer-hide"),C.A.info("Force show the timer limit (".concat(e,") reached.")))}))}else C.A.warn("Timer wrapper, or `lrn-sm`, not found")}}function da(){la.elTimerWrapper.classList.toggle("lt__timer-hide")}var ha=i(4196),ua={elementId:null,player:{instances:{beach:null,birds:null,wind:null,thunder:null,campfire:null,rain:null},sound:null,volume:null},playlist:{beach:"https://assets.learnosity.com/learnosity_toolkit/whitenoise/beach.mp3",birds:"https://assets.learnosity.com/learnosity_toolkit/whitenoise/birds.mp3",wind:"https://assets.learnosity.com/learnosity_toolkit/whitenoise/wind.mp3",thunder:"https://assets.learnosity.com/learnosity_toolkit/whitenoise/thunder.mp3",campfire:"https://assets.learnosity.com/learnosity_toolkit/whitenoise/campfire.mp3",rain:"https://assets.learnosity.com/learnosity_toolkit/whitenoise/rain.mp3"},queryRoot:document,renderedCss:!1};function pa(t,e){ua.elementId=t||null,ua.queryRoot=e||document,ua.renderedCss||function(){var t=":root";ua.queryRoot!==document&&(t=":host");var e=document.createElement("style"),i="\n/* Learnosity white noise player styles */\n".concat(t,' {\n    --lt-wn-border: #888888;\n    --lt-wn-border-radius: 10px;\n    --lt-wn-color: #333333;\n    --lt-wn-svg-size: 4rem;\n    --lt-wn-control-svg-size: 1.5rem;\n    --lt-wn-range-size: 15rem;\n    --lt-wn-min-height: 19rem;\n}\n\n@container (max-width: 300px) {\n    .lt__player {\n        min-height: var(--lt-wn-min-height);\n        svg {\n            --lt-wn-svg-size: 3rem;\n        }\n        .lt__control-wrapper {\n            svg {\n                --lt-wn-control-svg-size: 1rem;\n            }\n            input[type="range"] {\n                --lt-wn-range-size: 10rem;\n            }\n        }\n    }\n}\n\n.lt__player {\n    container-type: size;\n    background-color: #fff;\n    width: 100%;\n    max-width: 30rem;\n    min-height: var(--lt-wn-min-height);\n    border: 1px solid #dddddd;\n    border-radius: var(--lt-wn-border-radius);\n    padding: 1rem;\n    filter: drop-shadow(4px 5px 7px #8d8d8d);\n    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\n    color: var(--lt-wn-color);\n    margin: 0 auto;\n}\n.lt__player svg {\n    width: var(--lt-wn-svg-size);\n    height: var(--lt-wn-svg-size);\n    display: inline;\n}\n.lt__meta ul {\n    display: grid;\n    grid-template-columns: repeat(3, 1fr);\n    list-style: none;\n    text-align: center;\n    margin: 0;\n    padding: 0;\n}\n.lt__meta ul li {\n    box-sizing: border-box;\n    border-radius: var(--lt-wn-border-radius);\n    border: 1px solid var(--lt-wn-border);\n    margin: 0.3rem;\n\n    &:hover {\n        background-color: #f2f4f5;\n    }\n}\n.lt__meta ul li button {\n    display: block;\n    text-decoration: none;\n    border-radius: inherit;\n    width: 100%;\n    border: none;\n    background: none;\n\n    &:hover,\n    &:focus {\n        outline: 5px auto -webkit-focus-ring-color;\n        outline-offset: -2px;\n        background-color: #f2f4f5;\n    }\n\n    &:active {\n        box-shadow: 0 0 0 0.25rem rgba(49, 132, 253, 0.5);\n    }\n}\n.lt__meta ul li button.lt__sound-active {\n    box-shadow: 0 0 0 0.25rem rgba(49, 132, 253, 0.5);\n    background: #efefef;\n}\n.lt__meta ul li svg {\n    padding: 1rem 1rem 0.3rem 1rem;\n    vertical-align: middle;\n}\n.lt__control-wrapper svg {\n    width: var(--lt-wn-control-svg-size);\n}\n.lt__control-wrapper svg:last-child {\n    position: relative;\n    left: 0.6rem;\n}\n.lt__sound-label {\n    display: block;\n    padding-bottom: 0.7rem;\n}\n.lt__toolbar {\n    margin-top: 0.5rem;\n    text-align: center;\n}\n.lt__control-wrapper label {\n    text-align: center;\n    padding-bottom: 0;\n    margin-bottom: 0;\n    display: block;\n    position: relative;\n    top: 10px;\n}\n.lt__control-wrapper button {\n    background: none;\n    border: none;\n    cursor: pointer;\n}\ninput[type="range"] {\n   -webkit-appearance: none;\n    appearance: none;\n    background: transparent;\n    cursor: pointer;\n    width: var(--lt-wn-range-size);\n}\n/* Removes default focus */\ninput[type="range"]:focus {\n  outline: none;\n}\ninput[type="range"]::-webkit-slider-runnable-track {\n   background-color: #01243d;\n   border-radius: 0.5rem;\n   height: 0.5rem;\n}\ninput[type="range"]::-webkit-slider-thumb {\n  -webkit-appearance: none;\n   appearance: none;\n   margin-top: -12px;\n   background-color: #fff;\n   border: 2px solid #01243d;\n   height: 2rem;\n   width: 1rem;\n}\ninput[type="range"]:focus::-webkit-slider-thumb {\n  border: 1px solid #01243d;\n  outline: 3px solid #01243d;\n  outline-offset: 0.125rem;\n}\ninput[type="range"]::-moz-range-track {\n   background-color: #01243d;\n   border-radius: 0.5rem;\n   height: 0.5rem;\n}\ninput[type="range"]::-moz-range-thumb {\n   border: none;\n   border-radius: 0;\n   border: 1px solid #01243d;\n   background-color: #fff;\n   height: 2rem;\n   width: 1rem;\n}\ninput[type="range"]:focus::-moz-range-thumb {\n  border: 1px solid #01243d;\n  outline: 3px solid #01243d;\n  outline-offset: 0.125rem;\n}\n\n@media (max-width: 400px) {\n    .lt__meta ul {\n        display: grid;\n        grid-template-columns: repeat(2, 1fr);\n    }\n    input[type="range"] {\n        width: 10rem;\n    }\n}\n\n.lt__whitenoise-player-icon::before {\n    content: url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 80C149.9 80 62.4 159.4 49.6 262c9.4-3.8 19.6-6 30.4-6c26.5 0 48 21.5 48 48V432c0 26.5-21.5 48-48 48c-44.2 0-80-35.8-80-80V384 336 288C0 146.6 114.6 32 256 32s256 114.6 256 256v48 48 16c0 44.2-35.8 80-80 80c-26.5 0-48-21.5-48-48V304c0-26.5 21.5-48 48-48c10.8 0 21 2.1 30.4 6C449.6 159.4 362.1 80 256 80z"/></svg>\');\n    width: 16px;\n    color: var(--lt-wn-color);\n    margin-top: 0;\n    font-size: 16px;\n    -webkit-transition: color .2s;\n    transition: color .2s;\n    -webkit-font-smoothing: antialiased;\n}\n');e.textContent=i,ua.queryRoot===document?document.head.append(e):ua.queryRoot.appendChild(e),ua.renderedCss=!0}(),_.assessApp().on("button:btn-whitenoise:clicked",(function(){fa()}))}function fa(){var t='<div class="lt__player">\n    <div class="lt__meta">\n        <p id="lt__player-instructions" class="sr-only">Choose a sound from the list below. Click to play or pause, use the slider at the bottom to control the volume level.</p>\n        <ul aria-labelledby="lt__player-instructions">\n            <li><button class="lt__controls-sound" data-lt-sound="beach" aria-pressed="false" aria-label="Click to play or pause beach sounds"><svg role="img" aria-label="Beach" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M346.3 271.8l-60.1-21.9L214 448H32c-17.7 0-32 14.3-32 32s14.3 32 32 32H544c17.7 0 32-14.3 32-32s-14.3-32-32-32H282.1l64.1-176.2zm121.1-.2l-3.3 9.1 67.7 24.6c18.1 6.6 38-4.2 39.6-23.4c6.5-78.5-23.9-155.5-80.8-208.5c2 8 3.2 16.3 3.4 24.8l.2 6c1.8 57-7.3 113.8-26.8 167.4zM462 99.1c-1.1-34.4-22.5-64.8-54.4-77.4c-.9-.4-1.9-.7-2.8-1.1c-33-11.7-69.8-2.4-93.1 23.8l-4 4.5C272.4 88.3 245 134.2 226.8 184l-3.3 9.1L434 269.7l3.3-9.1c18.1-49.8 26.6-102.5 24.9-155.5l-.2-6zM107.2 112.9c-11.1 15.7-2.8 36.8 15.3 43.4l71 25.8 3.3-9.1c19.5-53.6 49.1-103 87.1-145.5l4-4.5c6.2-6.9 13.1-13 20.5-18.2c-79.6 2.5-154.7 42.2-201.2 108z" /></svg><span class="lt__sound-label">Beach</span></button></li>\n            <li><button class="lt__controls-sound" data-lt-sound="birds" aria-pressed="false" aria-label="Click to play or pause birds sounds"><svg role="img" aria-label="Birds" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M160.8 96.5c14 17 31 30.9 49.5 42.2c25.9 15.8 53.7 25.9 77.7 31.6V138.8C265.8 108.5 250 71.5 248.6 28c-.4-11.3-7.5-21.5-18.4-24.4c-7.6-2-15.8-.2-21 5.8c-13.3 15.4-32.7 44.6-48.4 87.2zM320 144v30.6l0 0v1.3l0 0 0 32.1c-60.8-5.1-185-43.8-219.3-157.2C97.4 40 87.9 32 76.6 32c-7.9 0-15.3 3.9-18.8 11C46.8 65.9 32 112.1 32 176c0 116.9 80.1 180.5 118.4 202.8L11.8 416.6C6.7 418 2.6 421.8 .9 426.8s-.8 10.6 2.3 14.8C21.7 466.2 77.3 512 160 512c3.6 0 7.2-1.2 10-3.5L245.6 448H320c88.4 0 160-71.6 160-160V128l29.9-44.9c1.3-2 2.1-4.4 2.1-6.8c0-6.8-5.5-12.3-12.3-12.3H400c-44.2 0-80 35.8-80 80zm80-16a16 16 0 1 1 0 32 16 16 0 1 1 0-32z" /></svg><span class="lt__sound-label">Birds</span></button></li>\n            <li><button class="lt__controls-sound" data-lt-sound="campfire" aria-pressed="false" aria-label="Click to play or pause campfire sounds"><svg role="img" aria-label="Campfire" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M159.3 5.4c7.8-7.3 19.9-7.2 27.7 .1c27.6 25.9 53.5 53.8 77.7 84c11-14.4 23.5-30.1 37-42.9c7.9-7.4 20.1-7.4 28 .1c34.6 33 63.9 76.6 84.5 118c20.3 40.8 33.8 82.5 33.8 111.9C448 404.2 348.2 512 224 512C98.4 512 0 404.1 0 276.5c0-38.4 17.8-85.3 45.4-131.7C73.3 97.7 112.7 48.6 159.3 5.4zM225.7 416c25.3 0 47.7-7 68.8-21c42.1-29.4 53.4-88.2 28.1-134.4c-4.5-9-16-9.6-22.5-2l-25.2 29.3c-6.6 7.6-18.5 7.4-24.7-.5c-16.5-21-46-58.5-62.8-79.8c-6.3-8-18.3-8.1-24.7-.1c-33.8 42.5-50.8 69.3-50.8 99.4C112 375.4 162.6 416 225.7 416z" /></svg><span class="lt__sound-label">Campfire</span></button></li>\n            <li><button class="lt__controls-sound" data-lt-sound="rain" aria-pressed="false" aria-label="Click to play or pause rain sounds"><svg role="img" aria-label="Rain" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M96 320c-53 0-96-43-96-96c0-42.5 27.6-78.6 65.9-91.2C64.7 126.1 64 119.1 64 112C64 50.1 114.1 0 176 0c43.1 0 80.5 24.3 99.2 60c14.7-17.1 36.5-28 60.8-28c44.2 0 80 35.8 80 80c0 5.5-.6 10.8-1.6 16c.5 0 1.1 0 1.6 0c53 0 96 43 96 96s-43 96-96 96H96zm-6.8 52c1.3-2.5 3.9-4 6.8-4s5.4 1.5 6.8 4l35.1 64.6c4.1 7.5 6.2 15.8 6.2 24.3v3c0 26.5-21.5 48-48 48s-48-21.5-48-48v-3c0-8.5 2.1-16.9 6.2-24.3L89.2 372zm160 0c1.3-2.5 3.9-4 6.8-4s5.4 1.5 6.8 4l35.1 64.6c4.1 7.5 6.2 15.8 6.2 24.3v3c0 26.5-21.5 48-48 48s-48-21.5-48-48v-3c0-8.5 2.1-16.9 6.2-24.3L249.2 372zm124.9 64.6L409.2 372c1.3-2.5 3.9-4 6.8-4s5.4 1.5 6.8 4l35.1 64.6c4.1 7.5 6.2 15.8 6.2 24.3v3c0 26.5-21.5 48-48 48s-48-21.5-48-48v-3c0-8.5 2.1-16.9 6.2-24.3z" /></svg><span class="lt__sound-label">Rain</span></button></li>\n            <li><button class="lt__controls-sound" data-lt-sound="thunder" aria-pressed="false" aria-label="Click to play or pause thunder sounds"><svg role="img" aria-label="Thunder" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M0 224c0 53 43 96 96 96h47.2L290 202.5c17.6-14.1 42.6-14 60.2 .2s22.8 38.6 12.8 58.8L333.7 320H352h64c53 0 96-43 96-96s-43-96-96-96c-.5 0-1.1 0-1.6 0c1.1-5.2 1.6-10.5 1.6-16c0-44.2-35.8-80-80-80c-24.3 0-46.1 10.9-60.8 28C256.5 24.3 219.1 0 176 0C114.1 0 64 50.1 64 112c0 7.1 .7 14.1 1.9 20.8C27.6 145.4 0 181.5 0 224zm330.1 3.6c-5.8-4.7-14.2-4.7-20.1-.1l-160 128c-5.3 4.2-7.4 11.4-5.1 17.8s8.3 10.7 15.1 10.7h70.1L177.7 488.8c-3.4 6.7-1.6 14.9 4.3 19.6s14.2 4.7 20.1 .1l160-128c5.3-4.2 7.4-11.4 5.1-17.8s-8.3-10.7-15.1-10.7H281.9l52.4-104.8c3.4-6.7 1.6-14.9-4.2-19.6z" /></svg><span class="lt__sound-label">Thunder</span></button></li>\n            <li><button class="lt__controls-sound" data-lt-sound="wind" aria-pressed="false" aria-label="Click to play or pause wind sounds"><svg role="img" aria-label="Wind" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M288 32c0 17.7 14.3 32 32 32h32c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32 14.3-32 32s14.3 32 32 32H352c53 0 96-43 96-96s-43-96-96-96H320c-17.7 0-32 14.3-32 32zm64 352c0 17.7 14.3 32 32 32h32c53 0 96-43 96-96s-43-96-96-96H32c-17.7 0-32 14.3-32 32s14.3 32 32 32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H384c-17.7 0-32 14.3-32 32zM128 512h32c53 0 96-43 96-96s-43-96-96-96H32c-17.7 0-32 14.3-32 32s14.3 32 32 32H160c17.7 0 32 14.3 32 32s-14.3 32-32 32H128c-17.7 0-32 14.3-32 32s14.3 32 32 32z"/></svg><span class="lt__sound-label">Wind</span></button></li>\n        </ul>\n    </div>\n    <div class="lt__toolbar">\n        <div class="lt__control-wrapper">\n            <label for="ld-volume">\n                Volume (<span id="ld-volume-value">100</span>%)\n            </label>\n            <svg role="img" aria-label="Move the slider to the left to reduce volume" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M320 64c0-12.6-7.4-24-18.9-29.2s-25-3.1-34.4 5.3L131.8 160H64c-35.3 0-64 28.7-64 64v64c0 35.3 28.7 64 64 64h67.8L266.7 471.9c9.4 8.4 22.9 10.4 34.4 5.3S320 460.6 320 448V64z"/></svg>\n            <input type="range" id="ld-volume" min="0" max="1.0" value="1.0" step="0.1" class="lt__controls-volume slider">\n            <svg role="img" aria-label="Move the slider to the right to increase volume" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M533.6 32.5C598.5 85.2 640 165.8 640 256s-41.5 170.7-106.4 223.5c-10.3 8.4-25.4 6.8-33.8-3.5s-6.8-25.4 3.5-33.8C557.5 398.2 592 331.2 592 256s-34.5-142.2-88.7-186.3c-10.3-8.4-11.8-23.5-3.5-33.8s23.5-11.8 33.8-3.5zM473.1 107c43.2 35.2 70.9 88.9 70.9 149s-27.7 113.8-70.9 149c-10.3 8.4-25.4 6.8-33.8-3.5s-6.8-25.4 3.5-33.8C475.3 341.3 496 301.1 496 256s-20.7-85.3-53.2-111.8c-10.3-8.4-11.8-23.5-3.5-33.8s23.5-11.8 33.8-3.5zm-60.5 74.5C434.1 199.1 448 225.9 448 256s-13.9 56.9-35.4 74.5c-10.3 8.4-25.4 6.8-33.8-3.5s-6.8-25.4 3.5-33.8C393.1 284.4 400 271 400 256s-6.9-28.4-17.7-37.3c-10.3-8.4-11.8-23.5-3.5-33.8s23.5-11.8 33.8-3.5zM301.1 34.8C312.6 40 320 51.4 320 64V448c0 12.6-7.4 24-18.9 29.2s-25 3.1-34.4-5.3L131.8 352H64c-35.3 0-64-28.7-64-64V224c0-35.3 28.7-64 64-64h67.8L266.7 40.1c9.4-8.4 22.9-10.4 34.4-5.3z"/></svg>\n        </div>\n    </div>\n</div>';if(ua.elementId&&!ua.shadowRoot){var e=ua.queryRoot.querySelector("#".concat(ua.elementId));if(!e)return void C.A.error("Element id '".concat(ua.elementId,"' not found, could not render player."));e.innerHTML=t}else if(ua.elementId&&ua.queryRoot!==document){var i=ua.queryRoot.querySelector("#".concat(ua.elementId));if(console.log(i),!i)return void C.A.error("Shadow root element id '".concat(ua.elementId,"' not found, could not render player."));i.innerHTML=t}else k.dialog({header:"White noise player",body:t,buttons:[{button_id:"dialog_btn_whitenoise_player",label:"Close",is_primary:!1}]});setTimeout((function(){var t=ua.queryRoot.querySelectorAll(".lt__controls-sound"),e=ua.queryRoot.querySelector("#ld-volume");t.forEach((function(t){t.addEventListener("keydown",(function(e){" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),t.click())})),t.addEventListener("click",(function(e){e.preventDefault(),function(t){var e=t.getAttribute("data-lt-sound"),i=ua.queryRoot.querySelector('[data-lt-sound="'.concat(e,'"]'));ua.player.sound&&ga(ua.player.sound),i.classList.contains("lt__sound-active")?ga(e):(ua.player.instances[e]||function(t){ua.player.instances[t]=new ha.Howl({src:[ua.playlist[t]],html5:!0,loop:!0})}(e),ua.player.sound=e,function(t){ua.player.instances[t].play()}(e)),va(e)}(t)}))})),ua.player.sound&&va(ua.player.sound),e.value=ua.player.volume||1,ma(),e.addEventListener("input",(function(){ma()}))}),500),_.assessApp().on("button:dialog_btn_whitenoise_player:clicked",(function(){k.hideDialog()}))}function ga(t){ua.player.instances[t].stop()}function ma(){var t=ua.queryRoot.querySelector("#ld-volume"),e=ua.queryRoot.querySelector("#ld-volume-value"),i=t.value;ua.player.volume=i,ha.Howler.volume(i),e.innerHTML=100*i}function va(t){ua.queryRoot.querySelectorAll(".lt__controls-sound").forEach((function(e){e.getAttribute("data-lt-sound")!==t||e.classList.contains("lt__sound-active")?(e.classList.remove("lt__sound-active"),e.setAttribute("aria-pressed","false")):(e.classList.add("lt__sound-active"),e.focus(),e.setAttribute("aria-pressed","true"))}))}function ba(t){return ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ba(t)}function ya(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function _a(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ya(Object(i),!0).forEach((function(e){wa(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ya(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function wa(t,e,i){return(e=function(t){var e=function(t){if("object"!=ba(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,"string");if("object"!=ba(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ba(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Aa={extensions:{ariaCountOnNav:_a({},s),blockGrammarChecks:_a({},r),checkAnswerValidation:_a({},a),columnResizer:_a({},o),essayLimitByCharacter:_a({},l),hideAlternatives:_a({},c),keyboardShortcuts:_a({},d),magnifier:_a({},h),mcqLabelPrefix:_a({},u),networkStatus:_a({},p),pageOverlay:_a({},f),renderPDF:_a({},g),resetResponse:_a({},m),toggleTimer:_a({},v),whiteNoise:_a({},b)}},xa=_a(_a({},y.LT),Aa),Ea=n.LT;export{Ea as LT};